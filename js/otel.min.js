(()=>{var Ka=Object.defineProperty;var Wa=(t,e,r)=>e in t?Ka(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var p=(t,e,r)=>Wa(t,typeof e!="symbol"?e+"":e,r);var Ko=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{};var Ft="1.9.0";var Wo=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function $a(t){var e=new Set([t]),r=new Set,n=t.match(Wo);if(!n)return function(){return!1};var o={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(o.prerelease!=null)return function(c){return c===t};function i(a){return r.add(a),!1}function s(a){return e.add(a),!0}return function(c){if(e.has(c))return!0;if(r.has(c))return!1;var u=c.match(Wo);if(!u)return i(c);var l={major:+u[1],minor:+u[2],patch:+u[3],prerelease:u[4]};return l.prerelease!=null||o.major!==l.major?i(c):o.major===0?o.minor===l.minor&&o.patch<=l.patch?s(c):i(c):o.minor<=l.minor?s(c):i(c)}}var $o=$a(Ft);var Xa=Ft.split(".")[0],De=Symbol.for("opentelemetry.js.api."+Xa),Me=Ko;function It(t,e,r,n){var o;n===void 0&&(n=!1);var i=Me[De]=(o=Me[De])!==null&&o!==void 0?o:{version:Ft};if(!n&&i[t]){var s=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+t);return r.error(s.stack||s.message),!1}if(i.version!==Ft){var s=new Error("@opentelemetry/api: Registration of version v"+i.version+" for "+t+" does not match previously registered API v"+Ft);return r.error(s.stack||s.message),!1}return i[t]=e,r.debug("@opentelemetry/api: Registered a global for "+t+" v"+Ft+"."),!0}function mt(t){var e,r,n=(e=Me[De])===null||e===void 0?void 0:e.version;if(!(!n||!$o(n)))return(r=Me[De])===null||r===void 0?void 0:r[t]}function Dt(t,e){e.debug("@opentelemetry/api: Unregistering a global for "+t+" v"+Ft+".");var r=Me[De];r&&delete r[t]}var Ya=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),o,i=[],s;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(a){s={error:a}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return i},qa=function(t,e,r){if(r||arguments.length===2)for(var n=0,o=e.length,i;n<o;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))},Xo=(function(){function t(e){this._namespace=e.namespace||"DiagComponentLogger"}return t.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return ke("debug",this._namespace,e)},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return ke("error",this._namespace,e)},t.prototype.info=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return ke("info",this._namespace,e)},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return ke("warn",this._namespace,e)},t.prototype.verbose=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return ke("verbose",this._namespace,e)},t})();function ke(t,e,r){var n=mt("diag");if(n)return r.unshift(e),n[t].apply(n,qa([],Ya(r),!1))}var pt;(function(t){t[t.NONE=0]="NONE",t[t.ERROR=30]="ERROR",t[t.WARN=50]="WARN",t[t.INFO=60]="INFO",t[t.DEBUG=70]="DEBUG",t[t.VERBOSE=80]="VERBOSE",t[t.ALL=9999]="ALL"})(pt||(pt={}));function Yo(t,e){t<pt.NONE?t=pt.NONE:t>pt.ALL&&(t=pt.ALL),e=e||{};function r(n,o){var i=e[n];return typeof i=="function"&&t>=o?i.bind(e):function(){}}return{error:r("error",pt.ERROR),warn:r("warn",pt.WARN),info:r("info",pt.INFO),debug:r("debug",pt.DEBUG),verbose:r("verbose",pt.VERBOSE)}}var Qa=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),o,i=[],s;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(a){s={error:a}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return i},Ja=function(t,e,r){if(r||arguments.length===2)for(var n=0,o=e.length,i;n<o;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))},tc="diag",ut=(function(){function t(){function e(o){return function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];var a=mt("diag");if(a)return a[o].apply(a,Ja([],Qa(i),!1))}}var r=this,n=function(o,i){var s,a,c;if(i===void 0&&(i={logLevel:pt.INFO}),o===r){var u=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return r.error((s=u.stack)!==null&&s!==void 0?s:u.message),!1}typeof i=="number"&&(i={logLevel:i});var l=mt("diag"),m=Yo((a=i.logLevel)!==null&&a!==void 0?a:pt.INFO,o);if(l&&!i.suppressOverrideMessage){var S=(c=new Error().stack)!==null&&c!==void 0?c:"<failed to generate stacktrace>";l.warn("Current logger will be overwritten from "+S),m.warn("Current logger will overwrite one already registered from "+S)}return It("diag",m,r,!0)};r.setLogger=n,r.disable=function(){Dt(tc,r)},r.createComponentLogger=function(o){return new Xo(o)},r.verbose=e("verbose"),r.debug=e("debug"),r.info=e("info"),r.warn=e("warn"),r.error=e("error")}return t.instance=function(){return this._instance||(this._instance=new t),this._instance},t})();var ec=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),o,i=[],s;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(a){s={error:a}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return i},rc=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},qo=(function(){function t(e){this._entries=e?new Map(e):new Map}return t.prototype.getEntry=function(e){var r=this._entries.get(e);if(r)return Object.assign({},r)},t.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(e){var r=ec(e,2),n=r[0],o=r[1];return[n,o]})},t.prototype.setEntry=function(e,r){var n=new t(this._entries);return n._entries.set(e,r),n},t.prototype.removeEntry=function(e){var r=new t(this._entries);return r._entries.delete(e),r},t.prototype.removeEntries=function(){for(var e,r,n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var i=new t(this._entries);try{for(var s=rc(n),a=s.next();!a.done;a=s.next()){var c=a.value;i._entries.delete(c)}}catch(u){e={error:u}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return i},t.prototype.clear=function(){return new t},t})();var Qo=Symbol("BaggageEntryMetadata");var nc=ut.instance();function Jo(t){return t===void 0&&(t={}),new qo(new Map(Object.entries(t)))}function Nn(t){return typeof t!="string"&&(nc.error("Cannot create baggage metadata from unknown type: "+typeof t),t=""),{__TYPE__:Qo,toString:function(){return t}}}function ae(t){return Symbol.for(t)}var oc=(function(){function t(e){var r=this;r._currentContext=e?new Map(e):new Map,r.getValue=function(n){return r._currentContext.get(n)},r.setValue=function(n,o){var i=new t(r._currentContext);return i._currentContext.set(n,o),i},r.deleteValue=function(n){var o=new t(r._currentContext);return o._currentContext.delete(n),o}}return t})(),ft=new oc;var ce=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),ic=(function(){function t(){}return t.prototype.createGauge=function(e,r){return hc},t.prototype.createHistogram=function(e,r){return dc},t.prototype.createCounter=function(e,r){return _c},t.prototype.createUpDownCounter=function(e,r){return mc},t.prototype.createObservableGauge=function(e,r){return Ec},t.prototype.createObservableCounter=function(e,r){return Tc},t.prototype.createObservableUpDownCounter=function(e,r){return gc},t.prototype.addBatchObservableCallback=function(e,r){},t.prototype.removeBatchObservableCallback=function(e){},t})();var yr=(function(){function t(){}return t})();var sc=(function(t){ce(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.add=function(r,n){},e})(yr);var ac=(function(t){ce(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.add=function(r,n){},e})(yr);var cc=(function(t){ce(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.record=function(r,n){},e})(yr);var uc=(function(t){ce(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.record=function(r,n){},e})(yr);var Pn=(function(){function t(){}return t.prototype.addCallback=function(e){},t.prototype.removeCallback=function(e){},t})();var lc=(function(t){ce(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(Pn);var pc=(function(t){ce(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(Pn);var fc=(function(t){ce(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(Pn);var ti=new ic,_c=new sc,hc=new cc,dc=new uc,mc=new ac,Tc=new lc,Ec=new pc,gc=new fc;var ei={get:function(t,e){if(t!=null)return t[e]},keys:function(t){return t==null?[]:Object.keys(t)}},ri={set:function(t,e,r){t!=null&&(t[e]=r)}};var Sc=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),o,i=[],s;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(a){s={error:a}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return i},Ac=function(t,e,r){if(r||arguments.length===2)for(var n=0,o=e.length,i;n<o;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))},ni=(function(){function t(){}return t.prototype.active=function(){return ft},t.prototype.with=function(e,r,n){for(var o=[],i=3;i<arguments.length;i++)o[i-3]=arguments[i];return r.call.apply(r,Ac([n],Sc(o),!1))},t.prototype.bind=function(e,r){return r},t.prototype.enable=function(){return this},t.prototype.disable=function(){return this},t})();var Rc=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),o,i=[],s;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(a){s={error:a}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return i},yc=function(t,e,r){if(r||arguments.length===2)for(var n=0,o=e.length,i;n<o;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))},xn="context",vc=new ni,Jt=(function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalContextManager=function(e){return It(xn,e,ut.instance())},t.prototype.active=function(){return this._getContextManager().active()},t.prototype.with=function(e,r,n){for(var o,i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];return(o=this._getContextManager()).with.apply(o,yc([e,r,n],Rc(i),!1))},t.prototype.bind=function(e,r){return this._getContextManager().bind(e,r)},t.prototype._getContextManager=function(){return mt(xn)||vc},t.prototype.disable=function(){this._getContextManager().disable(),Dt(xn,ut.instance())},t})();var _t;(function(t){t[t.NONE=0]="NONE",t[t.SAMPLED=1]="SAMPLED"})(_t||(_t={}));var vr="0000000000000000",Or="00000000000000000000000000000000",Ue={traceId:Or,spanId:vr,traceFlags:_t.NONE};var te=(function(){function t(e){e===void 0&&(e=Ue),this._spanContext=e}return t.prototype.spanContext=function(){return this._spanContext},t.prototype.setAttribute=function(e,r){return this},t.prototype.setAttributes=function(e){return this},t.prototype.addEvent=function(e,r){return this},t.prototype.addLink=function(e){return this},t.prototype.addLinks=function(e){return this},t.prototype.setStatus=function(e){return this},t.prototype.updateName=function(e){return this},t.prototype.end=function(e){},t.prototype.isRecording=function(){return!1},t.prototype.recordException=function(e,r){},t})();var Ln=ae("OpenTelemetry Context Key SPAN");function br(t){return t.getValue(Ln)||void 0}function oi(){return br(Jt.getInstance().active())}function He(t,e){return t.setValue(Ln,e)}function ii(t){return t.deleteValue(Ln)}function si(t,e){return He(t,new te(e))}function Nr(t){var e;return(e=br(t))===null||e===void 0?void 0:e.spanContext()}var Oc=/^([0-9a-f]{32})$/i,bc=/^[0-9a-f]{16}$/i;function Pr(t){return Oc.test(t)&&t!==Or}function ai(t){return bc.test(t)&&t!==vr}function jt(t){return Pr(t.traceId)&&ai(t.spanId)}function ci(t){return new te(t)}var Cn=Jt.getInstance(),xr=(function(){function t(){}return t.prototype.startSpan=function(e,r,n){n===void 0&&(n=Cn.active());var o=!!(r!=null&&r.root);if(o)return new te;var i=n&&Nr(n);return Nc(i)&&jt(i)?new te(i):new te},t.prototype.startActiveSpan=function(e,r,n,o){var i,s,a;if(!(arguments.length<2)){arguments.length===2?a=r:arguments.length===3?(i=r,a=n):(i=r,s=n,a=o);var c=s!=null?s:Cn.active(),u=this.startSpan(e,i,c),l=He(c,u);return Cn.with(l,a,void 0,u)}},t})();function Nc(t){return typeof t=="object"&&typeof t.spanId=="string"&&typeof t.traceId=="string"&&typeof t.traceFlags=="number"}var Pc=new xr,ui=(function(){function t(e,r,n,o){this._provider=e,this.name=r,this.version=n,this.options=o}return t.prototype.startSpan=function(e,r,n){return this._getTracer().startSpan(e,r,n)},t.prototype.startActiveSpan=function(e,r,n,o){var i=this._getTracer();return Reflect.apply(i.startActiveSpan,i,arguments)},t.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):Pc},t})();var li=(function(){function t(){}return t.prototype.getTracer=function(e,r,n){return new xr},t})();var xc=new li,wn=(function(){function t(){}return t.prototype.getTracer=function(e,r,n){var o;return(o=this.getDelegateTracer(e,r,n))!==null&&o!==void 0?o:new ui(this,e,r,n)},t.prototype.getDelegate=function(){var e;return(e=this._delegate)!==null&&e!==void 0?e:xc},t.prototype.setDelegate=function(e){this._delegate=e},t.prototype.getDelegateTracer=function(e,r,n){var o;return(o=this._delegate)===null||o===void 0?void 0:o.getTracer(e,r,n)},t})();var Re;(function(t){t[t.NOT_RECORD=0]="NOT_RECORD",t[t.RECORD=1]="RECORD",t[t.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(Re||(Re={}));var zt;(function(t){t[t.INTERNAL=0]="INTERNAL",t[t.SERVER=1]="SERVER",t[t.CLIENT=2]="CLIENT",t[t.PRODUCER=3]="PRODUCER",t[t.CONSUMER=4]="CONSUMER"})(zt||(zt={}));var Tt;(function(t){t[t.UNSET=0]="UNSET",t[t.OK=1]="OK",t[t.ERROR=2]="ERROR"})(Tt||(Tt={}));var G=Jt.getInstance();var b=ut.instance();var Lc=(function(){function t(){}return t.prototype.getMeter=function(e,r,n){return ti},t})();var pi=new Lc;var In="metrics",fi=(function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalMeterProvider=function(e){return It(In,e,ut.instance())},t.prototype.getMeterProvider=function(){return mt(In)||pi},t.prototype.getMeter=function(e,r,n){return this.getMeterProvider().getMeter(e,r,n)},t.prototype.disable=function(){Dt(In,ut.instance())},t})();var Ge=fi.getInstance();var _i=(function(){function t(){}return t.prototype.inject=function(e,r){},t.prototype.extract=function(e,r){return e},t.prototype.fields=function(){return[]},t})();var Dn=ae("OpenTelemetry Baggage Key");function Mn(t){return t.getValue(Dn)||void 0}function hi(){return Mn(Jt.getInstance().active())}function di(t,e){return t.setValue(Dn,e)}function mi(t){return t.deleteValue(Dn)}var kn="propagation",Cc=new _i,Ti=(function(){function t(){this.createBaggage=Jo,this.getBaggage=Mn,this.getActiveBaggage=hi,this.setBaggage=di,this.deleteBaggage=mi}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalPropagator=function(e){return It(kn,e,ut.instance())},t.prototype.inject=function(e,r,n){return n===void 0&&(n=ri),this._getGlobalPropagator().inject(e,r,n)},t.prototype.extract=function(e,r,n){return n===void 0&&(n=ei),this._getGlobalPropagator().extract(e,r,n)},t.prototype.fields=function(){return this._getGlobalPropagator().fields()},t.prototype.disable=function(){Dt(kn,ut.instance())},t.prototype._getGlobalPropagator=function(){return mt(kn)||Cc},t})();var st=Ti.getInstance();var Un="trace",Ei=(function(){function t(){this._proxyTracerProvider=new wn,this.wrapSpanContext=ci,this.isSpanContextValid=jt,this.deleteSpan=ii,this.getSpan=br,this.getActiveSpan=oi,this.getSpanContext=Nr,this.setSpan=He,this.setSpanContext=si}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalTracerProvider=function(e){var r=It(Un,this._proxyTracerProvider,ut.instance());return r&&this._proxyTracerProvider.setDelegate(e),r},t.prototype.getTracerProvider=function(){return mt(Un)||this._proxyTracerProvider},t.prototype.getTracer=function(e,r){return this.getTracerProvider().getTracer(e,r)},t.prototype.disable=function(){Dt(Un,ut.instance()),this._proxyTracerProvider=new wn},t})();var Z=Ei.getInstance();var gi=ae("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function Hn(t){return t.setValue(gi,!0)}function ue(t){return t.getValue(gi)===!0}var Cr="baggage";function Si(t){return t.reduce((e,r)=>{let n=`${e}${e!==""?",":""}${r}`;return n.length>8192?e:n},"")}function Ai(t){return t.getAllEntries().map(([e,r])=>{let n=`${encodeURIComponent(e)}=${encodeURIComponent(r.value)}`;return r.metadata!==void 0&&(n+=";"+r.metadata.toString()),n})}function Ri(t){if(!t)return;let e=t.indexOf(";"),r=e===-1?t:t.substring(0,e),n=r.indexOf("=");if(n<=0)return;let o=r.substring(0,n).trim(),i=r.substring(n+1).trim();if(!o||!i)return;let s,a;try{s=decodeURIComponent(o),a=decodeURIComponent(i)}catch(u){return}let c;if(e!==-1&&e<t.length-1){let u=t.substring(e+1);c=Nn(u)}return{key:s,value:a,metadata:c}}var Be=class{inject(e,r,n){let o=st.getBaggage(e);if(!o||ue(e))return;let i=Ai(o).filter(a=>a.length<=4096).slice(0,180),s=Si(i);s.length>0&&n.set(r,Cr,s)}extract(e,r,n){let o=n.get(r,Cr),i=Array.isArray(o)?o.join(","):o;if(!i)return e;let s={};return i.length===0||(i.split(",").forEach(c=>{let u=Ri(c);if(u){let l={value:u.value};u.metadata&&(l.metadata=u.metadata),s[u.key]=l}}),Object.entries(s).length===0)?e:st.setBaggage(e,st.createBaggage(s))}fields(){return[Cr]}};function le(t){let e={};if(typeof t!="object"||t==null)return e;for(let r in t){if(!Object.prototype.hasOwnProperty.call(t,r))continue;if(!Mc(r)){b.warn(`Invalid attribute key: ${r}`);continue}let n=t[r];if(!wr(n)){b.warn(`Invalid attribute value set for key: ${r}`);continue}Array.isArray(n)?e[r]=n.slice():e[r]=n}return e}function Mc(t){return typeof t=="string"&&t!==""}function wr(t){return t==null?!0:Array.isArray(t)?kc(t):yi(typeof t)}function kc(t){let e;for(let r of t){if(r==null)continue;let n=typeof r;if(n!==e){if(!e){if(yi(n)){e=n;continue}return!1}return!1}}return!0}function yi(t){switch(t){case"number":case"boolean":case"string":return!0}return!1}function vi(){return t=>{b.error(Uc(t))}}function Uc(t){return typeof t=="string"?t:JSON.stringify(Hc(t))}function Hc(t){let e={},r=t;for(;r!==null;)Object.getOwnPropertyNames(r).forEach(n=>{if(e[n])return;let o=r[n];o&&(e[n]=String(o))}),r=Object.getPrototypeOf(r);return e}var Gc=vi();function xt(t){try{Gc(t)}catch(e){}}var Oi="2.5.1";var Ve="error.type";var Ir="exception.message",bi="exception.stacktrace",Dr="exception.type";var Mr="http.request.method";var kr="http.request.method_original";var Ur="http.response.status_code";var Hr="server.address",Gr="server.port",Br="service.name";var Fe="telemetry.sdk.language";var Ni="webjs",je="telemetry.sdk.name",ze="telemetry.sdk.version";var ee="url.full";var Pi="user_agent.original";var xi="process.runtime.name";var ye={[je]:"opentelemetry",[xi]:"browser",[Fe]:Ni,[ze]:Oi};var at=performance;var Bc=9,Vc=6,Fc=Math.pow(10,Vc),Vr=Math.pow(10,Bc);function gt(t){let e=t/1e3,r=Math.trunc(e),n=Math.round(t%1e3*Fc);return[r,n]}function St(t){let e=gt(at.timeOrigin),r=gt(typeof t=="number"?t:at.now());return jr(e,r)}function pe(t){if(Ze(t))return t;if(typeof t=="number")return t<at.timeOrigin?St(t):gt(t);if(t instanceof Date)return gt(t.getTime());throw TypeError("Invalid input type")}function Bn(t,e){let r=e[0]-t[0],n=e[1]-t[1];return n<0&&(r-=1,n+=Vr),[r,n]}function At(t){return t[0]*Vr+t[1]}function Ze(t){return Array.isArray(t)&&t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number"}function Fr(t){return Ze(t)||typeof t=="number"||t instanceof Date}function jr(t,e){let r=[t[0]+e[0],t[1]+e[1]];return r[1]>=Vr&&(r[1]-=Vr,r[0]+=1),r}var Et;(function(t){t[t.SUCCESS=0]="SUCCESS",t[t.FAILED=1]="FAILED"})(Et||(Et={}));var fe=class{constructor(e={}){p(this,"_propagators");p(this,"_fields");var r;this._propagators=(r=e.propagators)!=null?r:[],this._fields=Array.from(new Set(this._propagators.map(n=>typeof n.fields=="function"?n.fields():[]).reduce((n,o)=>n.concat(o),[])))}inject(e,r,n){for(let o of this._propagators)try{o.inject(e,r,n)}catch(i){b.warn(`Failed to inject with ${o.constructor.name}. Err: ${i.message}`)}}extract(e,r,n){return this._propagators.reduce((o,i)=>{try{return i.extract(o,r,n)}catch(s){b.warn(`Failed to extract with ${i.constructor.name}. Err: ${s.message}`)}return o},e)}fields(){return this._fields.slice()}};var Vn="[_0-9a-z-*/]",jc=`[a-z]${Vn}{0,255}`,zc=`[a-z0-9]${Vn}{0,240}@[a-z]${Vn}{0,13}`,Zc=new RegExp(`^(?:${jc}|${zc})$`),Kc=/^[ -~]{0,255}[!-~]$/,Wc=/,|=/;function Li(t){return Zc.test(t)}function Ci(t){return Kc.test(t)&&!Wc.test(t)}var wi=32,$c=512,Ii=",",Di="=",zr=class t{constructor(e){p(this,"_internalState",new Map);e&&this._parse(e)}set(e,r){let n=this._clone();return n._internalState.has(e)&&n._internalState.delete(e),n._internalState.set(e,r),n}unset(e){let r=this._clone();return r._internalState.delete(e),r}get(e){return this._internalState.get(e)}serialize(){return this._keys().reduce((e,r)=>(e.push(r+Di+this.get(r)),e),[]).join(Ii)}_parse(e){e.length>$c||(this._internalState=e.split(Ii).reverse().reduce((r,n)=>{let o=n.trim(),i=o.indexOf(Di);if(i!==-1){let s=o.slice(0,i),a=o.slice(i+1,n.length);Li(s)&&Ci(a)&&r.set(s,a)}return r},new Map),this._internalState.size>wi&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,wi))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let e=new t;return e._internalState=new Map(this._internalState),e}};var ve="traceparent",Zr="tracestate",Xc="00",Yc="(?!ff)[\\da-f]{2}",qc="(?![0]{32})[\\da-f]{32}",Qc="(?![0]{16})[\\da-f]{16}",Jc="[\\da-f]{2}",tu=new RegExp(`^\\s?(${Yc})-(${qc})-(${Qc})-(${Jc})(-.*)?\\s?$`);function Mi(t){let e=tu.exec(t);return!e||e[1]==="00"&&e[5]?null:{traceId:e[2],spanId:e[3],traceFlags:parseInt(e[4],16)}}var _e=class{inject(e,r,n){let o=Z.getSpanContext(e);if(!o||ue(e)||!jt(o))return;let i=`${Xc}-${o.traceId}-${o.spanId}-0${Number(o.traceFlags||_t.NONE).toString(16)}`;n.set(r,ve,i),o.traceState&&n.set(r,Zr,o.traceState.serialize())}extract(e,r,n){let o=n.get(r,ve);if(!o)return e;let i=Array.isArray(o)?o[0]:o;if(typeof i!="string")return e;let s=Mi(i);if(!s)return e;s.isRemote=!0;let a=n.get(r,Zr);if(a){let c=Array.isArray(a)?a.join(","):a;s.traceState=new zr(typeof c=="string"?c:void 0)}return Z.setSpanContext(e,s)}fields(){return[ve,Zr]}};var eu="[object Object]",ru="[object Null]",nu="[object Undefined]",ou=Function.prototype,ki=ou.toString,iu=ki.call(Object),su=Object.getPrototypeOf,Ui=Object.prototype,Hi=Ui.hasOwnProperty,he=Symbol?Symbol.toStringTag:void 0,Gi=Ui.toString;function Fn(t){if(!au(t)||cu(t)!==eu)return!1;let e=su(t);if(e===null)return!0;let r=Hi.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&ki.call(r)===iu}function au(t){return t!=null&&typeof t=="object"}function cu(t){return t==null?t===void 0?nu:ru:he&&he in Object(t)?uu(t):lu(t)}function uu(t){let e=Hi.call(t,he),r=t[he],n=!1;try{t[he]=void 0,n=!0}catch(i){}let o=Gi.call(t);return n&&(e?t[he]=r:delete t[he]),o}function lu(t){return Gi.call(t)}var pu=20;function zn(...t){let e=t.shift(),r=new WeakMap;for(;t.length>0;)e=Vi(e,t.shift(),0,r);return e}function jn(t){return Wr(t)?t.slice():t}function Vi(t,e,r=0,n){let o;if(!(r>pu)){if(r++,Kr(t)||Kr(e)||Fi(e))o=jn(e);else if(Wr(t)){if(o=t.slice(),Wr(e))for(let i=0,s=e.length;i<s;i++)o.push(jn(e[i]));else if(Ke(e)){let i=Object.keys(e);for(let s=0,a=i.length;s<a;s++){let c=i[s];o[c]=jn(e[c])}}}else if(Ke(t))if(Ke(e)){if(!fu(t,e))return e;o=Object.assign({},t);let i=Object.keys(e);for(let s=0,a=i.length;s<a;s++){let c=i[s],u=e[c];if(Kr(u))typeof u=="undefined"?delete o[c]:o[c]=u;else{let l=o[c],m=u;if(Bi(t,c,n)||Bi(e,c,n))delete o[c];else{if(Ke(l)&&Ke(m)){let S=n.get(l)||[],y=n.get(m)||[];S.push({obj:t,key:c}),y.push({obj:e,key:c}),n.set(l,S),n.set(m,y)}o[c]=Vi(o[c],u,r,n)}}}}else o=e;return o}}function Bi(t,e,r){let n=r.get(t[e])||[];for(let o=0,i=n.length;o<i;o++){let s=n[o];if(s.key===e&&s.obj===t)return!0}return!1}function Wr(t){return Array.isArray(t)}function Fi(t){return typeof t=="function"}function Ke(t){return!Kr(t)&&!Wr(t)&&!Fi(t)&&typeof t=="object"}function Kr(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="undefined"||t instanceof Date||t instanceof RegExp||t===null}function fu(t,e){return!(!Fn(t)||!Fn(e))}function $r(t,e){return typeof e=="string"?t===e:!!t.match(e)}function We(t,e){if(!e)return!1;for(let r of e)if($r(t,r))return!0;return!1}var Xr=class{constructor(){p(this,"_promise");p(this,"_resolve");p(this,"_reject");this._promise=new Promise((e,r)=>{this._resolve=e,this._reject=r})}get promise(){return this._promise}resolve(e){this._resolve(e)}reject(e){this._reject(e)}};var $e=class{constructor(e,r){p(this,"_isCalled",!1);p(this,"_deferred",new Xr);p(this,"_callback");p(this,"_that");this._callback=e,this._that=r}get isCalled(){return this._isCalled}get promise(){return this._deferred.promise}call(...e){if(!this._isCalled){this._isCalled=!0;try{Promise.resolve(this._callback.call(this._that,...e)).then(r=>this._deferred.resolve(r),r=>this._deferred.reject(r))}catch(r){this._deferred.reject(r)}}return this._deferred.promise}};var Yr;function ji(){if(Yr===void 0)try{let t=globalThis.process.argv0;Yr=t?`unknown_service:${t}`:"unknown_service"}catch(t){Yr="unknown_service"}return Yr}var Oe=t=>t!==null&&typeof t=="object"&&typeof t.then=="function";var qr=class t{constructor(e,r){p(this,"_rawAttributes");p(this,"_asyncAttributesPending",!1);p(this,"_schemaUrl");p(this,"_memoizedAttributes");var o;let n=(o=e.attributes)!=null?o:{};this._rawAttributes=Object.entries(n).map(([i,s])=>(Oe(s)&&(this._asyncAttributesPending=!0),[i,s])),this._rawAttributes=zi(this._rawAttributes),this._schemaUrl=du(r==null?void 0:r.schemaUrl)}static FromAttributeList(e,r){let n=new t({},r);return n._rawAttributes=zi(e),n._asyncAttributesPending=e.filter(([o,i])=>Oe(i)).length>0,n}get asyncAttributesPending(){return this._asyncAttributesPending}async waitForAsyncAttributes(){if(this.asyncAttributesPending){for(let e=0;e<this._rawAttributes.length;e++){let[r,n]=this._rawAttributes[e];this._rawAttributes[e]=[r,Oe(n)?await n:n]}this._asyncAttributesPending=!1}}get attributes(){var r;if(this.asyncAttributesPending&&b.error("Accessing resource attributes before async attributes settled"),this._memoizedAttributes)return this._memoizedAttributes;let e={};for(let[n,o]of this._rawAttributes){if(Oe(o)){b.debug(`Unsettled resource attribute ${n} skipped`);continue}o!=null&&((r=e[n])!=null||(e[n]=o))}return this._asyncAttributesPending||(this._memoizedAttributes=e),e}getRawAttributes(){return this._rawAttributes}get schemaUrl(){return this._schemaUrl}merge(e){if(e==null)return this;let r=mu(this,e),n=r?{schemaUrl:r}:void 0;return t.FromAttributeList([...e.getRawAttributes(),...this.getRawAttributes()],n)}};function Xe(t,e){return qr.FromAttributeList(Object.entries(t),e)}function Zi(t,e){return new qr(t,e)}function de(){return Xe({})}function Zn(){return Xe({[Br]:ji(),[Fe]:ye[Fe],[je]:ye[je],[ze]:ye[ze]})}function zi(t){return t.map(([e,r])=>Oe(r)?[e,r.catch(n=>{b.debug("promise rejection for resource attribute: %s - %s",e,n)})]:[e,r])}function du(t){if(typeof t=="string"||t===void 0)return t;b.warn("Schema URL must be string or undefined, got %s. Schema URL will be ignored.",t)}function mu(t,e){let r=t==null?void 0:t.schemaUrl,n=e==null?void 0:e.schemaUrl,o=r===void 0||r==="",i=n===void 0||n==="";if(o)return n;if(i||r===n)return r;b.warn('Schema URL merge conflict: old resource has "%s", updating resource has "%s". Resulting resource will have undefined Schema URL.',r,n)}var Kn=(t={})=>(t.detectors||[]).map(r=>{try{let n=Zi(r.detect(t));return b.debug(`${r.constructor.name} found resource.`,n),n}catch(n){return b.debug(`${r.constructor.name} failed: ${n.message}`),de()}}).reduce((r,n)=>r.merge(n),de());var Ki="exception";var Qr=class{constructor(e){p(this,"_spanContext");p(this,"kind");p(this,"parentSpanContext");p(this,"attributes",{});p(this,"links",[]);p(this,"events",[]);p(this,"startTime");p(this,"resource");p(this,"instrumentationScope");p(this,"_droppedAttributesCount",0);p(this,"_droppedEventsCount",0);p(this,"_droppedLinksCount",0);p(this,"_attributesCount",0);p(this,"name");p(this,"status",{code:Tt.UNSET});p(this,"endTime",[0,0]);p(this,"_ended",!1);p(this,"_duration",[-1,-1]);p(this,"_spanProcessor");p(this,"_spanLimits");p(this,"_attributeValueLengthLimit");p(this,"_performanceStartTime");p(this,"_performanceOffset");p(this,"_startTimeProvided");var n;let r=Date.now();this._spanContext=e.spanContext,this._performanceStartTime=at.now(),this._performanceOffset=r-(this._performanceStartTime+at.timeOrigin),this._startTimeProvided=e.startTime!=null,this._spanLimits=e.spanLimits,this._attributeValueLengthLimit=this._spanLimits.attributeValueLengthLimit||0,this._spanProcessor=e.spanProcessor,this.name=e.name,this.parentSpanContext=e.parentSpanContext,this.kind=e.kind,this.links=e.links||[],this.startTime=this._getTime((n=e.startTime)!=null?n:r),this.resource=e.resource,this.instrumentationScope=e.scope,e.attributes!=null&&this.setAttributes(e.attributes),this._spanProcessor.onStart(this,e.context)}spanContext(){return this._spanContext}setAttribute(e,r){if(r==null||this._isSpanEnded())return this;if(e.length===0)return b.warn(`Invalid attribute key: ${e}`),this;if(!wr(r))return b.warn(`Invalid attribute value set for key: ${e}`),this;let{attributeCountLimit:n}=this._spanLimits,o=!Object.prototype.hasOwnProperty.call(this.attributes,e);return n!==void 0&&this._attributesCount>=n&&o?(this._droppedAttributesCount++,this):(this.attributes[e]=this._truncateToSize(r),o&&this._attributesCount++,this)}setAttributes(e){for(let[r,n]of Object.entries(e))this.setAttribute(r,n);return this}addEvent(e,r,n){if(this._isSpanEnded())return this;let{eventCountLimit:o}=this._spanLimits;if(o===0)return b.warn("No events allowed."),this._droppedEventsCount++,this;o!==void 0&&this.events.length>=o&&(this._droppedEventsCount===0&&b.debug("Dropping extra events."),this.events.shift(),this._droppedEventsCount++),Fr(r)&&(Fr(n)||(n=r),r=void 0);let i=le(r);return this.events.push({name:e,attributes:i,time:this._getTime(n),droppedAttributesCount:0}),this}addLink(e){return this.links.push(e),this}addLinks(e){return this.links.push(...e),this}setStatus(e){return this._isSpanEnded()?this:(this.status={...e},this.status.message!=null&&typeof e.message!="string"&&(b.warn(`Dropping invalid status.message of type '${typeof e.message}', expected 'string'`),delete this.status.message),this)}updateName(e){return this._isSpanEnded()?this:(this.name=e,this)}end(e){if(this._isSpanEnded()){b.error(`${this.name} ${this._spanContext.traceId}-${this._spanContext.spanId} - You can only call end() on a span once.`);return}this.endTime=this._getTime(e),this._duration=Bn(this.startTime,this.endTime),this._duration[0]<0&&(b.warn("Inconsistent start and end time, startTime > endTime. Setting span duration to 0ms.",this.startTime,this.endTime),this.endTime=this.startTime.slice(),this._duration=[0,0]),this._droppedEventsCount>0&&b.warn(`Dropped ${this._droppedEventsCount} events because eventCountLimit reached`),this._spanProcessor.onEnding&&this._spanProcessor.onEnding(this),this._ended=!0,this._spanProcessor.onEnd(this)}_getTime(e){if(typeof e=="number"&&e<=at.now())return St(e+this._performanceOffset);if(typeof e=="number")return gt(e);if(e instanceof Date)return gt(e.getTime());if(Ze(e))return e;if(this._startTimeProvided)return gt(Date.now());let r=at.now()-this._performanceStartTime;return jr(this.startTime,gt(r))}isRecording(){return this._ended===!1}recordException(e,r){let n={};typeof e=="string"?n[Ir]=e:e&&(e.code?n[Dr]=e.code.toString():e.name&&(n[Dr]=e.name),e.message&&(n[Ir]=e.message),e.stack&&(n[bi]=e.stack)),n[Dr]||n[Ir]?this.addEvent(Ki,n,r):b.warn(`Failed to record an exception ${e}`)}get duration(){return this._duration}get ended(){return this._ended}get droppedAttributesCount(){return this._droppedAttributesCount}get droppedEventsCount(){return this._droppedEventsCount}get droppedLinksCount(){return this._droppedLinksCount}_isSpanEnded(){if(this._ended){let e=new Error(`Operation attempted on ended Span {traceId: ${this._spanContext.traceId}, spanId: ${this._spanContext.spanId}}`);b.warn(`Cannot execute the operation on ended Span {traceId: ${this._spanContext.traceId}, spanId: ${this._spanContext.spanId}}`,e)}return this._ended}_truncateToLimitUtil(e,r){return e.length<=r?e:e.substring(0,r)}_truncateToSize(e){let r=this._attributeValueLengthLimit;return r<=0?(b.warn(`Attribute value limit must be positive, got ${r}`),e):typeof e=="string"?this._truncateToLimitUtil(e,r):Array.isArray(e)?e.map(n=>typeof n=="string"?this._truncateToLimitUtil(n,r):n):e}};var Zt;(function(t){t[t.NOT_RECORD=0]="NOT_RECORD",t[t.RECORD=1]="RECORD",t[t.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(Zt||(Zt={}));var re=class{shouldSample(){return{decision:Zt.NOT_RECORD}}toString(){return"AlwaysOffSampler"}};var Mt=class{shouldSample(){return{decision:Zt.RECORD_AND_SAMPLED}}toString(){return"AlwaysOnSampler"}};var me=class{constructor(e){p(this,"_root");p(this,"_remoteParentSampled");p(this,"_remoteParentNotSampled");p(this,"_localParentSampled");p(this,"_localParentNotSampled");var r,n,o,i;this._root=e.root,this._root||(xt(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new Mt),this._remoteParentSampled=(r=e.remoteParentSampled)!=null?r:new Mt,this._remoteParentNotSampled=(n=e.remoteParentNotSampled)!=null?n:new re,this._localParentSampled=(o=e.localParentSampled)!=null?o:new Mt,this._localParentNotSampled=(i=e.localParentNotSampled)!=null?i:new re}shouldSample(e,r,n,o,i,s){let a=Z.getSpanContext(e);return!a||!jt(a)?this._root.shouldSample(e,r,n,o,i,s):a.isRemote?a.traceFlags&_t.SAMPLED?this._remoteParentSampled.shouldSample(e,r,n,o,i,s):this._remoteParentNotSampled.shouldSample(e,r,n,o,i,s):a.traceFlags&_t.SAMPLED?this._localParentSampled.shouldSample(e,r,n,o,i,s):this._localParentNotSampled.shouldSample(e,r,n,o,i,s)}toString(){return`ParentBased{root=${this._root.toString()}, remoteParentSampled=${this._remoteParentSampled.toString()}, remoteParentNotSampled=${this._remoteParentNotSampled.toString()}, localParentSampled=${this._localParentSampled.toString()}, localParentNotSampled=${this._localParentNotSampled.toString()}}`}};var Ye=class{constructor(e=0){p(this,"_ratio");p(this,"_upperBound");this._ratio=this._normalize(e),this._upperBound=Math.floor(this._ratio*4294967295)}shouldSample(e,r){return{decision:Pr(r)&&this._accumulate(r)<this._upperBound?Zt.RECORD_AND_SAMPLED:Zt.NOT_RECORD}}toString(){return`TraceIdRatioBased{${this._ratio}}`}_normalize(e){return typeof e!="number"||isNaN(e)?0:e>=1?1:e<=0?0:e}_accumulate(e){let r=0;for(let n=0;n<e.length/8;n++){let o=n*8,i=parseInt(e.slice(o,o+8),16);r=(r^i)>>>0}return r}};var kt;(function(t){t.AlwaysOff="always_off",t.AlwaysOn="always_on",t.ParentBasedAlwaysOff="parentbased_always_off",t.ParentBasedAlwaysOn="parentbased_always_on",t.ParentBasedTraceIdRatio="parentbased_traceidratio",t.TraceIdRatio="traceidratio"})(kt||(kt={}));var Jr=1;function tn(){var t,e,r,n,o,i,s,a;return{sampler:Wn(),forceFlushTimeoutMillis:3e4,generalLimits:{attributeValueLengthLimit:(t=void 0)!=null?t:1/0,attributeCountLimit:(e=void 0)!=null?e:128},spanLimits:{attributeValueLengthLimit:(r=void 0)!=null?r:1/0,attributeCountLimit:(n=void 0)!=null?n:128,linkCountLimit:(o=void 0)!=null?o:128,eventCountLimit:(i=void 0)!=null?i:128,attributePerEventCountLimit:(s=void 0)!=null?s:128,attributePerLinkCountLimit:(a=void 0)!=null?a:128}}}function Wn(){var e;let t=(e=void 0)!=null?e:kt.ParentBasedAlwaysOn;switch(t){case kt.AlwaysOn:return new Mt;case kt.AlwaysOff:return new re;case kt.ParentBasedAlwaysOn:return new me({root:new Mt});case kt.ParentBasedAlwaysOff:return new me({root:new re});case kt.TraceIdRatio:return new Ye(Wi());case kt.ParentBasedTraceIdRatio:return new me({root:new Ye(Wi())});default:return b.error(`OTEL_TRACES_SAMPLER value "${t}" invalid, defaulting to "${kt.ParentBasedAlwaysOn}".`),new me({root:new Mt})}}function Wi(){let t=void 0;return t==null?(b.error(`OTEL_TRACES_SAMPLER_ARG is blank, defaulting to ${Jr}.`),Jr):t<0||t>1?(b.error(`OTEL_TRACES_SAMPLER_ARG=${t} was given, but it is out of range ([0..1]), defaulting to ${Jr}.`),Jr):t}var Tu=128,Eu=1/0;function $i(t){let e={sampler:Wn()},r=tn(),n=Object.assign({},r,e,t);return n.generalLimits=Object.assign({},r.generalLimits,t.generalLimits||{}),n.spanLimits=Object.assign({},r.spanLimits,t.spanLimits||{}),n}function Xi(t){var r,n,o,i,s,a,c,u,l,m,S,y;let e=Object.assign({},t.spanLimits);return e.attributeCountLimit=(a=(s=(i=(o=(r=t.spanLimits)==null?void 0:r.attributeCountLimit)!=null?o:(n=t.generalLimits)==null?void 0:n.attributeCountLimit)!=null?i:void 0)!=null?s:void 0)!=null?a:Tu,e.attributeValueLengthLimit=(y=(S=(m=(l=(c=t.spanLimits)==null?void 0:c.attributeValueLengthLimit)!=null?l:(u=t.generalLimits)==null?void 0:u.attributeValueLengthLimit)!=null?m:void 0)!=null?S:void 0)!=null?y:Eu,Object.assign({},t,{spanLimits:e})}var en=class{constructor(e,r){p(this,"_maxExportBatchSize");p(this,"_maxQueueSize");p(this,"_scheduledDelayMillis");p(this,"_exportTimeoutMillis");p(this,"_exporter");p(this,"_isExporting",!1);p(this,"_finishedSpans",[]);p(this,"_timer");p(this,"_shutdownOnce");p(this,"_droppedSpansCount",0);var n,o,i,s;this._exporter=e,this._maxExportBatchSize=typeof(r==null?void 0:r.maxExportBatchSize)=="number"?r.maxExportBatchSize:(n=void 0)!=null?n:512,this._maxQueueSize=typeof(r==null?void 0:r.maxQueueSize)=="number"?r.maxQueueSize:(o=void 0)!=null?o:2048,this._scheduledDelayMillis=typeof(r==null?void 0:r.scheduledDelayMillis)=="number"?r.scheduledDelayMillis:(i=void 0)!=null?i:5e3,this._exportTimeoutMillis=typeof(r==null?void 0:r.exportTimeoutMillis)=="number"?r.exportTimeoutMillis:(s=void 0)!=null?s:3e4,this._shutdownOnce=new $e(this._shutdown,this),this._maxExportBatchSize>this._maxQueueSize&&(b.warn("BatchSpanProcessor: maxExportBatchSize must be smaller or equal to maxQueueSize, setting maxExportBatchSize to match maxQueueSize"),this._maxExportBatchSize=this._maxQueueSize)}forceFlush(){return this._shutdownOnce.isCalled?this._shutdownOnce.promise:this._flushAll()}onStart(e,r){}onEnd(e){this._shutdownOnce.isCalled||(e.spanContext().traceFlags&_t.SAMPLED)!==0&&this._addToBuffer(e)}shutdown(){return this._shutdownOnce.call()}_shutdown(){return Promise.resolve().then(()=>this.onShutdown()).then(()=>this._flushAll()).then(()=>this._exporter.shutdown())}_addToBuffer(e){if(this._finishedSpans.length>=this._maxQueueSize){this._droppedSpansCount===0&&b.debug("maxQueueSize reached, dropping spans"),this._droppedSpansCount++;return}this._droppedSpansCount>0&&(b.warn(`Dropped ${this._droppedSpansCount} spans because maxQueueSize reached`),this._droppedSpansCount=0),this._finishedSpans.push(e),this._maybeStartTimer()}_flushAll(){return new Promise((e,r)=>{let n=[],o=Math.ceil(this._finishedSpans.length/this._maxExportBatchSize);for(let i=0,s=o;i<s;i++)n.push(this._flushOneBatch());Promise.all(n).then(()=>{e()}).catch(r)})}_flushOneBatch(){return this._clearTimer(),this._finishedSpans.length===0?Promise.resolve():new Promise((e,r)=>{let n=setTimeout(()=>{r(new Error("Timeout"))},this._exportTimeoutMillis);G.with(Hn(G.active()),()=>{let o;this._finishedSpans.length<=this._maxExportBatchSize?(o=this._finishedSpans,this._finishedSpans=[]):o=this._finishedSpans.splice(0,this._maxExportBatchSize);let i=()=>this._exporter.export(o,a=>{var c;clearTimeout(n),a.code===Et.SUCCESS?e():r((c=a.error)!=null?c:new Error("BatchSpanProcessor: span export failed"))}),s=null;for(let a=0,c=o.length;a<c;a++){let u=o[a];u.resource.asyncAttributesPending&&u.resource.waitForAsyncAttributes&&(s!=null||(s=[]),s.push(u.resource.waitForAsyncAttributes()))}s===null?i():Promise.all(s).then(i,a=>{xt(a),r(a)})})})}_maybeStartTimer(){if(this._isExporting)return;let e=()=>{this._isExporting=!0,this._flushOneBatch().finally(()=>{this._isExporting=!1,this._finishedSpans.length>0&&(this._clearTimer(),this._maybeStartTimer())}).catch(r=>{this._isExporting=!1,xt(r)})};if(this._finishedSpans.length>=this._maxExportBatchSize)return e();this._timer===void 0&&(this._timer=setTimeout(()=>e(),this._scheduledDelayMillis),typeof this._timer!="number"&&this._timer.unref())}_clearTimer(){this._timer!==void 0&&(clearTimeout(this._timer),this._timer=void 0)}};var be=class extends en{constructor(r,n){super(r,n);p(this,"_visibilityChangeListener");p(this,"_pageHideListener");this.onInit(n)}onInit(r){(r==null?void 0:r.disableAutoFlushOnDocumentHide)!==!0&&typeof document!="undefined"&&(this._visibilityChangeListener=()=>{document.visibilityState==="hidden"&&this.forceFlush().catch(n=>{xt(n)})},this._pageHideListener=()=>{this.forceFlush().catch(n=>{xt(n)})},document.addEventListener("visibilitychange",this._visibilityChangeListener),document.addEventListener("pagehide",this._pageHideListener))}onShutdown(){typeof document!="undefined"&&(this._visibilityChangeListener&&document.removeEventListener("visibilitychange",this._visibilityChangeListener),this._pageHideListener&&document.removeEventListener("pagehide",this._pageHideListener))}};var Yi=new Uint8Array(16),qi=new Uint8Array(8),gu=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Qi(t){for(let e=0;e<t.length;e++)t[e]=Math.random()*256>>>0;for(let e=0;e<t.length;e++)if(t[e]>0)return;t[t.length-1]=1}function Ji(t){let e="";for(let r=0;r<t.length;r++)e+=gu[t[r]];return e}var Ne=class{generateTraceId(){return Qi(Yi),Ji(Yi)}generateSpanId(){return Qi(qi),Ji(qi)}};var rn=class{constructor(e,r,n,o){p(this,"_sampler");p(this,"_generalLimits");p(this,"_spanLimits");p(this,"_idGenerator");p(this,"instrumentationScope");p(this,"_resource");p(this,"_spanProcessor");let i=$i(r);this._sampler=i.sampler,this._generalLimits=i.generalLimits,this._spanLimits=i.spanLimits,this._idGenerator=r.idGenerator||new Ne,this._resource=n,this._spanProcessor=o,this.instrumentationScope=e}startSpan(e,r={},n=G.active()){var E,T,O;r.root&&(n=Z.deleteSpan(n));let o=Z.getSpan(n);if(ue(n))return b.debug("Instrumentation suppressed, returning Noop Span"),Z.wrapSpanContext(Ue);let i=o==null?void 0:o.spanContext(),s=this._idGenerator.generateSpanId(),a,c,u;!i||!Z.isSpanContextValid(i)?c=this._idGenerator.generateTraceId():(c=i.traceId,u=i.traceState,a=i);let l=(E=r.kind)!=null?E:zt.INTERNAL,m=((T=r.links)!=null?T:[]).map(v=>({context:v.context,attributes:le(v.attributes)})),S=le(r.attributes),y=this._sampler.shouldSample(n,c,e,l,S,m);u=(O=y.traceState)!=null?O:u;let M=y.decision===Re.RECORD_AND_SAMPLED?_t.SAMPLED:_t.NONE,U={traceId:c,spanId:s,traceFlags:M,traceState:u};if(y.decision===Re.NOT_RECORD)return b.debug("Recording is off, propagating context in a non-recording span"),Z.wrapSpanContext(U);let J=le(Object.assign(S,y.attributes));return new Qr({resource:this._resource,scope:this.instrumentationScope,context:n,spanContext:U,name:e,kind:l,links:m,parentSpanContext:a,attributes:J,startTime:r.startTime,spanProcessor:this._spanProcessor,spanLimits:this._spanLimits})}startActiveSpan(e,r,n,o){let i,s,a;if(arguments.length<2)return;arguments.length===2?a=r:arguments.length===3?(i=r,a=n):(i=r,s=n,a=o);let c=s!=null?s:G.active(),u=this.startSpan(e,i,c),l=Z.setSpan(c,u);return G.with(l,a,void 0,u)}getGeneralLimits(){return this._generalLimits}getSpanLimits(){return this._spanLimits}};var nn=class{constructor(e){p(this,"_spanProcessors");this._spanProcessors=e}forceFlush(){let e=[];for(let r of this._spanProcessors)e.push(r.forceFlush());return new Promise(r=>{Promise.all(e).then(()=>{r()}).catch(n=>{xt(n||new Error("MultiSpanProcessor: forceFlush failed")),r()})})}onStart(e,r){for(let n of this._spanProcessors)n.onStart(e,r)}onEnding(e){for(let r of this._spanProcessors)r.onEnding&&r.onEnding(e)}onEnd(e){for(let r of this._spanProcessors)r.onEnd(e)}shutdown(){let e=[];for(let r of this._spanProcessors)e.push(r.shutdown());return new Promise((r,n)=>{Promise.all(e).then(()=>{r()},n)})}};var Te;(function(t){t[t.resolved=0]="resolved",t[t.timeout=1]="timeout",t[t.error=2]="error",t[t.unresolved=3]="unresolved"})(Te||(Te={}));var qe=class{constructor(e={}){p(this,"_config");p(this,"_tracers",new Map);p(this,"_resource");p(this,"_activeSpanProcessor");var o,i;let r=zn({},tn(),Xi(e));this._resource=(o=r.resource)!=null?o:Zn(),this._config=Object.assign({},r,{resource:this._resource});let n=[];(i=e.spanProcessors)!=null&&i.length&&n.push(...e.spanProcessors),this._activeSpanProcessor=new nn(n)}getTracer(e,r,n){let o=`${e}@${r||""}:${(n==null?void 0:n.schemaUrl)||""}`;return this._tracers.has(o)||this._tracers.set(o,new rn({name:e,version:r,schemaUrl:n==null?void 0:n.schemaUrl},this._config,this._resource,this._activeSpanProcessor)),this._tracers.get(o)}forceFlush(){let e=this._config.forceFlushTimeoutMillis,r=this._activeSpanProcessor._spanProcessors.map(n=>new Promise(o=>{let i,s=setTimeout(()=>{o(new Error(`Span processor did not completed within timeout period of ${e} ms`)),i=Te.timeout},e);n.forceFlush().then(()=>{clearTimeout(s),i!==Te.timeout&&(i=Te.resolved,o(i))}).catch(a=>{clearTimeout(s),i=Te.error,o(a)})}));return new Promise((n,o)=>{Promise.all(r).then(i=>{let s=i.filter(a=>a!==Te.resolved);s.length>0?o(s):n()}).catch(i=>o([i]))})}shutdown(){return this._activeSpanProcessor.shutdown()}};var on=class{constructor(){p(this,"_enabled",!1);p(this,"_currentContext",ft)}_bindFunction(e=ft,r){let n=this,o=function(...i){return n.with(e,()=>r.apply(this,i))};return Object.defineProperty(o,"length",{enumerable:!1,configurable:!0,writable:!1,value:r.length}),o}active(){return this._currentContext}bind(e,r){return e===void 0&&(e=this.active()),typeof r=="function"?this._bindFunction(e,r):r}disable(){return this._currentContext=ft,this._enabled=!1,this}enable(){return this._enabled?this:(this._enabled=!0,this._currentContext=ft,this)}with(e,r,n,...o){let i=this._currentContext;this._currentContext=e||ft;try{return r.call(n,...o)}finally{this._currentContext=i}}};function Su(t){if(t!==null){if(t===void 0){let e=new on;e.enable(),G.setGlobalContextManager(e);return}t.enable(),G.setGlobalContextManager(t)}}function Au(t){if(t!==null){if(t===void 0){st.setGlobalPropagator(new fe({propagators:[new _e,new Be]}));return}st.setGlobalPropagator(t)}}var Qe=class extends qe{constructor(e={}){super(e)}register(e={}){Z.setGlobalTracerProvider(this),Au(e.propagator),Su(e.contextManager)}};var D;(function(t){t.CONNECT_END="connectEnd",t.CONNECT_START="connectStart",t.DECODED_BODY_SIZE="decodedBodySize",t.DOM_COMPLETE="domComplete",t.DOM_CONTENT_LOADED_EVENT_END="domContentLoadedEventEnd",t.DOM_CONTENT_LOADED_EVENT_START="domContentLoadedEventStart",t.DOM_INTERACTIVE="domInteractive",t.DOMAIN_LOOKUP_END="domainLookupEnd",t.DOMAIN_LOOKUP_START="domainLookupStart",t.ENCODED_BODY_SIZE="encodedBodySize",t.FETCH_START="fetchStart",t.LOAD_EVENT_END="loadEventEnd",t.LOAD_EVENT_START="loadEventStart",t.NAVIGATION_START="navigationStart",t.REDIRECT_END="redirectEnd",t.REDIRECT_START="redirectStart",t.REQUEST_START="requestStart",t.RESPONSE_END="responseEnd",t.RESPONSE_START="responseStart",t.SECURE_CONNECTION_START="secureConnectionStart",t.START_TIME="startTime",t.UNLOAD_EVENT_END="unloadEventEnd",t.UNLOAD_EVENT_START="unloadEventStart"})(D||(D={}));var ts="http.response_content_length",es="http.response_content_length_uncompressed";var $n;function Ru(){return $n||($n=document.createElement("a")),$n}function Kt(t,e){return e in t}function it(t,e,r,n=!0){if(Kt(r,e)&&typeof r[e]=="number"&&!(n&&r[e]===0))return t.addEvent(e,r[e])}function Ut(t,e,r=!1,n,o){if(n===void 0&&(n=e[D.START_TIME]!==0),r||(it(t,D.FETCH_START,e,n),it(t,D.DOMAIN_LOOKUP_START,e,n),it(t,D.DOMAIN_LOOKUP_END,e,n),it(t,D.CONNECT_START,e,n),it(t,D.SECURE_CONNECTION_START,e,n),it(t,D.CONNECT_END,e,n),it(t,D.REQUEST_START,e,n),it(t,D.RESPONSE_START,e,n),it(t,D.RESPONSE_END,e,n)),!o){let i=e[D.ENCODED_BODY_SIZE];i!==void 0&&t.setAttribute(ts,i);let s=e[D.DECODED_BODY_SIZE];s!==void 0&&i!==s&&t.setAttribute(es,s)}}function rs(t){return t.slice().sort((e,r)=>{let n=e[D.FETCH_START],o=r[D.FETCH_START];return n>o?1:n<o?-1:0})}function ns(){return typeof location!="undefined"?location.origin:void 0}function Je(t,e,r,n,o=new WeakSet,i){let s=Rt(t);t=s.toString();let a=vu(t,e,r,n,o,i);if(a.length===0)return{mainRequest:void 0};if(a.length===1)return{mainRequest:a[0]};let c=rs(a);if(s.origin!==ns()&&c.length>1){let u=c[0],l=yu(c,u[D.RESPONSE_END],r),m=u[D.RESPONSE_END];return l[D.FETCH_START]<m&&(l=u,u=void 0),{corsPreFlightRequest:u,mainRequest:l}}else return{mainRequest:a[0]}}function yu(t,e,r){let n=At(r),o=At(pe(e)),i=t[1],s,a=t.length;for(let c=1;c<a;c++){let u=t[c],l=At(pe(u[D.FETCH_START])),m=At(pe(u[D.RESPONSE_END])),S=n-m;l>=o&&(!s||S<s)&&(s=S,i=u)}return i}function vu(t,e,r,n,o,i){let s=At(e),a=At(r),c=n.filter(u=>{let l=At(pe(u[D.FETCH_START])),m=At(pe(u[D.RESPONSE_END]));return u.initiatorType.toLowerCase()===(i||"xmlhttprequest")&&u.name===t&&l>=s&&m<=a});return c.length>0&&(c=c.filter(u=>!o.has(u))),c}function Rt(t){if(typeof URL=="function")return new URL(t,typeof document!="undefined"?document.baseURI:typeof location!="undefined"?location.href:void 0);let e=Ru();return e.href=t,e}function sn(t,e){if(t.nodeType===Node.DOCUMENT_NODE)return"/";let r=bu(t,e);if(e&&r.indexOf("@id")>0)return r;let n="";return t.parentNode&&(n+=sn(t.parentNode,!1)),n+=r,n}function Ou(t){if(!t.parentNode)return 0;let e=[t.nodeType];t.nodeType===Node.CDATA_SECTION_NODE&&e.push(Node.TEXT_NODE);let r=Array.from(t.parentNode.childNodes);return r=r.filter(n=>{let o=n.localName;return e.indexOf(n.nodeType)>=0&&o===t.localName}),r.length>=1?r.indexOf(t)+1:0}function bu(t,e){let r=t.nodeType,n=Ou(t),o="";if(r===Node.ELEMENT_NODE){let i=t.getAttribute("id");if(e&&i)return`//*[@id="${i}"]`;o=t.localName}else if(r===Node.TEXT_NODE||r===Node.CDATA_SECTION_NODE)o="text()";else if(r===Node.COMMENT_NODE)o="comment()";else return"";return o&&n>1?`/${o}[${n}]`:`/${o}`}function tr(t,e){let r=e||[];return(typeof r=="string"||r instanceof RegExp)&&(r=[r]),Rt(t).origin===ns()?!0:r.some(o=>$r(t,o))}function os(t){return typeof t=="object"&&t!==null&&"addEventListener"in t&&typeof t.addEventListener=="function"&&"removeEventListener"in t&&typeof t.removeEventListener=="function"}var is="OT_ZONE_CONTEXT",Pe=class{constructor(){p(this,"_enabled",!1);p(this,"_zoneCounter",0)}_activeContextFromZone(e){return e&&e.get(is)||ft}_bindFunction(e,r){let n=this,o=function(...i){return n.with(e,()=>r.apply(this,i))};return Object.defineProperty(o,"length",{enumerable:!1,configurable:!0,writable:!1,value:r.length}),o}_bindListener(e,r){let n=r;return n.__ot_listeners!==void 0||(n.__ot_listeners={},typeof n.addEventListener=="function"&&(n.addEventListener=this._patchAddEventListener(n,n.addEventListener,e)),typeof n.removeEventListener=="function"&&(n.removeEventListener=this._patchRemoveEventListener(n,n.removeEventListener))),r}_createZoneName(){this._zoneCounter++;let e=Math.random();return`${this._zoneCounter}-${e}`}_createZone(e,r){return Zone.current.fork({name:e,properties:{[is]:r}})}_getActiveZone(){return Zone.current}_patchAddEventListener(e,r,n){let o=this;return function(i,s,a){e.__ot_listeners===void 0&&(e.__ot_listeners={});let c=e.__ot_listeners[i];c===void 0&&(c=new WeakMap,e.__ot_listeners[i]=c);let u=o.bind(n,s);return c.set(s,u),r.call(this,i,u,a)}}_patchRemoveEventListener(e,r){return function(n,o){if(e.__ot_listeners===void 0||e.__ot_listeners[n]===void 0)return r.call(this,n,o);let i=e.__ot_listeners[n],s=i.get(o);return i.delete(o),r.call(this,n,s||o)}}active(){if(!this._enabled)return ft;let e=this._getActiveZone(),r=this._activeContextFromZone(e);return r||ft}bind(e,r){return e===void 0&&(e=this.active()),typeof r=="function"?this._bindFunction(e,r):(os(r)&&this._bindListener(e,r),r)}disable(){return this._enabled=!1,this}enable(){return this._enabled=!0,this}with(e,r,n,...o){let i=this._createZoneName();return this._createZone(i,e).run(r,n,o)}};var Pu=Object.defineProperty,xu=Object.defineProperties,Lu=Object.getOwnPropertyDescriptors,ss=Object.getOwnPropertySymbols,Cu=Object.prototype.hasOwnProperty,wu=Object.prototype.propertyIsEnumerable,qn=(t,e,r)=>e in t?Pu(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,as=(t,e)=>{for(var r in e||(e={}))Cu.call(e,r)&&qn(t,r,e[r]);if(ss)for(var r of ss(e))wu.call(e,r)&&qn(t,r,e[r]);return t},Iu=(t,e)=>xu(t,Lu(e)),B=(t,e,r)=>(qn(t,typeof e!="symbol"?e+"":e,r),r),Ht=globalThis;function yt(t){return(Ht.__Zone_symbol_prefix||"__zone_symbol__")+t}function Du(){let t=Ht.performance;function e(q){t&&t.mark&&t.mark(q)}function r(q,h){t&&t.measure&&t.measure(q,h)}e("Zone");let n=class Qn{constructor(h,_){B(this,"_parent"),B(this,"_name"),B(this,"_properties"),B(this,"_zoneDelegate"),this._parent=h,this._name=_?_.name||"unnamed":"<root>",this._properties=_&&_.properties||{},this._zoneDelegate=new s(this,this._parent&&this._parent._zoneDelegate,_)}static assertZonePatched(){if(Ht.Promise!==I.ZoneAwarePromise)throw new Error("Zone.js has detected that ZoneAwarePromise `(window|global).Promise` has been overwritten.\nMost likely cause is that a Promise polyfill has been loaded after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. If you must load one, do so before loading zone.js.)")}static get root(){let h=Qn.current;for(;h.parent;)h=h.parent;return h}static get current(){return P.zone}static get currentTask(){return lt}static __load_patch(h,_,f=!1){if(I.hasOwnProperty(h)){let C=Ht[yt("forceDuplicateZoneCheck")]===!0;if(!f&&C)throw Error("Already loaded patch: "+h)}else if(!Ht["__Zone_disable_"+h]){let C="Zone:"+h;e(C),I[h]=_(Ht,Qn,H),r(C,C)}}get parent(){return this._parent}get name(){return this._name}get(h){let _=this.getZoneWith(h);if(_)return _._properties[h]}getZoneWith(h){let _=this;for(;_;){if(_._properties.hasOwnProperty(h))return _;_=_._parent}return null}fork(h){if(!h)throw new Error("ZoneSpec required!");return this._zoneDelegate.fork(this,h)}wrap(h,_){if(typeof h!="function")throw new Error("Expecting function got: "+h);let f=this._zoneDelegate.intercept(this,h,_),C=this;return function(){return C.runGuarded(f,this,arguments,_)}}run(h,_,f,C){P={parent:P,zone:this};try{return this._zoneDelegate.invoke(this,h,_,f,C)}finally{P=P.parent}}runGuarded(h,_=null,f,C){P={parent:P,zone:this};try{try{return this._zoneDelegate.invoke(this,h,_,f,C)}catch(Q){if(this._zoneDelegate.handleError(this,Q))throw Q}}finally{P=P.parent}}runTask(h,_,f){if(h.zone!=this)throw new Error("A task can only be run in the zone of creation! (Creation: "+(h.zone||K).name+"; Execution: "+this.name+")");let C=h,{type:Q,data:{isPeriodic:$=!1,isRefreshable:Ct=!1}={}}=h;if(h.state===E&&(Q===w||Q===et))return;let Bt=h.state!=v;Bt&&C._transitionTo(v,O);let Vt=lt;lt=C,P={parent:P,zone:this};try{Q==et&&h.data&&!$&&!Ct&&(h.cancelFn=void 0);try{return this._zoneDelegate.invokeTask(this,C,_,f)}catch(bt){if(this._zoneDelegate.handleError(this,bt))throw bt}}finally{let bt=h.state;if(bt!==E&&bt!==W)if(Q==w||$||Ct&&bt===T)Bt&&C._transitionTo(O,v,T);else{let R=C._zoneDelegates;this._updateTaskCount(C,-1),Bt&&C._transitionTo(E,v,E),Ct&&(C._zoneDelegates=R)}P=P.parent,lt=Vt}}scheduleTask(h){if(h.zone&&h.zone!==this){let f=this;for(;f;){if(f===h.zone)throw Error(`can not reschedule task to ${this.name} which is descendants of the original zone ${h.zone.name}`);f=f.parent}}h._transitionTo(T,E);let _=[];h._zoneDelegates=_,h._zone=this;try{h=this._zoneDelegate.scheduleTask(this,h)}catch(f){throw h._transitionTo(W,T,E),this._zoneDelegate.handleError(this,f),f}return h._zoneDelegates===_&&this._updateTaskCount(h,1),h.state==T&&h._transitionTo(O,T),h}scheduleMicroTask(h,_,f,C){return this.scheduleTask(new a(N,h,_,f,C,void 0))}scheduleMacroTask(h,_,f,C,Q){return this.scheduleTask(new a(et,h,_,f,C,Q))}scheduleEventTask(h,_,f,C,Q){return this.scheduleTask(new a(w,h,_,f,C,Q))}cancelTask(h){if(h.zone!=this)throw new Error("A task can only be cancelled in the zone of creation! (Creation: "+(h.zone||K).name+"; Execution: "+this.name+")");if(!(h.state!==O&&h.state!==v)){h._transitionTo(z,O,v);try{this._zoneDelegate.cancelTask(this,h)}catch(_){throw h._transitionTo(W,z),this._zoneDelegate.handleError(this,_),_}return this._updateTaskCount(h,-1),h._transitionTo(E,z),h.runCount=-1,h}}_updateTaskCount(h,_){let f=h._zoneDelegates;_==-1&&(h._zoneDelegates=null);for(let C=0;C<f.length;C++)f[C]._updateTaskCount(h.type,_)}};B(n,"__symbol__",yt);let o=n,i={name:"",onHasTask:(q,h,_,f)=>q.hasTask(_,f),onScheduleTask:(q,h,_,f)=>q.scheduleTask(_,f),onInvokeTask:(q,h,_,f,C,Q)=>q.invokeTask(_,f,C,Q),onCancelTask:(q,h,_,f)=>q.cancelTask(_,f)};class s{constructor(h,_,f){B(this,"_zone"),B(this,"_taskCounts",{microTask:0,macroTask:0,eventTask:0}),B(this,"_parentDelegate"),B(this,"_forkDlgt"),B(this,"_forkZS"),B(this,"_forkCurrZone"),B(this,"_interceptDlgt"),B(this,"_interceptZS"),B(this,"_interceptCurrZone"),B(this,"_invokeDlgt"),B(this,"_invokeZS"),B(this,"_invokeCurrZone"),B(this,"_handleErrorDlgt"),B(this,"_handleErrorZS"),B(this,"_handleErrorCurrZone"),B(this,"_scheduleTaskDlgt"),B(this,"_scheduleTaskZS"),B(this,"_scheduleTaskCurrZone"),B(this,"_invokeTaskDlgt"),B(this,"_invokeTaskZS"),B(this,"_invokeTaskCurrZone"),B(this,"_cancelTaskDlgt"),B(this,"_cancelTaskZS"),B(this,"_cancelTaskCurrZone"),B(this,"_hasTaskDlgt"),B(this,"_hasTaskDlgtOwner"),B(this,"_hasTaskZS"),B(this,"_hasTaskCurrZone"),this._zone=h,this._parentDelegate=_,this._forkZS=f&&(f&&f.onFork?f:_._forkZS),this._forkDlgt=f&&(f.onFork?_:_._forkDlgt),this._forkCurrZone=f&&(f.onFork?this._zone:_._forkCurrZone),this._interceptZS=f&&(f.onIntercept?f:_._interceptZS),this._interceptDlgt=f&&(f.onIntercept?_:_._interceptDlgt),this._interceptCurrZone=f&&(f.onIntercept?this._zone:_._interceptCurrZone),this._invokeZS=f&&(f.onInvoke?f:_._invokeZS),this._invokeDlgt=f&&(f.onInvoke?_:_._invokeDlgt),this._invokeCurrZone=f&&(f.onInvoke?this._zone:_._invokeCurrZone),this._handleErrorZS=f&&(f.onHandleError?f:_._handleErrorZS),this._handleErrorDlgt=f&&(f.onHandleError?_:_._handleErrorDlgt),this._handleErrorCurrZone=f&&(f.onHandleError?this._zone:_._handleErrorCurrZone),this._scheduleTaskZS=f&&(f.onScheduleTask?f:_._scheduleTaskZS),this._scheduleTaskDlgt=f&&(f.onScheduleTask?_:_._scheduleTaskDlgt),this._scheduleTaskCurrZone=f&&(f.onScheduleTask?this._zone:_._scheduleTaskCurrZone),this._invokeTaskZS=f&&(f.onInvokeTask?f:_._invokeTaskZS),this._invokeTaskDlgt=f&&(f.onInvokeTask?_:_._invokeTaskDlgt),this._invokeTaskCurrZone=f&&(f.onInvokeTask?this._zone:_._invokeTaskCurrZone),this._cancelTaskZS=f&&(f.onCancelTask?f:_._cancelTaskZS),this._cancelTaskDlgt=f&&(f.onCancelTask?_:_._cancelTaskDlgt),this._cancelTaskCurrZone=f&&(f.onCancelTask?this._zone:_._cancelTaskCurrZone),this._hasTaskZS=null,this._hasTaskDlgt=null,this._hasTaskDlgtOwner=null,this._hasTaskCurrZone=null;let C=f&&f.onHasTask,Q=_&&_._hasTaskZS;(C||Q)&&(this._hasTaskZS=C?f:i,this._hasTaskDlgt=_,this._hasTaskDlgtOwner=this,this._hasTaskCurrZone=this._zone,f.onScheduleTask||(this._scheduleTaskZS=i,this._scheduleTaskDlgt=_,this._scheduleTaskCurrZone=this._zone),f.onInvokeTask||(this._invokeTaskZS=i,this._invokeTaskDlgt=_,this._invokeTaskCurrZone=this._zone),f.onCancelTask||(this._cancelTaskZS=i,this._cancelTaskDlgt=_,this._cancelTaskCurrZone=this._zone))}get zone(){return this._zone}fork(h,_){return this._forkZS?this._forkZS.onFork(this._forkDlgt,this.zone,h,_):new o(h,_)}intercept(h,_,f){return this._interceptZS?this._interceptZS.onIntercept(this._interceptDlgt,this._interceptCurrZone,h,_,f):_}invoke(h,_,f,C,Q){return this._invokeZS?this._invokeZS.onInvoke(this._invokeDlgt,this._invokeCurrZone,h,_,f,C,Q):_.apply(f,C)}handleError(h,_){return this._handleErrorZS?this._handleErrorZS.onHandleError(this._handleErrorDlgt,this._handleErrorCurrZone,h,_):!0}scheduleTask(h,_){let f=_;if(this._scheduleTaskZS)this._hasTaskZS&&f._zoneDelegates.push(this._hasTaskDlgtOwner),f=this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt,this._scheduleTaskCurrZone,h,_),f||(f=_);else if(_.scheduleFn)_.scheduleFn(_);else if(_.type==N)U(_);else throw new Error("Task is missing scheduleFn.");return f}invokeTask(h,_,f,C){return this._invokeTaskZS?this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt,this._invokeTaskCurrZone,h,_,f,C):_.callback.apply(f,C)}cancelTask(h,_){let f;if(this._cancelTaskZS)f=this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt,this._cancelTaskCurrZone,h,_);else{if(!_.cancelFn)throw Error("Task is not cancelable");f=_.cancelFn(_)}return f}hasTask(h,_){try{this._hasTaskZS&&this._hasTaskZS.onHasTask(this._hasTaskDlgt,this._hasTaskCurrZone,h,_)}catch(f){this.handleError(h,f)}}_updateTaskCount(h,_){let f=this._taskCounts,C=f[h],Q=f[h]=C+_;if(Q<0)throw new Error("More tasks executed then were scheduled.");if(C==0||Q==0){let $={microTask:f.microTask>0,macroTask:f.macroTask>0,eventTask:f.eventTask>0,change:h};this.hasTask(this._zone,$)}}}class a{constructor(h,_,f,C,Q,$){if(B(this,"type"),B(this,"source"),B(this,"invoke"),B(this,"callback"),B(this,"data"),B(this,"scheduleFn"),B(this,"cancelFn"),B(this,"_zone",null),B(this,"runCount",0),B(this,"_zoneDelegates",null),B(this,"_state","notScheduled"),this.type=h,this.source=_,this.data=C,this.scheduleFn=Q,this.cancelFn=$,!f)throw new Error("callback is not defined");this.callback=f;let Ct=this;h===w&&C&&C.useG?this.invoke=a.invokeTask:this.invoke=function(){return a.invokeTask.call(Ht,Ct,this,arguments)}}static invokeTask(h,_,f){h||(h=this),dt++;try{return h.runCount++,h.zone.runTask(h,_,f)}finally{dt==1&&J(),dt--}}get zone(){return this._zone}get state(){return this._state}cancelScheduleRequest(){this._transitionTo(E,T)}_transitionTo(h,_,f){if(this._state===_||this._state===f)this._state=h,h==E&&(this._zoneDelegates=null);else throw new Error(`${this.type} '${this.source}': can not transition to '${h}', expecting state '${_}'${f?" or '"+f+"'":""}, was '${this._state}'.`)}toString(){return this.data&&typeof this.data.handleId!="undefined"?this.data.handleId.toString():Object.prototype.toString.call(this)}toJSON(){return{type:this.type,state:this.state,source:this.source,zone:this.zone.name,runCount:this.runCount}}}let c=yt("setTimeout"),u=yt("Promise"),l=yt("then"),m=[],S=!1,y;function M(q){if(y||Ht[u]&&(y=Ht[u].resolve(0)),y){let h=y[l];h||(h=y.then),h.call(y,q)}else Ht[c](q,0)}function U(q){dt===0&&m.length===0&&M(J),q&&m.push(q)}function J(){if(!S){for(S=!0;m.length;){let q=m;m=[];for(let h=0;h<q.length;h++){let _=q[h];try{_.zone.runTask(_,null,null)}catch(f){H.onUnhandledError(f)}}}H.microtaskDrainDone(),S=!1}}let K={name:"NO ZONE"},E="notScheduled",T="scheduling",O="scheduled",v="running",z="canceling",W="unknown",N="microTask",et="macroTask",w="eventTask",I={},H={symbol:yt,currentZoneFrame:()=>P,onUnhandledError:tt,microtaskDrainDone:tt,scheduleMicroTask:U,showUncaughtError:()=>!o[yt("ignoreConsoleErrorUncaughtError")],patchEventTarget:()=>[],patchOnProperties:tt,patchMethod:()=>tt,bindArguments:()=>[],patchThen:()=>tt,patchMacroTask:()=>tt,patchEventPrototype:()=>tt,getGlobalObjects:()=>{},ObjectDefineProperty:()=>tt,ObjectGetOwnPropertyDescriptor:()=>{},ObjectCreate:()=>{},ArraySlice:()=>[],patchClass:()=>tt,wrapWithCurrentZone:()=>tt,filterProperties:()=>[],attachOriginToPatched:()=>tt,_redefineProperty:()=>tt,patchCallbacks:()=>tt,nativeScheduleMicroTask:M},P={parent:null,zone:new o(null,null)},lt=null,dt=0;function tt(){}return r("Zone","Zone"),o}function Mu(){var t;let e=globalThis,r=e[yt("forceDuplicateZoneCheck")]===!0;if(e.Zone&&(r||typeof e.Zone.__symbol__!="function"))throw new Error("Zone already loaded.");return(t=e.Zone)!=null||(e.Zone=Du()),e.Zone}var rr=Object.getOwnPropertyDescriptor,to=Object.defineProperty,eo=Object.getPrototypeOf,ku=Object.create,Uu=Array.prototype.slice,ro="addEventListener",no="removeEventListener",Xn=yt(ro),Yn=yt(no),Wt="true",$t="false",nr=yt("");function oo(t,e){return Zone.current.wrap(t,e)}function io(t,e,r,n,o){return Zone.current.scheduleMacroTask(t,e,r,n,o)}var Y=yt,un=typeof window!="undefined",ln=un?window:void 0,ct=un&&ln||globalThis,Hu="removeAttribute";function so(t,e){for(let r=t.length-1;r>=0;r--)typeof t[r]=="function"&&(t[r]=oo(t[r],e+"_"+r));return t}function Gu(t,e){let r=t.constructor.name;for(let n=0;n<e.length;n++){let o=e[n],i=t[o];if(i){let s=rr(t,o);if(!_s(s))continue;t[o]=(a=>{let c=function(){return a.apply(this,so(arguments,r+"."+o))};return Yt(c,a),c})(i)}}}function _s(t){return t?t.writable===!1?!1:!(typeof t.get=="function"&&typeof t.set=="undefined"):!0}var hs=typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope,pn=!("nw"in ct)&&typeof ct.process!="undefined"&&ct.process.toString()==="[object process]",ao=!pn&&!hs&&!!(un&&ln.HTMLElement),ds=typeof ct.process!="undefined"&&ct.process.toString()==="[object process]"&&!hs&&!!(un&&ln.HTMLElement),cn={},Bu=Y("enable_beforeunload"),cs=function(t){if(t=t||ct.event,!t)return;let e=cn[t.type];e||(e=cn[t.type]=Y("ON_PROPERTY"+t.type));let r=this||t.target||ct,n=r[e],o;if(ao&&r===ln&&t.type==="error"){let i=t;o=n&&n.call(this,i.message,i.filename,i.lineno,i.colno,i.error),o===!0&&t.preventDefault()}else o=n&&n.apply(this,arguments),t.type==="beforeunload"&&ct[Bu]&&typeof o=="string"?t.returnValue=o:o!=null&&!o&&t.preventDefault();return o};function us(t,e,r){let n=rr(t,e);if(!n&&r&&rr(r,e)&&(n={enumerable:!0,configurable:!0}),!n||!n.configurable)return;let o=Y("on"+e+"patched");if(t.hasOwnProperty(o)&&t[o])return;delete n.writable,delete n.value;let i=n.get,s=n.set,a=e.slice(2),c=cn[a];c||(c=cn[a]=Y("ON_PROPERTY"+a)),n.set=function(u){let l=this;if(!l&&t===ct&&(l=ct),!l)return;typeof l[c]=="function"&&l.removeEventListener(a,cs),s==null||s.call(l,null),l[c]=u,typeof u=="function"&&l.addEventListener(a,cs,!1)},n.get=function(){let u=this;if(!u&&t===ct&&(u=ct),!u)return null;let l=u[c];if(l)return l;if(i){let m=i.call(this);if(m)return n.set.call(this,m),typeof u[Hu]=="function"&&u.removeAttribute(e),m}return null},to(t,e,n),t[o]=!0}function ms(t,e,r){if(e)for(let n=0;n<e.length;n++)us(t,"on"+e[n],r);else{let n=[];for(let o in t)o.slice(0,2)=="on"&&n.push(o);for(let o=0;o<n.length;o++)us(t,n[o],r)}}var Lt=Y("originalInstance");function er(t){let e=ct[t];if(!e)return;ct[Y(t)]=e,ct[t]=function(){let o=so(arguments,t);switch(o.length){case 0:this[Lt]=new e;break;case 1:this[Lt]=new e(o[0]);break;case 2:this[Lt]=new e(o[0],o[1]);break;case 3:this[Lt]=new e(o[0],o[1],o[2]);break;case 4:this[Lt]=new e(o[0],o[1],o[2],o[3]);break;default:throw new Error("Arg list too long.")}},Yt(ct[t],e);let r=new e(function(){}),n;for(n in r)t==="XMLHttpRequest"&&n==="responseBlob"||(function(o){typeof r[o]=="function"?ct[t].prototype[o]=function(){return this[Lt][o].apply(this[Lt],arguments)}:to(ct[t].prototype,o,{set:function(i){typeof i=="function"?(this[Lt][o]=oo(i,t+"."+o),Yt(this[Lt][o],i)):this[Lt][o]=i},get:function(){return this[Lt][o]}})})(n);for(n in e)n!=="prototype"&&e.hasOwnProperty(n)&&(ct[t][n]=e[n])}function Vu(t,e){if(typeof Object.getOwnPropertySymbols!="function")return;Object.getOwnPropertySymbols(t).forEach(n=>{let o=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,{get:function(){return t[n]},set:function(i){o&&(!o.writable||typeof o.set!="function")||(t[n]=i)},enumerable:o?o.enumerable:!0,configurable:o?o.configurable:!0})})}var Fu=!1;function Xt(t,e,r){let n=t;for(;n&&!n.hasOwnProperty(e);)n=eo(n);!n&&t[e]&&(n=t);let o=Y(e),i=null;if(n&&(!(i=n[o])||!n.hasOwnProperty(o))){i=n[o]=n[e];let s=n&&rr(n,e);if(_s(s)){let a=r(i,o,e);n[e]=function(){return a(this,arguments)},Yt(n[e],i),Fu&&Vu(i,n[e])}}return i}function ju(t,e,r){let n=null;function o(i){let s=i.data;return s.args[s.cbIdx]=function(){i.invoke.apply(this,arguments)},n.apply(s.target,s.args),i}n=Xt(t,e,i=>function(s,a){let c=r(s,a);return c.cbIdx>=0&&typeof a[c.cbIdx]=="function"?io(c.name,a[c.cbIdx],c,o):i.apply(s,a)})}function Yt(t,e){t[Y("OriginalDelegate")]=e}function ls(t){return typeof t=="function"}function ps(t){return typeof t=="number"}var zu={useG:!0},vt={},Ts={},Es=new RegExp("^"+nr+"(\\w+)(true|false)$"),gs=Y("propagationStopped");function Ss(t,e){let r=(e?e(t):t)+$t,n=(e?e(t):t)+Wt,o=nr+r,i=nr+n;vt[t]={},vt[t][$t]=o,vt[t][Wt]=i}function Zu(t,e,r,n){let o=n&&n.add||ro,i=n&&n.rm||no,s=n&&n.listeners||"eventListeners",a=n&&n.rmAll||"removeAllListeners",c=Y(o),u="."+o+":",l="prependListener",m="."+l+":",S=function(E,T,O){if(E.isRemoved)return;let v=E.callback;typeof v=="object"&&v.handleEvent&&(E.callback=N=>v.handleEvent(N),E.originalDelegate=v);let z;try{E.invoke(E,T,[O])}catch(N){z=N}let W=E.options;if(W&&typeof W=="object"&&W.once){let N=E.originalDelegate?E.originalDelegate:E.callback;T[i].call(T,O.type,N,W)}return z};function y(E,T,O){if(T=T||t.event,!T)return;let v=E||T.target||t,z=v[vt[T.type][O?Wt:$t]];if(z){let W=[];if(z.length===1){let N=S(z[0],v,T);N&&W.push(N)}else{let N=z.slice();for(let et=0;et<N.length&&!(T&&T[gs]===!0);et++){let w=S(N[et],v,T);w&&W.push(w)}}if(W.length===1)throw W[0];for(let N=0;N<W.length;N++){let et=W[N];e.nativeScheduleMicroTask(()=>{throw et})}}}let M=function(E){return y(this,E,!1)},U=function(E){return y(this,E,!0)};function J(E,T){if(!E)return!1;let O=!0;T&&T.useG!==void 0&&(O=T.useG);let v=T&&T.vh,z=!0;T&&T.chkDup!==void 0&&(z=T.chkDup);let W=!1;T&&T.rt!==void 0&&(W=T.rt);let N=E;for(;N&&!N.hasOwnProperty(o);)N=eo(N);if(!N&&E[o]&&(N=E),!N||N[c])return!1;let et=T&&T.eventNameToString,w={},I=N[c]=N[o],H=N[Y(i)]=N[i],P=N[Y(s)]=N[s],lt=N[Y(a)]=N[a],dt;T&&T.prepend&&(dt=N[Y(T.prepend)]=N[T.prepend]);function tt(d,A){return A?typeof d=="boolean"?{capture:d,passive:!0}:d?typeof d=="object"&&d.passive!==!1?Iu(as({},d),{passive:!0}):d:{passive:!0}:d}let q=function(d){if(!w.isExisting)return I.call(w.target,w.eventName,w.capture?U:M,w.options)},h=function(d){if(!d.isRemoved){let A=vt[d.eventName],L;A&&(L=A[d.capture?Wt:$t]);let k=L&&d.target[L];if(k){for(let x=0;x<k.length;x++)if(k[x]===d){k.splice(x,1),d.isRemoved=!0,d.removeAbortListener&&(d.removeAbortListener(),d.removeAbortListener=null),k.length===0&&(d.allRemoved=!0,d.target[L]=null);break}}}if(d.allRemoved)return H.call(d.target,d.eventName,d.capture?U:M,d.options)},_=function(d){return I.call(w.target,w.eventName,d.invoke,w.options)},f=function(d){return dt.call(w.target,w.eventName,d.invoke,w.options)},C=function(d){return H.call(d.target,d.eventName,d.invoke,d.options)},Q=O?q:_,$=O?h:C,Ct=function(d,A){let L=typeof A;return L==="function"&&d.callback===A||L==="object"&&d.originalDelegate===A},Bt=(T==null?void 0:T.diff)||Ct,Vt=Zone[Y("UNPATCHED_EVENTS")],bt=t[Y("PASSIVE_EVENTS")];function R(d){if(typeof d=="object"&&d!==null){let A=as({},d);return d.signal&&(A.signal=d.signal),A}return d}let g=function(d,A,L,k,x=!1,V=!1){return function(){let F=this||t,j=arguments[0];T&&T.transferEventName&&(j=T.transferEventName(j));let rt=arguments[1];if(!rt)return d.apply(this,arguments);if(pn&&j==="uncaughtException")return d.apply(this,arguments);let nt=!1;if(typeof rt!="function"){if(!rt.handleEvent)return d.apply(this,arguments);nt=!0}if(v&&!v(d,rt,F,arguments))return;let Qt=!!bt&&bt.indexOf(j)!==-1,Nt=R(tt(arguments[2],Qt)),se=Nt==null?void 0:Nt.signal;if(se!=null&&se.aborted)return;if(Vt){for(let wt=0;wt<Vt.length;wt++)if(j===Vt[wt])return Qt?d.call(F,j,rt,Nt):d.apply(this,arguments)}let On=Nt?typeof Nt=="boolean"?!0:Nt.capture:!1,Vo=Nt&&typeof Nt=="object"?Nt.once:!1,Za=Zone.current,bn=vt[j];bn||(Ss(j,et),bn=vt[j]);let Fo=bn[On?Wt:$t],Ae=F[Fo],jo=!1;if(Ae){if(jo=!0,z){for(let wt=0;wt<Ae.length;wt++)if(Bt(Ae[wt],rt))return}}else Ae=F[Fo]=[];let Rr,zo=F.constructor.name,Zo=Ts[zo];Zo&&(Rr=Zo[j]),Rr||(Rr=zo+A+(et?et(j):j)),w.options=Nt,Vo&&(w.options.once=!1),w.target=F,w.capture=On,w.eventName=j,w.isExisting=jo;let Ie=O?zu:void 0;Ie&&(Ie.taskData=w),se&&(w.options.signal=void 0);let Pt=Za.scheduleEventTask(Rr,rt,Ie,L,k);if(se){w.options.signal=se;let wt=()=>Pt.zone.cancelTask(Pt);d.call(se,"abort",wt,{once:!0}),Pt.removeAbortListener=()=>se.removeEventListener("abort",wt)}if(w.target=null,Ie&&(Ie.taskData=null),Vo&&(w.options.once=!0),typeof Pt.options!="boolean"&&(Pt.options=Nt),Pt.target=F,Pt.capture=On,Pt.eventName=j,nt&&(Pt.originalDelegate=rt),V?Ae.unshift(Pt):Ae.push(Pt),x)return F}};return N[o]=g(I,u,Q,$,W),dt&&(N[l]=g(dt,m,f,$,W,!0)),N[i]=function(){let d=this||t,A=arguments[0];T&&T.transferEventName&&(A=T.transferEventName(A));let L=arguments[2],k=L?typeof L=="boolean"?!0:L.capture:!1,x=arguments[1];if(!x)return H.apply(this,arguments);if(v&&!v(H,x,d,arguments))return;let V=vt[A],F;V&&(F=V[k?Wt:$t]);let j=F&&d[F];if(j)for(let rt=0;rt<j.length;rt++){let nt=j[rt];if(Bt(nt,x)){if(j.splice(rt,1),nt.isRemoved=!0,j.length===0&&(nt.allRemoved=!0,d[F]=null,!k&&typeof A=="string")){let Qt=nr+"ON_PROPERTY"+A;d[Qt]=null}return nt.zone.cancelTask(nt),W?d:void 0}}return H.apply(this,arguments)},N[s]=function(){let d=this||t,A=arguments[0];T&&T.transferEventName&&(A=T.transferEventName(A));let L=[],k=As(d,et?et(A):A);for(let x=0;x<k.length;x++){let V=k[x],F=V.originalDelegate?V.originalDelegate:V.callback;L.push(F)}return L},N[a]=function(){let d=this||t,A=arguments[0];if(A){T&&T.transferEventName&&(A=T.transferEventName(A));let L=vt[A];if(L){let k=L[$t],x=L[Wt],V=d[k],F=d[x];if(V){let j=V.slice();for(let rt=0;rt<j.length;rt++){let nt=j[rt],Qt=nt.originalDelegate?nt.originalDelegate:nt.callback;this[i].call(this,A,Qt,nt.options)}}if(F){let j=F.slice();for(let rt=0;rt<j.length;rt++){let nt=j[rt],Qt=nt.originalDelegate?nt.originalDelegate:nt.callback;this[i].call(this,A,Qt,nt.options)}}}}else{let L=Object.keys(d);for(let k=0;k<L.length;k++){let x=L[k],V=Es.exec(x),F=V&&V[1];F&&F!=="removeListener"&&this[a].call(this,F)}this[a].call(this,"removeListener")}if(W)return this},Yt(N[o],I),Yt(N[i],H),lt&&Yt(N[a],lt),P&&Yt(N[s],P),!0}let K=[];for(let E=0;E<r.length;E++)K[E]=J(r[E],n);return K}function As(t,e){if(!e){let i=[];for(let s in t){let a=Es.exec(s),c=a&&a[1];if(c&&(!e||c===e)){let u=t[s];if(u)for(let l=0;l<u.length;l++)i.push(u[l])}}return i}let r=vt[e];r||(Ss(e),r=vt[e]);let n=t[r[$t]],o=t[r[Wt]];return n?o?n.concat(o):n.slice():o?o.slice():[]}function Ku(t,e){let r=t.Event;r&&r.prototype&&e.patchMethod(r.prototype,"stopImmediatePropagation",n=>function(o,i){o[gs]=!0,n&&n.apply(o,i)})}function Wu(t,e){e.patchMethod(t,"queueMicrotask",r=>function(n,o){Zone.current.scheduleMicroTask("queueMicrotask",o[0])})}var an=Y("zoneTask");function xe(t,e,r,n){let o=null,i=null;e+=n,r+=n;let s={};function a(u){let l=u.data;l.args[0]=function(){return u.invoke.apply(this,arguments)};let m=o.apply(t,l.args);return ps(m)?l.handleId=m:(l.handle=m,l.isRefreshable=ls(m.refresh)),u}function c(u){let{handle:l,handleId:m}=u.data;return i.call(t,l!=null?l:m)}o=Xt(t,e,u=>function(l,m){var S;if(ls(m[0])){let y={isRefreshable:!1,isPeriodic:n==="Interval",delay:n==="Timeout"||n==="Interval"?m[1]||0:void 0,args:m},M=m[0];m[0]=function(){try{return M.apply(this,arguments)}finally{let{handle:v,handleId:z,isPeriodic:W,isRefreshable:N}=y;!W&&!N&&(z?delete s[z]:v&&(v[an]=null))}};let U=io(e,m[0],y,a,c);if(!U)return U;let{handleId:J,handle:K,isRefreshable:E,isPeriodic:T}=U.data;if(J)s[J]=U;else if(K&&(K[an]=U,E&&!T)){let O=K.refresh;K.refresh=function(){let{zone:v,state:z}=U;return z==="notScheduled"?(U._state="scheduled",v._updateTaskCount(U,1)):z==="running"&&(U._state="scheduling"),O.call(this)}}return(S=K!=null?K:J)!=null?S:U}else return u.apply(t,m)}),i=Xt(t,r,u=>function(l,m){let S=m[0],y;ps(S)?(y=s[S],delete s[S]):(y=S==null?void 0:S[an],y?S[an]=null:y=S),y!=null&&y.type?y.cancelFn&&y.zone.cancelTask(y):u.apply(t,m)})}function $u(t,e){let{isBrowser:r,isMix:n}=e.getGlobalObjects();if(!r&&!n||!t.customElements||!("customElements"in t))return;let o=["connectedCallback","disconnectedCallback","adoptedCallback","attributeChangedCallback","formAssociatedCallback","formDisabledCallback","formResetCallback","formStateRestoreCallback"];e.patchCallbacks(e,t.customElements,"customElements","define",o)}function Xu(t,e){if(Zone[e.symbol("patchEventTarget")])return;let{eventNames:r,zoneSymbolEventNames:n,TRUE_STR:o,FALSE_STR:i,ZONE_SYMBOL_PREFIX:s}=e.getGlobalObjects();for(let c=0;c<r.length;c++){let u=r[c],l=u+i,m=u+o,S=s+l,y=s+m;n[u]={},n[u][i]=S,n[u][o]=y}let a=t.EventTarget;if(!(!a||!a.prototype))return e.patchEventTarget(t,e,[a&&a.prototype]),!0}function Yu(t,e){e.patchEventPrototype(t,e)}function Rs(t,e,r){if(!r||r.length===0)return e;let n=r.filter(i=>i.target===t);if(n.length===0)return e;let o=n[0].ignoreProperties;return e.filter(i=>o.indexOf(i)===-1)}function fs(t,e,r,n){if(!t)return;let o=Rs(t,e,r);ms(t,o,n)}function Jn(t){return Object.getOwnPropertyNames(t).filter(e=>e.startsWith("on")&&e.length>2).map(e=>e.substring(2))}function qu(t,e){if(pn&&!ds||Zone[t.symbol("patchEvents")])return;let r=e.__Zone_ignore_on_properties,n=[];if(ao){let o=window;n=n.concat(["Document","SVGElement","Element","HTMLElement","HTMLBodyElement","HTMLMediaElement","HTMLFrameSetElement","HTMLFrameElement","HTMLIFrameElement","HTMLMarqueeElement","Worker"]),fs(o,Jn(o),r,eo(o))}n=n.concat(["XMLHttpRequest","XMLHttpRequestEventTarget","IDBIndex","IDBRequest","IDBOpenDBRequest","IDBDatabase","IDBTransaction","IDBCursor","WebSocket"]);for(let o=0;o<n.length;o++){let i=e[n[o]];i!=null&&i.prototype&&fs(i.prototype,Jn(i.prototype),r)}}function Qu(t){t.__load_patch("timers",e=>{let n="clear";xe(e,"set",n,"Timeout"),xe(e,"set",n,"Interval"),xe(e,"set",n,"Immediate")}),t.__load_patch("requestAnimationFrame",e=>{xe(e,"request","cancel","AnimationFrame"),xe(e,"mozRequest","mozCancel","AnimationFrame"),xe(e,"webkitRequest","webkitCancel","AnimationFrame")}),t.__load_patch("blocking",(e,r)=>{let n=["alert","prompt","confirm"];for(let o=0;o<n.length;o++){let i=n[o];Xt(e,i,(s,a,c)=>function(u,l){return r.current.run(s,e,l,c)})}}),t.__load_patch("EventTarget",(e,r,n)=>{Yu(e,n),Xu(e,n);let o=e.XMLHttpRequestEventTarget;o&&o.prototype&&n.patchEventTarget(e,n,[o.prototype])}),t.__load_patch("MutationObserver",(e,r,n)=>{er("MutationObserver"),er("WebKitMutationObserver")}),t.__load_patch("IntersectionObserver",(e,r,n)=>{er("IntersectionObserver")}),t.__load_patch("FileReader",(e,r,n)=>{er("FileReader")}),t.__load_patch("on_property",(e,r,n)=>{qu(n,e)}),t.__load_patch("customElements",(e,r,n)=>{$u(e,n)}),t.__load_patch("XHR",(e,r)=>{u(e);let n=Y("xhrTask"),o=Y("xhrSync"),i=Y("xhrListener"),s=Y("xhrScheduled"),a=Y("xhrURL"),c=Y("xhrErrorBeforeScheduled");function u(l){let m=l.XMLHttpRequest;if(!m)return;let S=m.prototype;function y(I){return I[n]}let M=S[Xn],U=S[Yn];if(!M){let I=l.XMLHttpRequestEventTarget;if(I){let H=I.prototype;M=H[Xn],U=H[Yn]}}let J="readystatechange",K="scheduled";function E(I){let H=I.data,P=H.target;P[s]=!1,P[c]=!1;let lt=P[i];M||(M=P[Xn],U=P[Yn]),lt&&U.call(P,J,lt);let dt=P[i]=()=>{if(P.readyState===P.DONE)if(!H.aborted&&P[s]&&I.state===K){let q=P[r.__symbol__("loadfalse")];if(P.status!==0&&q&&q.length>0){let h=I.invoke;I.invoke=function(){let _=P[r.__symbol__("loadfalse")];for(let f=0;f<_.length;f++)_[f]===I&&_.splice(f,1);!H.aborted&&I.state===K&&h.call(I)},q.push(I)}else I.invoke()}else!H.aborted&&P[s]===!1&&(P[c]=!0)};return M.call(P,J,dt),P[n]||(P[n]=I),et.apply(P,H.args),P[s]=!0,I}function T(){}function O(I){let H=I.data;return H.aborted=!0,w.apply(H.target,H.args)}let v=Xt(S,"open",()=>function(I,H){return I[o]=H[2]==!1,I[a]=H[1],v.apply(I,H)}),z="XMLHttpRequest.send",W=Y("fetchTaskAborting"),N=Y("fetchTaskScheduling"),et=Xt(S,"send",()=>function(I,H){if(r.current[N]===!0||I[o])return et.apply(I,H);{let P={target:I,url:I[a],isPeriodic:!1,args:H,aborted:!1},lt=io(z,T,P,E,O);I&&I[c]===!0&&!P.aborted&&lt.state===K&&lt.invoke()}}),w=Xt(S,"abort",()=>function(I,H){let P=y(I);if(P&&typeof P.type=="string"){if(P.cancelFn==null||P.data&&P.data.aborted)return;P.zone.cancelTask(P)}else if(r.current[W]===!0)return w.apply(I,H)})}}),t.__load_patch("geolocation",e=>{e.navigator&&e.navigator.geolocation&&Gu(e.navigator.geolocation,["getCurrentPosition","watchPosition"])}),t.__load_patch("PromiseRejectionEvent",(e,r)=>{function n(o){return function(i){As(e,o).forEach(a=>{let c=e.PromiseRejectionEvent;if(c){let u=new c(o,{promise:i.promise,reason:i.rejection});a.invoke(u)}})}}e.PromiseRejectionEvent&&(r[Y("unhandledPromiseRejectionHandler")]=n("unhandledrejection"),r[Y("rejectionHandledHandler")]=n("rejectionhandled"))}),t.__load_patch("queueMicrotask",(e,r,n)=>{Wu(e,n)})}function Ju(t){t.__load_patch("ZoneAwarePromise",(e,r,n)=>{let o=Object.getOwnPropertyDescriptor,i=Object.defineProperty;function s(R){if(R&&R.toString===Object.prototype.toString){let g=R.constructor&&R.constructor.name;return(g||"")+": "+JSON.stringify(R)}return R?R.toString():Object.prototype.toString.call(R)}let a=n.symbol,c=[],u=e[a("DISABLE_WRAPPING_UNCAUGHT_PROMISE_REJECTION")]!==!1,l=a("Promise"),m=a("then"),S="__creationTrace__";n.onUnhandledError=R=>{if(n.showUncaughtError()){let g=R&&R.rejection;g?console.error("Unhandled Promise rejection:",g instanceof Error?g.message:g,"; Zone:",R.zone.name,"; Task:",R.task&&R.task.source,"; Value:",g,g instanceof Error?g.stack:void 0):console.error(R)}},n.microtaskDrainDone=()=>{for(;c.length;){let R=c.shift();try{R.zone.runGuarded(()=>{throw R.throwOriginal?R.rejection:R})}catch(g){M(g)}}};let y=a("unhandledPromiseRejectionHandler");function M(R){n.onUnhandledError(R);try{let g=r[y];typeof g=="function"&&g.call(this,R)}catch(g){}}function U(R){return R&&typeof R.then=="function"}function J(R){return R}function K(R){return $.reject(R)}let E=a("state"),T=a("value"),O=a("finally"),v=a("parentPromiseValue"),z=a("parentPromiseState"),W="Promise.then",N=null,et=!0,w=!1,I=0;function H(R,g){return d=>{try{tt(R,g,d)}catch(A){tt(R,!1,A)}}}let P=function(){let R=!1;return function(d){return function(){R||(R=!0,d.apply(null,arguments))}}},lt="Promise resolved with itself",dt=a("currentTaskTrace");function tt(R,g,d){let A=P();if(R===d)throw new TypeError(lt);if(R[E]===N){let L=null;try{(typeof d=="object"||typeof d=="function")&&(L=d&&d.then)}catch(k){return A(()=>{tt(R,!1,k)})(),R}if(g!==w&&d instanceof $&&d.hasOwnProperty(E)&&d.hasOwnProperty(T)&&d[E]!==N)h(d),tt(R,d[E],d[T]);else if(g!==w&&typeof L=="function")try{L.call(d,A(H(R,g)),A(H(R,!1)))}catch(k){A(()=>{tt(R,!1,k)})()}else{R[E]=g;let k=R[T];if(R[T]=d,R[O]===O&&g===et&&(R[E]=R[z],R[T]=R[v]),g===w&&d instanceof Error){let x=r.currentTask&&r.currentTask.data&&r.currentTask.data[S];x&&i(d,dt,{configurable:!0,enumerable:!1,writable:!0,value:x})}for(let x=0;x<k.length;)_(R,k[x++],k[x++],k[x++],k[x++]);if(k.length==0&&g==w){R[E]=I;let x=d;try{throw new Error("Uncaught (in promise): "+s(d)+(d&&d.stack?`
`+d.stack:""))}catch(V){x=V}u&&(x.throwOriginal=!0),x.rejection=d,x.promise=R,x.zone=r.current,x.task=r.currentTask,c.push(x),n.scheduleMicroTask()}}}return R}let q=a("rejectionHandledHandler");function h(R){if(R[E]===I){try{let g=r[q];g&&typeof g=="function"&&g.call(this,{rejection:R[T],promise:R})}catch(g){}R[E]=w;for(let g=0;g<c.length;g++)R===c[g].promise&&c.splice(g,1)}}function _(R,g,d,A,L){h(R);let k=R[E],x=k?typeof A=="function"?A:J:typeof L=="function"?L:K;g.scheduleMicroTask(W,()=>{try{let V=R[T],F=!!d&&O===d[O];F&&(d[v]=V,d[z]=k);let j=g.run(x,void 0,F&&x!==K&&x!==J?[]:[V]);tt(d,!0,j)}catch(V){tt(d,!1,V)}},d)}let f="function ZoneAwarePromise() { [native code] }",C=function(){},Q=e.AggregateError;class ${static toString(){return f}static resolve(g){return g instanceof $?g:tt(new this(null),et,g)}static reject(g){return tt(new this(null),w,g)}static withResolvers(){let g={};return g.promise=new $((d,A)=>{g.resolve=d,g.reject=A}),g}static any(g){if(!g||typeof g[Symbol.iterator]!="function")return Promise.reject(new Q([],"All promises were rejected"));let d=[],A=0;try{for(let x of g)A++,d.push($.resolve(x))}catch(x){return Promise.reject(new Q([],"All promises were rejected"))}if(A===0)return Promise.reject(new Q([],"All promises were rejected"));let L=!1,k=[];return new $((x,V)=>{for(let F=0;F<d.length;F++)d[F].then(j=>{L||(L=!0,x(j))},j=>{k.push(j),A--,A===0&&(L=!0,V(new Q(k,"All promises were rejected")))})})}static race(g){let d,A,L=new this((V,F)=>{d=V,A=F});function k(V){d(V)}function x(V){A(V)}for(let V of g)U(V)||(V=this.resolve(V)),V.then(k,x);return L}static all(g){return $.allWithCallback(g)}static allSettled(g){return(this&&this.prototype instanceof $?this:$).allWithCallback(g,{thenCallback:A=>({status:"fulfilled",value:A}),errorCallback:A=>({status:"rejected",reason:A})})}static allWithCallback(g,d){let A,L,k=new this((j,rt)=>{A=j,L=rt}),x=2,V=0,F=[];for(let j of g){U(j)||(j=this.resolve(j));let rt=V;try{j.then(nt=>{F[rt]=d?d.thenCallback(nt):nt,x--,x===0&&A(F)},nt=>{d?(F[rt]=d.errorCallback(nt),x--,x===0&&A(F)):L(nt)})}catch(nt){L(nt)}x++,V++}return x-=2,x===0&&A(F),k}constructor(g){let d=this;if(!(d instanceof $))throw new Error("Must be an instanceof Promise.");d[E]=N,d[T]=[];try{let A=P();g&&g(A(H(d,et)),A(H(d,w)))}catch(A){tt(d,!1,A)}}get[Symbol.toStringTag](){return"Promise"}get[Symbol.species](){return $}then(g,d){var A;let L=(A=this.constructor)==null?void 0:A[Symbol.species];(!L||typeof L!="function")&&(L=this.constructor||$);let k=new L(C),x=r.current;return this[E]==N?this[T].push(x,k,g,d):_(this,x,k,g,d),k}catch(g){return this.then(null,g)}finally(g){var d;let A=(d=this.constructor)==null?void 0:d[Symbol.species];(!A||typeof A!="function")&&(A=$);let L=new A(C);L[O]=O;let k=r.current;return this[E]==N?this[T].push(k,L,g,g):_(this,k,L,g,g),L}}$.resolve=$.resolve,$.reject=$.reject,$.race=$.race,$.all=$.all;let Ct=e[l]=e.Promise;e.Promise=$;let Bt=a("thenPatched");function Vt(R){let g=R.prototype,d=o(g,"then");if(d&&(d.writable===!1||!d.configurable))return;let A=g.then;g[m]=A,R.prototype.then=function(L,k){return new $((V,F)=>{A.call(this,V,F)}).then(L,k)},R[Bt]=!0}n.patchThen=Vt;function bt(R){return function(g,d){let A=R.apply(g,d);if(A instanceof $)return A;let L=A.constructor;return L[Bt]||Vt(L),A}}return Ct&&(Vt(Ct),Xt(e,"fetch",R=>bt(R))),Promise[r.__symbol__("uncaughtPromiseErrors")]=c,$})}function tl(t){t.__load_patch("toString",e=>{let r=Function.prototype.toString,n=Y("OriginalDelegate"),o=Y("Promise"),i=Y("Error"),s=function(){if(typeof this=="function"){let l=this[n];if(l)return typeof l=="function"?r.call(l):Object.prototype.toString.call(l);if(this===Promise){let m=e[o];if(m)return r.call(m)}if(this===Error){let m=e[i];if(m)return r.call(m)}}return r.call(this)};s[n]=r,Function.prototype.toString=s;let a=Object.prototype.toString,c="[object Promise]";Object.prototype.toString=function(){return typeof Promise=="function"&&this instanceof Promise?c:a.call(this)}})}function el(t,e,r,n,o){let i=Zone.__symbol__(n);if(e[i])return;let s=e[i]=e[n];e[n]=function(a,c,u){return c&&c.prototype&&o.forEach(function(l){let m=`${r}.${n}::`+l,S=c.prototype;try{if(S.hasOwnProperty(l)){let y=t.ObjectGetOwnPropertyDescriptor(S,l);y&&y.value?(y.value=t.wrapWithCurrentZone(y.value,m),t._redefineProperty(c.prototype,l,y)):S[l]&&(S[l]=t.wrapWithCurrentZone(S[l],m))}else S[l]&&(S[l]=t.wrapWithCurrentZone(S[l],m))}catch(y){}}),s.call(e,a,c,u)},t.attachOriginToPatched(e[n],s)}function rl(t){t.__load_patch("util",(e,r,n)=>{let o=Jn(e);n.patchOnProperties=ms,n.patchMethod=Xt,n.bindArguments=so,n.patchMacroTask=ju;let i=r.__symbol__("BLACK_LISTED_EVENTS"),s=r.__symbol__("UNPATCHED_EVENTS");e[s]&&(e[i]=e[s]),e[i]&&(r[i]=r[s]=e[i]),n.patchEventPrototype=Ku,n.patchEventTarget=Zu,n.ObjectDefineProperty=to,n.ObjectGetOwnPropertyDescriptor=rr,n.ObjectCreate=ku,n.ArraySlice=Uu,n.patchClass=er,n.wrapWithCurrentZone=oo,n.filterProperties=Rs,n.attachOriginToPatched=Yt,n._redefineProperty=Object.defineProperty,n.patchCallbacks=el,n.getGlobalObjects=()=>({globalSources:Ts,zoneSymbolEventNames:vt,eventNames:o,isBrowser:ao,isMix:ds,isNode:pn,TRUE_STR:Wt,FALSE_STR:$t,ZONE_SYMBOL_PREFIX:nr,ADD_EVENT_LISTENER_STR:ro,REMOVE_EVENT_LISTENER_STR:no})})}function nl(t){Ju(t),tl(t),rl(t)}var ys=Mu();nl(ys);Qu(ys);var or=class{emit(e){}},vs=new or;var ir=Symbol.for("io.opentelemetry.js.api.logs"),Le=globalThis;function Os(t,e,r){return n=>n===t?e:r}var co=1;var uo=class{getLogger(e,r,n){return new or}},fn=new uo;var _n=class{constructor(e,r,n,o){this._provider=e,this.name=r,this.version=n,this.options=o}emit(e){this._getLogger().emit(e)}_getLogger(){if(this._delegate)return this._delegate;let e=this._provider._getDelegateLogger(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):vs}};var sr=class{getLogger(e,r,n){var o;return(o=this._getDelegateLogger(e,r,n))!==null&&o!==void 0?o:new _n(this,e,r,n)}_getDelegate(){var e;return(e=this._delegate)!==null&&e!==void 0?e:fn}_setDelegate(e){this._delegate=e}_getDelegateLogger(e,r,n){var o;return(o=this._delegate)===null||o===void 0?void 0:o.getLogger(e,r,n)}};var hn=class t{constructor(){this._proxyLoggerProvider=new sr}static getInstance(){return this._instance||(this._instance=new t),this._instance}setGlobalLoggerProvider(e){return Le[ir]?this.getLoggerProvider():(Le[ir]=Os(co,e,fn),this._proxyLoggerProvider._setDelegate(e),e)}getLoggerProvider(){var e,r;return(r=(e=Le[ir])===null||e===void 0?void 0:e.call(Le,co))!==null&&r!==void 0?r:this._proxyLoggerProvider}getLogger(e,r,n){return this.getLoggerProvider().getLogger(e,r,n)}disable(){delete Le[ir],this._proxyLoggerProvider=new sr}};var dn=hn.getInstance();function bs(t,e,r,n){for(let o=0,i=t.length;o<i;o++){let s=t[o];e&&s.setTracerProvider(e),r&&s.setMeterProvider(r),n&&s.setLoggerProvider&&s.setLoggerProvider(n),s.getConfig().enabled||s.enable()}}function Ns(t){t.forEach(e=>e.disable())}function lo(t){var i,s;let e=t.tracerProvider||Z.getTracerProvider(),r=t.meterProvider||Ge.getMeterProvider(),n=t.loggerProvider||dn.getLoggerProvider(),o=(s=(i=t.instrumentations)==null?void 0:i.flat())!=null?s:[];return bs(o,e,r,n),()=>{Ns(o)}}var ht=console.error.bind(console);function ar(t,e,r){let n=!!t[e]&&Object.prototype.propertyIsEnumerable.call(t,e);Object.defineProperty(t,e,{configurable:!0,enumerable:n,writable:!0,value:r})}var mn=(t,e,r)=>{if(!t||!t[e]){ht("no original function "+String(e)+" to wrap");return}if(!r){ht("no wrapper function"),ht(new Error().stack);return}let n=t[e];if(typeof n!="function"||typeof r!="function"){ht("original object and wrapper must be functions");return}let o=r(n,e);return ar(o,"__original",n),ar(o,"__unwrap",()=>{t[e]===o&&ar(t,e,n)}),ar(o,"__wrapped",!0),ar(t,e,o),o},po=(t,e,r)=>{if(t)Array.isArray(t)||(t=[t]);else{ht("must provide one or more modules to patch"),ht(new Error().stack);return}if(!(e&&Array.isArray(e))){ht("must provide one or more functions to wrap on modules");return}t.forEach(n=>{e.forEach(o=>{mn(n,o,r)})})},Tn=(t,e)=>{if(!t||!t[e]){ht("no function to unwrap."),ht(new Error().stack);return}let r=t[e];if(!r.__unwrap)ht("no original to unwrap to -- has "+String(e)+" already been unwrapped?");else{r.__unwrap();return}},fo=(t,e)=>{if(t)Array.isArray(t)||(t=[t]);else{ht("must provide one or more modules to patch"),ht(new Error().stack);return}if(!(e&&Array.isArray(e))){ht("must provide one or more functions to unwrap on modules");return}t.forEach(r=>{e.forEach(n=>{Tn(r,n)})})};function cr(t){t&&t.logger&&(typeof t.logger!="function"?ht("new logger isn't a function, not replacing"):ht=t.logger)}cr.wrap=mn;cr.massWrap=po;cr.unwrap=Tn;cr.massUnwrap=fo;var En=class{constructor(e,r,n){p(this,"_config",{});p(this,"_tracer");p(this,"_meter");p(this,"_logger");p(this,"_diag");p(this,"instrumentationName");p(this,"instrumentationVersion");p(this,"_wrap",mn);p(this,"_unwrap",Tn);p(this,"_massWrap",po);p(this,"_massUnwrap",fo);this.instrumentationName=e,this.instrumentationVersion=r,this.setConfig(n),this._diag=b.createComponentLogger({namespace:e}),this._tracer=Z.getTracer(e,r),this._meter=Ge.getMeter(e,r),this._logger=dn.getLogger(e,r),this._updateMetricInstruments()}get meter(){return this._meter}setMeterProvider(e){this._meter=e.getMeter(this.instrumentationName,this.instrumentationVersion),this._updateMetricInstruments()}get logger(){return this._logger}setLoggerProvider(e){this._logger=e.getLogger(this.instrumentationName,this.instrumentationVersion)}getModuleDefinitions(){var r;let e=(r=this.init())!=null?r:[];return Array.isArray(e)?e:[e]}_updateMetricInstruments(){}getConfig(){return this._config}setConfig(e){this._config={enabled:!0,...e}}setTracerProvider(e){this._tracer=e.getTracer(this.instrumentationName,this.instrumentationVersion)}get tracer(){return this._tracer}_runSpanCustomizationHook(e,r,n,o){if(e)try{e(n,o)}catch(i){this._diag.error("Error running span customization hook due to exception in handler",{triggerName:r},i)}}};var Ot=class extends En{constructor(e,r,n){super(e,r,n),this._config.enabled&&this.enable()}};function qt(t,e,r){let n,o;try{o=t()}catch(i){n=i}finally{if(e(n,o),n&&!r)throw n;return o}}function ot(t){return typeof t=="function"&&typeof t.__original=="function"&&typeof t.__unwrap=="function"&&t.__wrapped===!0}var X;(function(t){t[t.STABLE=1]="STABLE",t[t.OLD=2]="OLD",t[t.DUPLICATE=3]="DUPLICATE"})(X||(X={}));function Ee(t,e){let r=X.OLD,n=e==null?void 0:e.split(",").map(o=>o.trim()).filter(o=>o!=="");for(let o of n!=null?n:[])if(o.toLowerCase()===t+"/dup"){r=X.DUPLICATE;break}else o.toLowerCase()===t&&(r=X.STABLE);return r}var ge;(function(t){t.DOCUMENT_LOAD="documentLoad",t.DOCUMENT_FETCH="documentFetch",t.RESOURCE_FETCH="resourceFetch"})(ge||(ge={}));var Ps="0.57.0",xs="@opentelemetry/instrumentation-document-load";var gn="http.url",Ls="http.user_agent";var ur;(function(t){t.FIRST_PAINT="firstPaint",t.FIRST_CONTENTFUL_PAINT="firstContentfulPaint"})(ur||(ur={}));var ws=()=>{var r,n;let t={},e=(n=(r=at).getEntriesByType)==null?void 0:n.call(r,"navigation")[0];if(e)Object.values(D).forEach(i=>{if(Kt(e,i)){let s=e[i];typeof s=="number"&&(t[i]=s)}});else{let i=at.timing;i&&Object.values(D).forEach(a=>{if(Kt(i,a)){let c=i[a];typeof c=="number"&&(t[a]=c)}})}return t},Cs={"first-paint":ur.FIRST_PAINT,"first-contentful-paint":ur.FIRST_CONTENTFUL_PAINT},Is=t=>{var r,n;let e=(n=(r=at).getEntriesByType)==null?void 0:n.call(r,"paint");e&&e.forEach(({name:o,startTime:i})=>{Kt(Cs,o)&&t.addEvent(Cs[o],i)})};var lr=class extends Ot{constructor(r={}){super(xs,Ps,r);p(this,"component","document-load");p(this,"version","1");p(this,"moduleName",this.component);p(this,"_semconvStability");this._semconvStability=Ee("http",r==null?void 0:r.semconvStabilityOptIn)}init(){}_onDocumentLoaded(){window.setTimeout(()=>{this._collectPerformance()})}_addResourcesSpans(r){var o,i;let n=(i=(o=at).getEntriesByType)==null?void 0:i.call(o,"resource");n&&n.forEach(s=>{this._initResourceSpan(s,r)})}_collectPerformance(){let r=Array.from(document.getElementsByTagName("meta")).find(i=>i.getAttribute("name")===ve),n=ws(),o=r&&r.content||"";G.with(st.extract(ft,{traceparent:o}),()=>{var s;let i=this._startSpan(ge.DOCUMENT_LOAD,D.FETCH_START,n);i&&(G.with(Z.setSpan(G.active(),i),()=>{let a=this._startSpan(ge.DOCUMENT_FETCH,D.FETCH_START,n);a&&(this._semconvStability&X.OLD&&a.setAttribute(gn,location.href),this._semconvStability&X.STABLE&&a.setAttribute(ee,location.href),G.with(Z.setSpan(G.active(),a),()=>{var u;let c=!(this._semconvStability&X.OLD);Ut(a,n,this.getConfig().ignoreNetworkEvents,void 0,c),this._addCustomAttributesOnSpan(a,(u=this.getConfig().applyCustomAttributesOnSpan)==null?void 0:u.documentFetch),this._endSpan(a,D.RESPONSE_END,n)}))}),this._semconvStability&X.OLD&&(i.setAttribute(gn,location.href),i.setAttribute(Ls,navigator.userAgent)),this._semconvStability&X.STABLE&&(i.setAttribute(ee,location.href),i.setAttribute(Pi,navigator.userAgent)),this._addResourcesSpans(i),this.getConfig().ignoreNetworkEvents||(it(i,D.FETCH_START,n),it(i,D.UNLOAD_EVENT_START,n),it(i,D.UNLOAD_EVENT_END,n),it(i,D.DOM_INTERACTIVE,n),it(i,D.DOM_CONTENT_LOADED_EVENT_START,n),it(i,D.DOM_CONTENT_LOADED_EVENT_END,n),it(i,D.DOM_COMPLETE,n),it(i,D.LOAD_EVENT_START,n),it(i,D.LOAD_EVENT_END,n)),this.getConfig().ignorePerformancePaintEvents||Is(i),this._addCustomAttributesOnSpan(i,(s=this.getConfig().applyCustomAttributesOnSpan)==null?void 0:s.documentLoad),this._endSpan(i,D.LOAD_EVENT_END,n))})}_endSpan(r,n,o){r&&(Kt(o,n)?r.end(o[n]):r.end())}_initResourceSpan(r,n){var i;let o=this._startSpan(ge.RESOURCE_FETCH,D.FETCH_START,r,n);if(o){this._semconvStability&X.OLD&&o.setAttribute(gn,r.name),this._semconvStability&X.STABLE&&o.setAttribute(ee,r.name);let s=!(this._semconvStability&X.OLD);Ut(o,r,this.getConfig().ignoreNetworkEvents,void 0,s),this._addCustomAttributesOnResourceSpan(o,r,(i=this.getConfig().applyCustomAttributesOnSpan)==null?void 0:i.resourceFetch),this._endSpan(o,D.RESPONSE_END,r)}}_startSpan(r,n,o,i){if(Kt(o,n)&&typeof o[n]=="number")return this.tracer.startSpan(r,{startTime:o[n]},i?Z.setSpan(G.active(),i):void 0)}_waitForPageLoad(){window.document.readyState==="complete"?this._onDocumentLoaded():(this._onDocumentLoaded=this._onDocumentLoaded.bind(this),window.addEventListener("load",this._onDocumentLoaded))}_addCustomAttributesOnSpan(r,n){n&&qt(()=>n(r),o=>{o&&this._diag.error("addCustomAttributesOnSpan",o)},!0)}_addCustomAttributesOnResourceSpan(r,n,o){o&&qt(()=>o(r,n),i=>{i&&this._diag.error("addCustomAttributesOnResourceSpan",i)},!0)}enable(){window.removeEventListener("load",this._onDocumentLoaded),this._waitForPageLoad()}disable(){window.removeEventListener("load",this._onDocumentLoaded)}};var Se;(function(t){t.EVENT_TYPE="event_type",t.TARGET_ELEMENT="target_element",t.TARGET_XPATH="target_xpath",t.HTTP_URL="http.url"})(Se||(Se={}));var _o="0.56.0",Ds="@opentelemetry/instrumentation-user-interaction";var il="OT_ZONE_CONTEXT",sl="Navigation:",al=["click"];function cl(){return!1}var pr=class extends Ot{constructor(r={}){var n;super(Ds,_o,r);p(this,"version",_o);p(this,"moduleName","user-interaction");p(this,"_spansData",new WeakMap);p(this,"_wrappedListeners",new WeakMap);p(this,"_eventsSpanMap",new WeakMap);p(this,"_eventNames");p(this,"_shouldPreventSpanCreation");this._eventNames=new Set((n=r==null?void 0:r.eventNames)!=null?n:al),this._shouldPreventSpanCreation=typeof(r==null?void 0:r.shouldPreventSpanCreation)=="function"?r.shouldPreventSpanCreation:cl}init(){}_checkForTimeout(r,n){let o=this._spansData.get(n);o&&(r.source==="setTimeout"?o.hrTimeLastTimeout=St():r.source!=="Promise.then"&&r.source!=="setTimeout"&&(o.hrTimeLastTimeout=void 0))}_allowEventName(r){return this._eventNames.has(r)}_createSpan(r,n,o){if(!(r instanceof HTMLElement)||!r.getAttribute||r.hasAttribute("disabled")||!this._allowEventName(n))return;let i=sn(r,!0);try{let s=this.tracer.startSpan(n,{attributes:{[Se.EVENT_TYPE]:n,[Se.TARGET_ELEMENT]:r.tagName,[Se.TARGET_XPATH]:i,[Se.HTTP_URL]:window.location.href}},o?Z.setSpan(G.active(),o):void 0);return this._shouldPreventSpanCreation(n,r,s)===!0?void 0:(this._spansData.set(s,{taskCount:0}),s)}catch(s){this._diag.error("failed to start create new user interaction span",s)}}_decrementTask(r){let n=this._spansData.get(r);n&&(n.taskCount--,n.taskCount===0&&this._tryToEndSpan(r,n.hrTimeLastTimeout))}_getCurrentSpan(r){let n=r.get(il);return n&&Z.getSpan(n)}_incrementTask(r){let n=this._spansData.get(r);n&&n.taskCount++}addPatchedListener(r,n,o,i){let s=this._wrappedListeners.get(o);s||(s=new Map,this._wrappedListeners.set(o,s));let a=s.get(n);return a||(a=new Map,s.set(n,a)),a.has(r)?!1:(a.set(r,i),!0)}removePatchedListener(r,n,o){let i=this._wrappedListeners.get(o);if(!i)return;let s=i.get(n);if(!s)return;let a=s.get(r);return a&&(s.delete(r),s.size===0&&(i.delete(n),i.size===0&&this._wrappedListeners.delete(o))),a}_invokeListener(r,n,o){return typeof r=="function"?r.apply(n,o):r.handleEvent(o[0])}_patchAddEventListener(){let r=this;return n=>function(i,s,a){if(!s)return n.call(this,i,s,a);let c=a&&typeof a=="object"&&a.once,u=function(...l){let m,S=l[0],y=S==null?void 0:S.target;S&&(m=r._eventsSpanMap.get(S)),c&&r.removePatchedListener(this,i,s);let M=r._createSpan(y,i,m);return M?(S&&r._eventsSpanMap.set(S,M),G.with(Z.setSpan(G.active(),M),()=>{let U=r._invokeListener(s,this,l);return M.end(),U})):r._invokeListener(s,this,l)};if(r.addPatchedListener(this,i,s,u))return n.call(this,i,u,a)}}_patchRemoveEventListener(){let r=this;return n=>function(i,s,a){let c=r.removePatchedListener(this,i,s);return c?n.call(this,i,c,a):n.call(this,i,s,a)}}_getPatchableEventTargets(){return window.EventTarget?[EventTarget.prototype]:[Node.prototype,Window.prototype]}_patchHistoryApi(){this._unpatchHistoryApi(),this._wrap(history,"replaceState",this._patchHistoryMethod()),this._wrap(history,"pushState",this._patchHistoryMethod()),this._wrap(history,"back",this._patchHistoryMethod()),this._wrap(history,"forward",this._patchHistoryMethod()),this._wrap(history,"go",this._patchHistoryMethod())}_patchHistoryMethod(){let r=this;return n=>function(...i){let s=`${location.pathname}${location.hash}${location.search}`,a=n.apply(this,i),c=`${location.pathname}${location.hash}${location.search}`;return s!==c&&r._updateInteractionName(c),a}}_unpatchHistoryApi(){ot(history.replaceState)&&this._unwrap(history,"replaceState"),ot(history.pushState)&&this._unwrap(history,"pushState"),ot(history.back)&&this._unwrap(history,"back"),ot(history.forward)&&this._unwrap(history,"forward"),ot(history.go)&&this._unwrap(history,"go")}_updateInteractionName(r){let n=Z.getSpan(G.active());n&&typeof n.updateName=="function"&&n.updateName(`${sl} ${r}`)}_patchZoneCancelTask(){let r=this;return n=>function(i){let s=Zone.current,a=r._getCurrentSpan(s);return a&&r._shouldCountTask(i,s)&&r._decrementTask(a),n.call(this,i)}}_patchZoneScheduleTask(){let r=this;return n=>function(i){let s=Zone.current,a=r._getCurrentSpan(s);return a&&r._shouldCountTask(i,s)&&(r._incrementTask(a),r._checkForTimeout(i,a)),n.call(this,i)}}_patchZoneRunTask(){let r=this;return n=>function(i,s,a){let c=Array.isArray(a)&&a[0]instanceof Event?a[0]:void 0,u=c==null?void 0:c.target,l,m=this;if(u){if(l=r._createSpan(u,i.eventName),l)return r._incrementTask(l),m.run(()=>{try{return G.with(Z.setSpan(G.active(),l),()=>{let S=Zone.current;return i._zone=S,n.call(S,i,s,a)})}finally{r._decrementTask(l)}})}else l=r._getCurrentSpan(m);try{return n.call(m,i,s,a)}finally{l&&r._shouldCountTask(i,m)&&r._decrementTask(l)}}}_shouldCountTask(r,n){if(r._zone&&(n=r._zone),!n||!r.data||r.data.isPeriodic)return!1;let o=this._getCurrentSpan(n);return!o||!this._spansData.get(o)?!1:r.type==="macroTask"||r.type==="microTask"}_tryToEndSpan(r,n){r&&this._spansData.get(r)&&(r.end(n),this._spansData.delete(r))}enable(){let r=this._getZoneWithPrototype();this._diag.debug("applying patch to",this.moduleName,this.version,"zone:",!!r),r?(ot(r.prototype.runTask)&&(this._unwrap(r.prototype,"runTask"),this._diag.debug("removing previous patch from method runTask")),ot(r.prototype.scheduleTask)&&(this._unwrap(r.prototype,"scheduleTask"),this._diag.debug("removing previous patch from method scheduleTask")),ot(r.prototype.cancelTask)&&(this._unwrap(r.prototype,"cancelTask"),this._diag.debug("removing previous patch from method cancelTask")),this._zonePatched=!0,this._wrap(r.prototype,"runTask",this._patchZoneRunTask()),this._wrap(r.prototype,"scheduleTask",this._patchZoneScheduleTask()),this._wrap(r.prototype,"cancelTask",this._patchZoneCancelTask())):(this._zonePatched=!1,this._getPatchableEventTargets().forEach(o=>{ot(o.addEventListener)&&(this._unwrap(o,"addEventListener"),this._diag.debug("removing previous patch from method addEventListener")),ot(o.removeEventListener)&&(this._unwrap(o,"removeEventListener"),this._diag.debug("removing previous patch from method removeEventListener")),this._wrap(o,"addEventListener",this._patchAddEventListener()),this._wrap(o,"removeEventListener",this._patchRemoveEventListener())})),this._patchHistoryApi()}disable(){let r=this._getZoneWithPrototype();this._diag.debug("removing patch from",this.moduleName,this.version,"zone:",!!r),r&&this._zonePatched?(ot(r.prototype.runTask)&&this._unwrap(r.prototype,"runTask"),ot(r.prototype.scheduleTask)&&this._unwrap(r.prototype,"scheduleTask"),ot(r.prototype.cancelTask)&&this._unwrap(r.prototype,"cancelTask")):this._getPatchableEventTargets().forEach(o=>{ot(o.addEventListener)&&this._unwrap(o,"addEventListener"),ot(o.removeEventListener)&&this._unwrap(o,"removeEventListener")}),this._unpatchHistoryApi()}_getZoneWithPrototype(){return window.Zone}};var Ms="http.host",ks="http.method",Us="http.request.body.size",Hs="http.request_content_length_uncompressed";var Gs="http.scheme",Bs="http.status_code",Vs="http.url",Fs="http.user_agent";var Gt;(function(t){t.METHOD_OPEN="open",t.METHOD_SEND="send",t.EVENT_ABORT="abort",t.EVENT_ERROR="error",t.EVENT_LOAD="loaded",t.EVENT_TIMEOUT="timeout"})(Gt||(Gt={}));var ul=b.createComponentLogger({namespace:"@opentelemetry/opentelemetry-instrumentation-xml-http-request/utils"});function ll(t){return typeof Document!="undefined"&&t instanceof Document}function zs(t){if(ll(t))return new XMLSerializer().serializeToString(document).length;if(typeof t=="string")return js(t);if(t instanceof Blob)return t.size;if(t instanceof FormData)return fl(t);if(t instanceof URLSearchParams)return js(t.toString());if(t.byteLength!==void 0)return t.byteLength;ul.warn("unknown body type")}var pl=new TextEncoder;function js(t){return pl.encode(t).byteLength}function fl(t){let e=0;for(let[r,n]of t.entries())e+=r.length,n instanceof Blob?e+=n.size:e+=n.length;return e}function Zs(t){let e=hl(),r=t.toUpperCase();return r in e?r:"_OTHER"}var _l={CONNECT:!0,DELETE:!0,GET:!0,HEAD:!0,OPTIONS:!0,PATCH:!0,POST:!0,PUT:!0,TRACE:!0,QUERY:!0},fr;function hl(){if(fr===void 0){let t=void 0;t&&t.length>0?(fr={},t.forEach(e=>{fr[e]=!0})):fr=_l}return fr}var dl={"https:":"443","http:":"80"};function Ks(t){let e=Number(t.port||dl[t.protocol]);if(e&&!isNaN(e))return e}var ho="0.212.0";var Sn;(function(t){t.HTTP_STATUS_TEXT="http.status_text"})(Sn||(Sn={}));var ml=300,_r=class extends Ot{constructor(r={}){super("@opentelemetry/instrumentation-xml-http-request",ho,r);p(this,"component","xml-http-request");p(this,"version",ho);p(this,"moduleName",this.component);p(this,"_tasksCount",0);p(this,"_xhrMem",new WeakMap);p(this,"_usedResources",new WeakSet);p(this,"_semconvStability");this._semconvStability=Ee("http",r==null?void 0:r.semconvStabilityOptIn)}init(){}_addHeaders(r,n){let o=Rt(n).href;if(!tr(o,this.getConfig().propagateTraceHeaderCorsUrls)){let s={};st.inject(G.active(),s),Object.keys(s).length>0&&this._diag.debug("headers inject skipped due to CORS policy");return}let i={};st.inject(G.active(),i),Object.keys(i).forEach(s=>{r.setRequestHeader(s,String(i[s]))})}_addChildSpan(r,n){G.with(Z.setSpan(G.active(),r),()=>{let o=this.tracer.startSpan("CORS Preflight",{startTime:n[D.FETCH_START]}),i=!(this._semconvStability&X.OLD);Ut(o,n,this.getConfig().ignoreNetworkEvents,void 0,i),o.end(n[D.RESPONSE_END])})}_addFinalSpanAttributes(r,n,o){if(this._semconvStability&X.OLD){if(n.status!==void 0&&r.setAttribute(Bs,n.status),n.statusText!==void 0&&r.setAttribute(Sn.HTTP_STATUS_TEXT,n.statusText),typeof o=="string"){let i=Rt(o);r.setAttribute(Ms,i.host),r.setAttribute(Gs,i.protocol.replace(":",""))}r.setAttribute(Fs,navigator.userAgent)}this._semconvStability&X.STABLE&&n.status&&r.setAttribute(Ur,n.status)}_applyAttributesAfterXHR(r,n){let o=this.getConfig().applyCustomAttributesOnSpan;typeof o=="function"&&qt(()=>o(r,n),i=>{i&&this._diag.error("applyCustomAttributesOnSpan",i)},!0)}_addResourceObserver(r,n){let o=this._xhrMem.get(r);!o||typeof PerformanceObserver!="function"||typeof PerformanceResourceTiming!="function"||(o.createdResources={observer:new PerformanceObserver(i=>{let s=i.getEntries(),a=Rt(n);s.forEach(c=>{c.initiatorType==="xmlhttprequest"&&c.name===a.href&&o.createdResources&&o.createdResources.entries.push(c)})}),entries:[]},o.createdResources.observer.observe({entryTypes:["resource"]}))}_clearResources(){this._tasksCount===0&&this.getConfig().clearTimingResources&&(at.clearResourceTimings(),this._xhrMem=new WeakMap,this._usedResources=new WeakSet)}_findResourceAndAddNetworkEvents(r,n,o,i,s){if(!o||!i||!s||!r.createdResources)return;let a=r.createdResources.entries;(!a||!a.length)&&(a=at.getEntriesByType("resource"));let c=Je(Rt(o).href,i,s,a,this._usedResources);if(c.mainRequest){let u=c.mainRequest;this._markResourceAsUsed(u);let l=c.corsPreFlightRequest;l&&(this._addChildSpan(n,l),this._markResourceAsUsed(l));let m=!(this._semconvStability&X.OLD);Ut(n,u,this.getConfig().ignoreNetworkEvents,void 0,m)}}_cleanPreviousSpanInformation(r){let n=this._xhrMem.get(r);if(n){let o=n.callbackToRemoveEvents;o&&o(),this._xhrMem.delete(r)}}_createSpan(r,n,o){if(We(n,this.getConfig().ignoreUrls)){this._diag.debug("ignoring span as url matches ignored url");return}let i="",s=Rt(n),a={};if(this._semconvStability&X.OLD&&(i=o.toUpperCase(),a[ks]=o,a[Vs]=s.toString()),this._semconvStability&X.STABLE){let u=o,l=Zs(o);i||(i=l),a[Mr]=l,l!==u&&(a[kr]=u),a[ee]=s.toString(),a[Hr]=s.hostname;let m=Ks(s);m&&(a[Gr]=m)}let c=this.tracer.startSpan(i,{kind:zt.CLIENT,attributes:a});return c.addEvent(Gt.METHOD_OPEN),this._cleanPreviousSpanInformation(r),this._xhrMem.set(r,{span:c,spanUrl:n}),c}_markResourceAsUsed(r){this._usedResources.add(r)}_patchOpen(){return r=>{let n=this;return function(...i){let s=i[0],a=i[1];return n._createSpan(this,a,s),r.apply(this,i)}}}_patchSend(){let r=this;function n(l,m,S,y){let M=m.callbackToRemoveEvents;typeof M=="function"&&M();let{span:U,spanUrl:J,sendStartTime:K}=m;U&&(r._findResourceAndAddNetworkEvents(m,U,J,K,S),U.addEvent(l,y),r._addFinalSpanAttributes(U,m,J),U.end(y),r._tasksCount--),r._clearResources()}function o(l,m,S,y){let M=r._xhrMem.get(m);if(!M)return;if(M.status=m.status,M.statusText=m.statusText,r._xhrMem.delete(m),M.span){let K=M.span;r._applyAttributesAfterXHR(K,m),r._semconvStability&X.STABLE&&(S?y&&(K.setStatus({code:Tt.ERROR,message:y}),K.setAttribute(Ve,y)):M.status&&M.status>=400&&(K.setStatus({code:Tt.ERROR}),K.setAttribute(Ve,String(M.status))))}let U=St(),J=Date.now();setTimeout(()=>{n(l,M,U,J)},ml)}function i(){o(Gt.EVENT_ERROR,this,!0,"error")}function s(){o(Gt.EVENT_ABORT,this,!1)}function a(){o(Gt.EVENT_TIMEOUT,this,!0,"timeout")}function c(){this.status<299?o(Gt.EVENT_LOAD,this,!1):o(Gt.EVENT_ERROR,this,!1)}function u(l){l.removeEventListener("abort",s),l.removeEventListener("error",i),l.removeEventListener("load",c),l.removeEventListener("timeout",a);let m=r._xhrMem.get(l);m&&(m.callbackToRemoveEvents=void 0)}return l=>function(...S){let y=r._xhrMem.get(this);if(!y)return l.apply(this,S);let M=y.span,U=y.spanUrl;if(M&&U){if(r.getConfig().measureRequestSize&&(S!=null&&S[0])){let J=S[0],K=zs(J);K!==void 0&&(r._semconvStability&X.OLD&&M.setAttribute(Hs,K),r._semconvStability&X.STABLE&&M.setAttribute(Us,K))}G.with(Z.setSpan(G.active(),M),()=>{r._tasksCount++,y.sendStartTime=St(),M.addEvent(Gt.METHOD_SEND),this.addEventListener("abort",s),this.addEventListener("error",i),this.addEventListener("load",c),this.addEventListener("timeout",a),y.callbackToRemoveEvents=()=>{u(this),y.createdResources&&y.createdResources.observer.disconnect()},r._addHeaders(this,U),r._addResourceObserver(this,U)})}return l.apply(this,S)}}enable(){this._diag.debug("applying patch to",this.moduleName,this.version),ot(XMLHttpRequest.prototype.open)&&(this._unwrap(XMLHttpRequest.prototype,"open"),this._diag.debug("removing previous patch from method open")),ot(XMLHttpRequest.prototype.send)&&(this._unwrap(XMLHttpRequest.prototype,"send"),this._diag.debug("removing previous patch from method send")),this._wrap(XMLHttpRequest.prototype,"open",this._patchOpen()),this._wrap(XMLHttpRequest.prototype,"send",this._patchSend())}disable(){this._diag.debug("removing patch from",this.moduleName,this.version),this._unwrap(XMLHttpRequest.prototype,"open"),this._unwrap(XMLHttpRequest.prototype,"send"),this._tasksCount=0,this._xhrMem=new WeakMap,this._usedResources=new WeakSet}};var hr=class{constructor(e){p(this,"_delegate");this._delegate=e}export(e,r){this._delegate.export(e,r)}forceFlush(){return this._delegate.forceFlush()}shutdown(){return this._delegate.shutdown()}};var dr=class extends Error{constructor(r,n,o){super(r);p(this,"code");p(this,"name","OTLPExporterError");p(this,"data");this.data=o,this.code=n}};function Tl(t){if(Number.isFinite(t)&&t>0)return t;throw new Error(`Configuration: timeoutMillis is invalid, expected number greater than 0 (actual: '${t}')`)}function Ws(t){if(t!=null)return async()=>t}function $s(t,e,r){var n,o,i,s,a,c;return{timeoutMillis:Tl((o=(n=t.timeoutMillis)!=null?n:e.timeoutMillis)!=null?o:r.timeoutMillis),concurrencyLimit:(s=(i=t.concurrencyLimit)!=null?i:e.concurrencyLimit)!=null?s:r.concurrencyLimit,compression:(c=(a=t.compression)!=null?a:e.compression)!=null?c:r.compression}}function Xs(){return{timeoutMillis:1e4,concurrencyLimit:30,compression:"none"}}var mo=class{constructor(e){p(this,"_concurrencyLimit");p(this,"_sendingPromises",[]);this._concurrencyLimit=e}pushPromise(e){if(this.hasReachedLimit())throw new Error("Concurrency Limit reached");this._sendingPromises.push(e);let r=()=>{let n=this._sendingPromises.indexOf(e);this._sendingPromises.splice(n,1)};e.then(r,r)}hasReachedLimit(){return this._sendingPromises.length>=this._concurrencyLimit}async awaitAll(){await Promise.all(this._sendingPromises)}};function Ys(t){return new mo(t.concurrencyLimit)}function El(t){return Object.prototype.hasOwnProperty.call(t,"partialSuccess")}function qs(){return{handleResponse(t){t==null||!El(t)||t.partialSuccess==null||Object.keys(t.partialSuccess).length===0||b.warn("Received Partial Success response:",JSON.stringify(t.partialSuccess))}}}var To=class{constructor(e,r,n,o,i){p(this,"_diagLogger");p(this,"_transport");p(this,"_serializer");p(this,"_responseHandler");p(this,"_promiseQueue");p(this,"_timeout");this._transport=e,this._serializer=r,this._responseHandler=n,this._promiseQueue=o,this._timeout=i,this._diagLogger=b.createComponentLogger({namespace:"OTLPExportDelegate"})}export(e,r){if(this._diagLogger.debug("items to be sent",e),this._promiseQueue.hasReachedLimit()){r({code:Et.FAILED,error:new Error("Concurrent export limit reached")});return}let n=this._serializer.serializeRequest(e);if(n==null){r({code:Et.FAILED,error:new Error("Nothing to send")});return}this._promiseQueue.pushPromise(this._transport.send(n,this._timeout).then(o=>{var i;if(o.status==="success"){if(o.data!=null)try{this._responseHandler.handleResponse(this._serializer.deserializeResponse(o.data))}catch(s){this._diagLogger.warn("Export succeeded but could not deserialize response - is the response specification compliant?",s,o.data)}r({code:Et.SUCCESS});return}else if(o.status==="failure"&&o.error){r({code:Et.FAILED,error:o.error});return}else o.status==="retryable"?r({code:Et.FAILED,error:(i=o.error)!=null?i:new dr("Export failed with retryable status")}):r({code:Et.FAILED,error:new dr("Export failed with unknown error")})},o=>r({code:Et.FAILED,error:o})))}forceFlush(){return this._promiseQueue.awaitAll()}async shutdown(){this._diagLogger.debug("shutdown started"),await this.forceFlush(),this._transport.shutdown()}};function Qs(t,e){return new To(t.transport,t.serializer,qs(),t.promiseHandler,e.timeout)}function Eo(t,e,r){return Qs({transport:r,serializer:e,promiseHandler:Ys(t)},{timeout:t.timeoutMillis})}function Js(t,e){let r={attributes:mr(t.attributes,e),droppedAttributesCount:0},n=t.schemaUrl;return n&&n!==""&&(r.schemaUrl=n),r}function ta(t){return{name:t.name,version:t.version}}function mr(t,e){return Object.keys(t).map(r=>gl(r,t[r],e))}function gl(t,e,r){return{key:t,value:go(e,r)}}function go(t,e){let r=typeof t;if(r==="string")return{stringValue:t};if(r==="number")return Number.isInteger(t)?{intValue:t}:{doubleValue:t};if(r==="boolean")return{boolValue:t};if(t instanceof Uint8Array)return{bytesValue:e.encodeUint8Array(t)};if(Array.isArray(t)){let n=new Array(t.length);for(let o=0;o<t.length;o++)n[o]=go(t[o],e);return{arrayValue:{values:n}}}if(r==="object"&&t!=null){let n=Object.keys(t),o=new Array(n.length);for(let i=0;i<n.length;i++)o[i]={key:n[i],value:go(t[n[i]],e)};return{kvlistValue:{values:o}}}return{}}function Sl(t){let e=BigInt(1e9);return BigInt(Math.trunc(t[0]))*e+BigInt(Math.trunc(t[1]))}function Al(t){return Sl(t).toString()}var Rl=typeof BigInt!="undefined"?Al:At;function ea(t){return t}var ra={encodeHrTime:Rl,encodeSpanContext:ea,encodeOptionalSpanContext:ea,encodeUint8Array:t=>{if(typeof Buffer!="undefined")return Buffer.from(t).toString("base64");let e=new Array(t.length);for(let r=0;r<t.length;r++)e[r]=String.fromCharCode(t[r]);return btoa(e.join(""))}};var yl=256,vl=512;function na(t,e){let r=t&255|yl;return e&&(r|=vl),r}function Ol(t,e){var i,s,a,c;let r=t.spanContext(),n=t.status,o=(i=t.parentSpanContext)!=null&&i.spanId?e.encodeSpanContext((s=t.parentSpanContext)==null?void 0:s.spanId):void 0;return{traceId:e.encodeSpanContext(r.traceId),spanId:e.encodeSpanContext(r.spanId),parentSpanId:o,traceState:(a=r.traceState)==null?void 0:a.serialize(),name:t.name,kind:t.kind==null?0:t.kind+1,startTimeUnixNano:e.encodeHrTime(t.startTime),endTimeUnixNano:e.encodeHrTime(t.endTime),attributes:mr(t.attributes,e),droppedAttributesCount:t.droppedAttributesCount,events:t.events.map(u=>Nl(u,e)),droppedEventsCount:t.droppedEventsCount,status:{code:n.code,message:n.message},links:t.links.map(u=>bl(u,e)),droppedLinksCount:t.droppedLinksCount,flags:na(r.traceFlags,(c=t.parentSpanContext)==null?void 0:c.isRemote)}}function bl(t,e){var r;return{attributes:t.attributes?mr(t.attributes,e):[],spanId:e.encodeSpanContext(t.context.spanId),traceId:e.encodeSpanContext(t.context.traceId),traceState:(r=t.context.traceState)==null?void 0:r.serialize(),droppedAttributesCount:t.droppedAttributesCount||0,flags:na(t.context.traceFlags,t.context.isRemote)}}function Nl(t,e){return{attributes:t.attributes?mr(t.attributes,e):[],name:t.name,timeUnixNano:e.encodeHrTime(t.time),droppedAttributesCount:t.droppedAttributesCount||0}}function oa(t,e){return{resourceSpans:xl(t,e)}}function Pl(t){let e=new Map;for(let r of t){let n=e.get(r.resource);n||(n=new Map,e.set(r.resource,n));let o=`${r.instrumentationScope.name}@${r.instrumentationScope.version||""}:${r.instrumentationScope.schemaUrl||""}`,i=n.get(o);i||(i=[],n.set(o,i)),i.push(r)}return e}function xl(t,e){let r=Pl(t),n=[],o=r.entries(),i=o.next();for(;!i.done;){let[s,a]=i.value,c=[],u=a.values(),l=u.next();for(;!l.done;){let y=l.value;if(y.length>0){let M=y.map(U=>Ol(U,e));c.push({scope:ta(y[0].instrumentationScope),spans:M,schemaUrl:y[0].instrumentationScope.schemaUrl})}l=u.next()}let m=Js(s,e),S={resource:m,scopeSpans:c,schemaUrl:m.schemaUrl};n.push(S),i=o.next()}return n}var An={serializeRequest:t=>{let e=oa(t,ra);return new TextEncoder().encode(JSON.stringify(e))},deserializeResponse:t=>{if(t.length===0)return{};let e=new TextDecoder;return JSON.parse(e.decode(t))}};var So=5,Ll=1e3,Cl=5e3,wl=1.5,ia=.2;function Il(){return Math.random()*(2*ia)-ia}var Ao=class{constructor(e){p(this,"_transport");this._transport=e}retry(e,r,n){return new Promise((o,i)=>{setTimeout(()=>{this._transport.send(e,r).then(o,i)},n)})}async send(e,r){var a;let n=So,o=Ll,i=Date.now()+r,s=await this._transport.send(e,r);for(;s.status==="retryable"&&n>0;){n--;let c=Math.max(Math.min(o*(1+Il()),Cl),0);o=o*wl;let u=(a=s.retryInMillis)!=null?a:c,l=i-Date.now();if(u>l)return b.info(`Export retry time ${Math.round(u)}ms exceeds remaining timeout ${Math.round(l)}ms, not retrying further.`),s;b.verbose(`Scheduling export retry in ${Math.round(u)}ms`),s=await this.retry(e,l,u)}return s.status==="success"?b.verbose(`Export succeeded after ${So-n} retry attempts.`):s.status==="retryable"?b.info(`Export failed after maximum retry attempts (${So}).`):b.info(`Export failed with non-retryable error: ${s.error}`),s}shutdown(){return this._transport.shutdown()}};function Ro(t){return new Ao(t.transport)}var yo=class{constructor(e){p(this,"_params");this._params=e}async send(e){let r=(await this._params.headers())["Content-Type"];return new Promise(n=>{navigator.sendBeacon(this._params.url,new Blob([e],{type:r}))?(b.debug("SendBeacon success"),n({status:"success"})):n({status:"failure",error:new Error("SendBeacon failed")})})}shutdown(){}};function sa(t){return new yo(t)}function aa(t){return t===429||t===502||t===503||t===504}function ca(t){if(t==null)return;let e=Number.parseInt(t,10);if(Number.isInteger(e))return e>0?e*1e3:-1;let r=new Date(t).getTime()-Date.now();return r>=0?r:0}var vo=class{constructor(e){p(this,"_parameters");this._parameters=e}async send(e,r){var s;let n=new AbortController,o=setTimeout(()=>n.abort(),r),i=globalThis.fetch;typeof i.__original=="function"&&(i=i.__original);try{let a=!!globalThis.location,c=new URL(this._parameters.url),u=await i(c.href,{method:"POST",headers:await this._parameters.headers(),body:e,signal:n.signal,keepalive:a,mode:a?((s=globalThis.location)==null?void 0:s.origin)===c.origin?"same-origin":"cors":"no-cors"});if(u.status>=200&&u.status<=299)return b.debug("response success"),{status:"success"};if(aa(u.status)){let l=u.headers.get("Retry-After");return{status:"retryable",retryInMillis:ca(l)}}return{status:"failure",error:new Error("Fetch request failed with non-retryable status")}}catch(a){return Dl(a)?{status:"retryable",error:new Error("Fetch request encountered a network error",{cause:a})}:{status:"failure",error:new Error("Fetch request errored",{cause:a})}}finally{clearTimeout(o)}}shutdown(){}};function ua(t){return new vo(t)}function Dl(t){return t instanceof TypeError&&!t.cause}function la(t,e){return Eo(t,e,Ro({transport:ua(t)}))}function pa(t,e){return Eo(t,e,Ro({transport:sa({url:t.url,headers:t.headers})}))}function fa(t){let e={};return Object.entries(t!=null?t:{}).forEach(([r,n])=>{typeof n!="undefined"?e[r]=String(n):b.warn(`Header "${r}" has invalid value (${n}) and will be ignored`)}),e}function Ml(t,e,r){return async()=>{let n={...await r()},o={};return e!=null&&Object.assign(o,await e()),t!=null&&Object.assign(o,fa(await t())),Object.assign(o,n)}}function kl(t){var e;if(t!=null)try{let r=(e=globalThis.location)==null?void 0:e.href;return new URL(t,r).href}catch(r){throw new Error(`Configuration: Could not parse user-provided export URL: '${t}'`)}}function _a(t,e,r){var n,o;return{...$s(t,e,r),headers:Ml(t.headers,e.headers,r.headers),url:(o=(n=kl(t.url))!=null?n:e.url)!=null?o:r.url}}function ha(t,e){return{...Xs(),headers:async()=>t,url:"http://localhost:4318/"+e}}function da(t){return typeof t.headers=="function"?t.headers:Ws(t.headers)}function ma(t,e,r){return _a({url:t.url,timeoutMillis:t.timeoutMillis,headers:da(t),concurrencyLimit:t.concurrencyLimit},{},ha(r,e))}function Oo(t,e,r,n){let o=Ul(t.headers),i=ma(t,r,n);return o(i,e)}function Ul(t){return!t&&typeof navigator.sendBeacon=="function"?pa:la}var Ce=class extends hr{constructor(e={}){super(Oo(e,An,"v1/traces",{"Content-Type":"application/json"}))}};var ne={PLATFORM:"browser.platform",BRANDS:"browser.brands",MOBILE:"browser.mobile",LANGUAGE:"browser.language",USER_AGENT:"browser.user_agent"};var bo=class{detect(e){if(!(typeof window!="undefined"&&typeof document!="undefined"))return de();let n=Hl();return this._getResourceAttributes(n,e)}_getResourceAttributes(e,r){return!e[ne.USER_AGENT]&&!e[ne.PLATFORM]?(b.debug("BrowserDetector failed: Unable to find required browser resources. "),de()):{attributes:e}}};function Hl(){let t={},e=navigator.userAgentData;return e?(t[ne.PLATFORM]=e.platform,t[ne.BRANDS]=e.brands.map(r=>`${r.brand} ${r.version}`),t[ne.MOBILE]=e.mobile):t[ne.USER_AGENT]=navigator.userAgent,t[ne.LANGUAGE]=navigator.language,t}var No=new bo;var va=-1,Tr=t=>{addEventListener("pageshow",(e=>{e.persisted&&(va=e.timeStamp,t(e))}),!0)},oe=(t,e,r,n)=>{let o,i;return s=>{e.value>=0&&(s||n)&&(i=e.value-(o!=null?o:0),(i||o===void 0)&&(o=e.value,e.delta=i,e.rating=((a,c)=>a>c[1]?"poor":a>c[0]?"needs-improvement":"good")(e.value,r),t(e)))}},Mo=t=>{requestAnimationFrame((()=>requestAnimationFrame((()=>t()))))},Oa=()=>{let t=performance.getEntriesByType("navigation")[0];if(t&&t.responseStart>0&&t.responseStart<performance.now())return t},yn=()=>{var e;let t=Oa();return(e=t==null?void 0:t.activationStart)!=null?e:0},ie=(t,e=-1)=>{let r=Oa(),n="navigate";return va>=0?n="back-forward-cache":r&&(document.prerendering||yn()>0?n="prerender":document.wasDiscarded?n="restore":r.type&&(n=r.type.replace(/_/g,"-"))),{name:t,value:e,rating:"good",delta:0,entries:[],id:`v5-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:n}},Po=new WeakMap;function ko(t,e){return Po.get(t)||Po.set(t,new e),Po.get(t)}var Lo=class{constructor(){p(this,"t");p(this,"i",0);p(this,"o",[])}h(e){var o;if(e.hadRecentInput)return;let r=this.o[0],n=this.o.at(-1);this.i&&r&&n&&e.startTime-n.startTime<1e3&&e.startTime-r.startTime<5e3?(this.i+=e.value,this.o.push(e)):(this.i=e.value,this.o=[e]),(o=this.t)==null||o.call(this,e)}},Er=(t,e,r={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(t)){let n=new PerformanceObserver((o=>{Promise.resolve().then((()=>{e(o.getEntries())}))}));return n.observe({type:t,buffered:!0,...r}),n}}catch(n){}},Uo=t=>{let e=!1;return()=>{e||(t(),e=!0)}},we=-1,ba=new Set,Ta=()=>document.visibilityState!=="hidden"||document.prerendering?1/0:0,Co=t=>{if(document.visibilityState==="hidden"){if(t.type==="visibilitychange")for(let e of ba)e();isFinite(we)||(we=t.type==="visibilitychange"?t.timeStamp:0,removeEventListener("prerenderingchange",Co,!0))}},vn=()=>{var t;if(we<0){let e=yn(),r=document.prerendering||(t=globalThis.performance.getEntriesByType("visibility-state").filter((n=>n.name==="hidden"&&n.startTime>e))[0])==null?void 0:t.startTime;we=r!=null?r:Ta(),addEventListener("visibilitychange",Co,!0),addEventListener("prerenderingchange",Co,!0),Tr((()=>{setTimeout((()=>{we=Ta()}))}))}return{get firstHiddenTime(){return we},onHidden(e){ba.add(e)}}},Ho=t=>{document.prerendering?addEventListener("prerenderingchange",(()=>t()),!0):t()},Ea=[1800,3e3],Gl=(t,e={})=>{Ho((()=>{let r=vn(),n,o=ie("FCP"),i=Er("paint",(s=>{for(let a of s)a.name==="first-contentful-paint"&&(i.disconnect(),a.startTime<r.firstHiddenTime&&(o.value=Math.max(a.startTime-yn(),0),o.entries.push(a),n(!0)))}));i&&(n=oe(t,o,Ea,e.reportAllChanges),Tr((s=>{o=ie("FCP"),n=oe(t,o,Ea,e.reportAllChanges),Mo((()=>{o.value=performance.now()-s.timeStamp,n(!0)}))})))}))},ga=[.1,.25],Na=(t,e={})=>{let r=vn();Gl(Uo((()=>{let n,o=ie("CLS",0),i=ko(e,Lo),s=c=>{for(let u of c)i.h(u);i.i>o.value&&(o.value=i.i,o.entries=i.o,n())},a=Er("layout-shift",s);a&&(n=oe(t,o,ga,e.reportAllChanges),r.onHidden((()=>{s(a.takeRecords()),n(!0)})),Tr((()=>{i.i=0,o=ie("CLS",0),n=oe(t,o,ga,e.reportAllChanges),Mo((()=>n()))})),setTimeout(n))})))},Pa=0,xo=1/0,Rn=0,Bl=t=>{for(let e of t)e.interactionId&&(xo=Math.min(xo,e.interactionId),Rn=Math.max(Rn,e.interactionId),Pa=Rn?(Rn-xo)/7+1:0)},wo,Sa=()=>{var t;return wo?Pa:(t=performance.interactionCount)!=null?t:0},Vl=()=>{"interactionCount"in performance||wo||(wo=Er("event",Bl,{type:"event",buffered:!0,durationThreshold:0}))},Aa=0,Io=class{constructor(){p(this,"u",[]);p(this,"l",new Map);p(this,"m");p(this,"p")}v(){Aa=Sa(),this.u.length=0,this.l.clear()}L(){let e=Math.min(this.u.length-1,Math.floor((Sa()-Aa)/50));return this.u[e]}h(e){var o,i;if((o=this.m)==null||o.call(this,e),!e.interactionId&&e.entryType!=="first-input")return;let r=this.u.at(-1),n=this.l.get(e.interactionId);if(n||this.u.length<10||e.duration>r.P){if(n?e.duration>n.P?(n.entries=[e],n.P=e.duration):e.duration===n.P&&e.startTime===n.entries[0].startTime&&n.entries.push(e):(n={id:e.interactionId,entries:[e],P:e.duration},this.l.set(n.id,n),this.u.push(n)),this.u.sort(((s,a)=>a.P-s.P)),this.u.length>10){let s=this.u.splice(10);for(let a of s)this.l.delete(a.id)}(i=this.p)==null||i.call(this,n)}}},xa=t=>{let e=globalThis.requestIdleCallback||setTimeout;document.visibilityState==="hidden"?t():(t=Uo(t),addEventListener("visibilitychange",t,{once:!0,capture:!0}),e((()=>{t(),removeEventListener("visibilitychange",t,{capture:!0})})))},Ra=[200,500],La=(t,e={})=>{if(!globalThis.PerformanceEventTiming||!("interactionId"in PerformanceEventTiming.prototype))return;let r=vn();Ho((()=>{var c;Vl();let n,o=ie("INP"),i=ko(e,Io),s=u=>{xa((()=>{for(let m of u)i.h(m);let l=i.L();l&&l.P!==o.value&&(o.value=l.P,o.entries=l.entries,n())}))},a=Er("event",s,{durationThreshold:(c=e.durationThreshold)!=null?c:40});n=oe(t,o,Ra,e.reportAllChanges),a&&(a.observe({type:"first-input",buffered:!0}),r.onHidden((()=>{s(a.takeRecords()),n(!0)})),Tr((()=>{i.v(),o=ie("INP"),n=oe(t,o,Ra,e.reportAllChanges)})))}))},Do=class{constructor(){p(this,"m")}h(e){var r;(r=this.m)==null||r.call(this,e)}},ya=[2500,4e3],Ca=(t,e={})=>{Ho((()=>{let r=vn(),n,o=ie("LCP"),i=ko(e,Do),s=c=>{e.reportAllChanges||(c=c.slice(-1));for(let u of c)i.h(u),u.startTime<r.firstHiddenTime&&(o.value=Math.max(u.startTime-yn(),0),o.entries=[u],n())},a=Er("largest-contentful-paint",s);if(a){n=oe(t,o,ya,e.reportAllChanges);let c=Uo((()=>{s(a.takeRecords()),a.disconnect(),n(!0)})),u=l=>{l.isTrusted&&(xa(c),removeEventListener(l.type,u,{capture:!0}))};for(let l of["keydown","click","visibilitychange"])addEventListener(l,u,{capture:!0});Tr((l=>{o=ie("LCP"),n=oe(t,o,ya,e.reportAllChanges),Mo((()=>{o.value=performance.now()-l.timeStamp,n(!0)}))}))}}))};var gr;(function(t){t.COMPONENT="component",t.HTTP_STATUS_TEXT="http.status_text"})(gr||(gr={}));var wa="http.host",Ia="http.method",Da="http.request.body.size",Ma="http.request_content_length_uncompressed";var ka="http.scheme",Ua="http.status_code",Ha="http.url",Ga="http.user_agent";var Ba=b.createComponentLogger({namespace:"@opentelemetry/opentelemetry-instrumentation-fetch/utils"});function Va(...t){if(t[0]instanceof URL||typeof t[0]=="string"){let e=t[1];if(!(e!=null&&e.body))return Promise.resolve();if(e.body instanceof ReadableStream){let{body:r,length:n}=Fl(e.body);return e.body=r,n}else return Promise.resolve(zl(e.body))}else{let e=t[0];return e!=null&&e.body?e.clone().text().then(r=>Go(r)):Promise.resolve()}}function Fl(t){if(!t.pipeThrough)return Ba.warn("Platform has ReadableStream but not pipeThrough!"),{body:t,length:Promise.resolve(void 0)};let e=0,r,n=new Promise(i=>{r=i}),o=new TransformStream({start(){},async transform(i,s){let a=await i;e+=a.byteLength,s.enqueue(i)},flush(){r(e)}});return{body:t.pipeThrough(o),length:n}}function jl(t){return typeof Document!="undefined"&&t instanceof Document}function zl(t){if(jl(t))return new XMLSerializer().serializeToString(document).length;if(typeof t=="string")return Go(t);if(t instanceof Blob)return t.size;if(t instanceof FormData)return Kl(t);if(t instanceof URLSearchParams)return Go(t.toString());if(t.byteLength!==void 0)return t.byteLength;Ba.warn("unknown body type")}var Zl=new TextEncoder;function Go(t){return Zl.encode(t).byteLength}function Kl(t){let e=0;for(let[r,n]of t.entries())e+=r.length,n instanceof Blob?e+=n.size:e+=n.length;return e}function Fa(t){let e=$l(),r=t.toUpperCase();return r in e?r:"_OTHER"}var Wl={CONNECT:!0,DELETE:!0,GET:!0,HEAD:!0,OPTIONS:!0,PATCH:!0,POST:!0,PUT:!0,TRACE:!0,QUERY:!0},Sr;function $l(){if(Sr===void 0){let t=void 0;t&&t.length>0?(Sr={},t.forEach(e=>{Sr[e]=!0})):Sr=Wl}return Sr}var Xl={"https:":"443","http:":"80"};function ja(t){let e=Number(t.port||Xl[t.protocol]);if(e&&!isNaN(e))return e}var Bo="0.212.0";var Yl=300,za=typeof PerformanceObserver!="undefined",Ar=class extends Ot{constructor(r={}){super("@opentelemetry/instrumentation-fetch",Bo,r);p(this,"component","fetch");p(this,"version",Bo);p(this,"moduleName",this.component);p(this,"_usedResources",new WeakSet);p(this,"_tasksCount",0);p(this,"_semconvStability");this._semconvStability=Ee("http",r==null?void 0:r.semconvStabilityOptIn)}init(){}_addChildSpan(r,n){let o=this.tracer.startSpan("CORS Preflight",{startTime:n[D.FETCH_START]},Z.setSpan(G.active(),r)),i=!(this._semconvStability&X.OLD);Ut(o,n,this.getConfig().ignoreNetworkEvents,void 0,i),o.end(n[D.RESPONSE_END])}_addFinalSpanAttributes(r,n){let o=Rt(n.url);if(this._semconvStability&X.OLD&&(r.setAttribute(Ua,n.status),n.statusText!=null&&r.setAttribute(gr.HTTP_STATUS_TEXT,n.statusText),r.setAttribute(wa,o.host),r.setAttribute(ka,o.protocol.replace(":","")),typeof navigator!="undefined"&&r.setAttribute(Ga,navigator.userAgent)),this._semconvStability&X.STABLE){r.setAttribute(Ur,n.status),r.setAttribute(Hr,o.hostname);let i=ja(o);i&&r.setAttribute(Gr,i)}}_addHeaders(r,n){if(!tr(n,this.getConfig().propagateTraceHeaderCorsUrls)){let o={};st.inject(G.active(),o),Object.keys(o).length>0&&this._diag.debug("headers inject skipped due to CORS policy");return}if(r instanceof Request)st.inject(G.active(),r.headers,{set:(o,i,s)=>o.set(i,typeof s=="string"?s:String(s))});else if(r.headers instanceof Headers)st.inject(G.active(),r.headers,{set:(o,i,s)=>o.set(i,typeof s=="string"?s:String(s))});else if(r.headers instanceof Map)st.inject(G.active(),r.headers,{set:(o,i,s)=>o.set(i,typeof s=="string"?s:String(s))});else{let o={};st.inject(G.active(),o),r.headers=Object.assign({},o,r.headers||{})}}_clearResources(){this._tasksCount===0&&this.getConfig().clearTimingResources&&(performance.clearResourceTimings(),this._usedResources=new WeakSet)}_createSpan(r,n={}){if(We(r,this.getConfig().ignoreUrls)){this._diag.debug("ignoring span as url matches ignored url");return}let o="",i={};if(this._semconvStability&X.OLD){let s=(n.method||"GET").toUpperCase();o=`HTTP ${s}`,i[gr.COMPONENT]=this.moduleName,i[Ia]=s,i[Ha]=r}if(this._semconvStability&X.STABLE){let s=n.method,a=Fa(n.method||"GET");o||(o=a),i[Mr]=a,a!==s&&(i[kr]=s),i[ee]=r}return this.tracer.startSpan(o,{kind:zt.CLIENT,attributes:i})}_findResourceAndAddNetworkEvents(r,n,o){let i=n.entries;if(!i.length){if(!performance.getEntriesByType)return;i=performance.getEntriesByType("resource")}let s=Je(n.spanUrl,n.startTime,o,i,this._usedResources,"fetch");if(s.mainRequest){let a=s.mainRequest;this._markResourceAsUsed(a);let c=s.corsPreFlightRequest;c&&(this._addChildSpan(r,c),this._markResourceAsUsed(c));let u=!(this._semconvStability&X.OLD);Ut(r,a,this.getConfig().ignoreNetworkEvents,void 0,u)}}_markResourceAsUsed(r){this._usedResources.add(r)}_endSpan(r,n,o){let i=gt(Date.now()),s=St();this._addFinalSpanAttributes(r,o),this._semconvStability&X.STABLE&&o.status>=400&&(r.setStatus({code:Tt.ERROR}),r.setAttribute(Ve,String(o.status))),setTimeout(()=>{var a;(a=n.observer)==null||a.disconnect(),this._findResourceAndAddNetworkEvents(r,n,s),this._tasksCount--,this._clearResources(),r.end(i)},Yl)}_patchConstructor(){return r=>{let n=this,o=new Set(["url","type","redirected"]);function i(s,a){return new Proxy(s,{get(c,u,l){if(typeof u=="string"&&o.has(u))return Reflect.get(a,u);if(u==="clone")return function(){return i(c.clone(),a)};let m=Reflect.get(c,u,c);return typeof m=="function"?m.bind(c):m}})}return function(...a){let c=this,u=Rt(a[0]instanceof Request?a[0].url:String(a[0])).href,l=a[0]instanceof Request?a[0]:a[1]||{},m=n._createSpan(u,l);if(!m)return r.apply(this,a);let S=n._prepareSpanData(u);n.getConfig().measureRequestSize&&Va(...a).then(E=>{E&&(n._semconvStability&X.OLD&&m.setAttribute(Ma,E),n._semconvStability&X.STABLE&&m.setAttribute(Da,E))}).catch(E=>{n._diag.warn("getFetchBodyLength",E)});function y(E,T){n._applyAttributesAfterFetch(E,l,T),n._endSpan(E,S,{status:T.status||0,statusText:T.message,url:u})}function M(E,T){n._applyAttributesAfterFetch(E,l,T),T.status>=200&&T.status<400?n._endSpan(E,S,T):n._endSpan(E,S,{status:T.status,statusText:T.statusText,url:u})}function U(E,T){if(!E)return null;let O=E.getReader();return new ReadableStream({async pull(v){try{let{value:z,done:W}=await O.read();W?(O.releaseLock(),v.close()):v.enqueue(z)}catch(z){v.error(z),O.cancel(z).catch(W=>{});try{O.releaseLock()}catch(W){}}},cancel(v){return T.cancel(v).catch(z=>{}),O.cancel(v)}})}function J(E,T,O){let v=null;try{let W=O.clone().body;if(W){let N=W.getReader(),w=O.status===204||O.status===205||O.status===304?null:U(O.body,N),I=new Response(w,{status:O.status,statusText:O.statusText,headers:O.headers});v=i(I,O);let H=()=>{N.read().then(({done:P})=>{P?M(E,O):H()},P=>{y(E,P)})};H()}else M(E,O)}finally{T(v!=null?v:O)}}function K(E,T,O){try{y(E,O)}finally{T(O)}}return new Promise((E,T)=>G.with(Z.setSpan(G.active(),m),()=>(n._addHeaders(l,u),n._callRequestHook(m,l),n._tasksCount++,r.apply(c,l instanceof Request?[l]:[u,l]).then(J.bind(c,m,E),K.bind(c,m,T)))))}}}_applyAttributesAfterFetch(r,n,o){let i=this.getConfig().applyCustomAttributesOnSpan;i&&qt(()=>i(r,n,o),s=>{s&&this._diag.error("applyCustomAttributesOnSpan",s)},!0)}_callRequestHook(r,n){let o=this.getConfig().requestHook;o&&qt(()=>o(r,n),i=>{i&&this._diag.error("requestHook",i)},!0)}_prepareSpanData(r){let n=St(),o=[];if(typeof PerformanceObserver!="function")return{entries:o,startTime:n,spanUrl:r};let i=new PerformanceObserver(s=>{s.getEntries().forEach(c=>{c.initiatorType==="fetch"&&c.name===r&&o.push(c)})});return i.observe({entryTypes:["resource"]}),{entries:o,observer:i,startTime:n,spanUrl:r}}enable(){if(!za){this._diag.warn("this instrumentation is intended for web usage only, it does not instrument server-side fetch()");return}ot(fetch)&&(this._unwrap(globalThis,"fetch"),this._diag.debug("removing previous patch for constructor")),this._wrap(globalThis,"fetch",this._patchConstructor())}disable(){za&&(this._unwrap(globalThis,"fetch"),this._usedResources=new WeakSet)}};(function(){var U,J,K;let e=window.MatomoOpenTelemetry||{};if(!e.enabled)return;let r=(U=e.traceUrl)!=null?U:"",n=(J=e.serviceName)!=null?J:"matomo-frontend",o=Kn({detectors:[No]}),i=S(e.resourceAttributes),s=Xe({[Br]:n,...i});s=s.merge(o);let a=new Qe({resource:s,spanProcessors:[new be(new Ce({url:r}))]});a.register({contextManager:new Pe,propagator:new fe({propagators:[new _e]})});let c=[];e.enableDocumentLoadMonitoring&&c.push(new lr),e.enableUserInteractionMonitoring&&c.push(new pr),e.enableXMLHttpRequestMonitoring&&(c.push(new _r({propagateTraceHeaderCorsUrls:[/.*/]})),c.push(new Ar({propagateTraceHeaderCorsUrls:[/.*/]}))),c.length>0&&lo({instrumentations:c});let u=Z.getTracer(n),l=null,m=G.active();if(e.enableUxMonitoring){let E=function(){l&&l.end(),l=u.startSpan("ui.page",{attributes:{"http.url":window.location.href,"http.path":window.location.pathname,"http.title":document.title}}),m=Z.setSpan(G.active(),l)};E(),window.addEventListener("hashchange",()=>{E()}),window.addEventListener("beforeunload",()=>{l&&l.end()})}function S(E){return!E||typeof E!="string"?{}:E.split(",").map(T=>T.trim()).filter(Boolean).reduce((T,O)=>{let[v,...z]=O.split("=");return!v||z.length===0||(T[v.trim()]=z.join("=").trim()),T},{})}function y(E,T){var O;try{let v=u.startSpan(E,{},m);v.recordException(T),v.setStatus({code:Tt.ERROR}),v.setAttribute("error.message",T.message),v.setAttribute("error.name",T.name),v.setAttribute("error.stack",(O=T.stack)!=null?O:""),v.setAttribute("http.url",window.location.href),v.setAttribute("http.path",window.location.pathname),v.setAttribute("http.title",document.title),v.end(),a.forceFlush()}catch(v){console.warn("OpenTelemetry: failed to record error span",v)}}window.addEventListener("error",E=>{y("js.error",E.error||new Error(E.message))}),window.addEventListener("unhandledrejection",E=>{y("js.unhandled_promise",E.reason instanceof Error?E.reason:new Error(String(E.reason)))});function M(){let E=document.getElementById("ajaxError");if(!E)return;new MutationObserver(O=>{var v,z,W,N;for(let et of O)for(let w of et.addedNodes){if(!(w instanceof HTMLElement))continue;let I=(v=w.matches)!=null&&v.call(w,".notification-error")?w:(z=w.querySelector)==null?void 0:z.call(w,".notification-error");if(!I)continue;let H=(N=(W=I.querySelector(".notification-body div"))==null?void 0:W.innerText)==null?void 0:N.trim();if(!H)continue;let P=u.startSpan("ui.notification.error",{attributes:{"ui.notification.type":"error","ui.notification.message":H,"http.url":window.location.href,"http.path":window.location.pathname}},m);P.setStatus({code:Tt.ERROR}),P.end()}}).observe(E,{childList:!0,subtree:!0})}if(document.readyState==="loading"?document.addEventListener("DOMContentLoaded",M):M(),e.enableWebVitals){let E=function(T){let O=u.startSpan("browser.web_vital",{attributes:{"http.url":window.location.href,"http.path":window.location.pathname}},m);O.addEvent("browser.web_vital",{name:T.name,value:T.value,delta:T.delta,id:T.id}),O.end()};Na(E),Ca(E),La(E)}e.enableUxMonitoring&&"PerformanceObserver"in window&&((K=PerformanceObserver.supportedEntryTypes)!=null&&K.includes("longtask"))&&new PerformanceObserver(T=>{for(let O of T.getEntries()){let v=u.startSpan("ux.long_task",{attributes:{"http.url":window.location.href,"http.path":window.location.pathname}},m);v.addEvent("ux.long_task",{duration:O.duration,startTime:O.startTime}),v.end()}}).observe({entryTypes:["longtask"]})})();})();
/*! Bundled license information:

zone.js/fesm2015/zone.js:
  (**
   * @license Angular
   * (c) 2010-2025 Google LLC. https://angular.dev/
   * License: MIT
   *)
*/
