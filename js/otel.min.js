(()=>{var jc=Object.defineProperty;var zc=(t,e,r)=>e in t?jc(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var l=(t,e,r)=>zc(t,typeof e!="symbol"?e+"":e,r);var Li=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{};var zt="1.9.0";var Ci=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function Zc(t){var e=new Set([t]),r=new Set,n=t.match(Ci);if(!n)return function(){return!1};var o={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(o.prerelease!=null)return function(c){return c===t};function i(a){return r.add(a),!1}function s(a){return e.add(a),!0}return function(c){if(e.has(c))return!0;if(r.has(c))return!1;var u=c.match(Ci);if(!u)return i(c);var p={major:+u[1],minor:+u[2],patch:+u[3],prerelease:u[4]};return p.prerelease!=null||o.major!==p.major?i(c):o.major===0?o.minor===p.minor&&o.patch<=p.patch?s(c):i(c):o.minor<=p.minor?s(c):i(c)}}var wi=Zc(zt);var Kc=zt.split(".")[0],Ze=Symbol.for("opentelemetry.js.api."+Kc),Ke=Li;function wt(t,e,r,n){var o;n===void 0&&(n=!1);var i=Ke[Ze]=(o=Ke[Ze])!==null&&o!==void 0?o:{version:zt};if(!n&&i[t]){var s=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+t);return r.error(s.stack||s.message),!1}if(i.version!==zt){var s=new Error("@opentelemetry/api: Registration of version v"+i.version+" for "+t+" does not match previously registered API v"+zt);return r.error(s.stack||s.message),!1}return i[t]=e,r.debug("@opentelemetry/api: Registered a global for "+t+" v"+zt+"."),!0}function gt(t){var e,r,n=(e=Ke[Ze])===null||e===void 0?void 0:e.version;if(!(!n||!wi(n)))return(r=Ke[Ze])===null||r===void 0?void 0:r[t]}function Dt(t,e){e.debug("@opentelemetry/api: Unregistering a global for "+t+" v"+zt+".");var r=Ke[Ze];r&&delete r[t]}var Wc=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),o,i=[],s;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(a){s={error:a}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return i},Yc=function(t,e,r){if(r||arguments.length===2)for(var n=0,o=e.length,i;n<o;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))},Di=(function(){function t(e){this._namespace=e.namespace||"DiagComponentLogger"}return t.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return We("debug",this._namespace,e)},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return We("error",this._namespace,e)},t.prototype.info=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return We("info",this._namespace,e)},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return We("warn",this._namespace,e)},t.prototype.verbose=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return We("verbose",this._namespace,e)},t})();function We(t,e,r){var n=gt("diag");if(n)return r.unshift(e),n[t].apply(n,Yc([],Wc(r),!1))}var dt;(function(t){t[t.NONE=0]="NONE",t[t.ERROR=30]="ERROR",t[t.WARN=50]="WARN",t[t.INFO=60]="INFO",t[t.DEBUG=70]="DEBUG",t[t.VERBOSE=80]="VERBOSE",t[t.ALL=9999]="ALL"})(dt||(dt={}));function Ii(t,e){t<dt.NONE?t=dt.NONE:t>dt.ALL&&(t=dt.ALL),e=e||{};function r(n,o){var i=e[n];return typeof i=="function"&&t>=o?i.bind(e):function(){}}return{error:r("error",dt.ERROR),warn:r("warn",dt.WARN),info:r("info",dt.INFO),debug:r("debug",dt.DEBUG),verbose:r("verbose",dt.VERBOSE)}}var $c=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),o,i=[],s;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(a){s={error:a}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return i},qc=function(t,e,r){if(r||arguments.length===2)for(var n=0,o=e.length,i;n<o;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))},Xc="diag",ft=(function(){function t(){function e(o){return function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];var a=gt("diag");if(a)return a[o].apply(a,qc([],$c(i),!1))}}var r=this,n=function(o,i){var s,a,c;if(i===void 0&&(i={logLevel:dt.INFO}),o===r){var u=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return r.error((s=u.stack)!==null&&s!==void 0?s:u.message),!1}typeof i=="number"&&(i={logLevel:i});var p=gt("diag"),T=Ii((a=i.logLevel)!==null&&a!==void 0?a:dt.INFO,o);if(p&&!i.suppressOverrideMessage){var E=(c=new Error().stack)!==null&&c!==void 0?c:"<failed to generate stacktrace>";p.warn("Current logger will be overwritten from "+E),T.warn("Current logger will overwrite one already registered from "+E)}return wt("diag",T,r,!0)};r.setLogger=n,r.disable=function(){Dt(Xc,r)},r.createComponentLogger=function(o){return new Di(o)},r.verbose=e("verbose"),r.debug=e("debug"),r.info=e("info"),r.warn=e("warn"),r.error=e("error")}return t.instance=function(){return this._instance||(this._instance=new t),this._instance},t})();var Qc=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),o,i=[],s;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(a){s={error:a}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return i},Jc=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Mi=(function(){function t(e){this._entries=e?new Map(e):new Map}return t.prototype.getEntry=function(e){var r=this._entries.get(e);if(r)return Object.assign({},r)},t.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(e){var r=Qc(e,2),n=r[0],o=r[1];return[n,o]})},t.prototype.setEntry=function(e,r){var n=new t(this._entries);return n._entries.set(e,r),n},t.prototype.removeEntry=function(e){var r=new t(this._entries);return r._entries.delete(e),r},t.prototype.removeEntries=function(){for(var e,r,n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var i=new t(this._entries);try{for(var s=Jc(n),a=s.next();!a.done;a=s.next()){var c=a.value;i._entries.delete(c)}}catch(u){e={error:u}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return i},t.prototype.clear=function(){return new t},t})();var ki=Symbol("BaggageEntryMetadata");var tu=ft.instance();function Ui(t){return t===void 0&&(t={}),new Mi(new Map(Object.entries(t)))}function Qn(t){return typeof t!="string"&&(tu.error("Cannot create baggage metadata from unknown type: "+typeof t),t=""),{__TYPE__:ki,toString:function(){return t}}}function le(t){return Symbol.for(t)}var eu=(function(){function t(e){var r=this;r._currentContext=e?new Map(e):new Map,r.getValue=function(n){return r._currentContext.get(n)},r.setValue=function(n,o){var i=new t(r._currentContext);return i._currentContext.set(n,o),i},r.deleteValue=function(n){var o=new t(r._currentContext);return o._currentContext.delete(n),o}}return t})(),ht=new eu;var pe=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),ru=(function(){function t(){}return t.prototype.createGauge=function(e,r){return pu},t.prototype.createHistogram=function(e,r){return fu},t.prototype.createCounter=function(e,r){return lu},t.prototype.createUpDownCounter=function(e,r){return _u},t.prototype.createObservableGauge=function(e,r){return hu},t.prototype.createObservableCounter=function(e,r){return du},t.prototype.createObservableUpDownCounter=function(e,r){return Tu},t.prototype.addBatchObservableCallback=function(e,r){},t.prototype.removeBatchObservableCallback=function(e){},t})();var kr=(function(){function t(){}return t})();var nu=(function(t){pe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.add=function(r,n){},e})(kr);var ou=(function(t){pe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.add=function(r,n){},e})(kr);var iu=(function(t){pe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.record=function(r,n){},e})(kr);var su=(function(t){pe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.record=function(r,n){},e})(kr);var Jn=(function(){function t(){}return t.prototype.addCallback=function(e){},t.prototype.removeCallback=function(e){},t})();var au=(function(t){pe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(Jn);var cu=(function(t){pe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(Jn);var uu=(function(t){pe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(Jn);var Hi=new ru,lu=new nu,pu=new iu,fu=new su,_u=new ou,du=new au,hu=new cu,Tu=new uu;var Gi={get:function(t,e){if(t!=null)return t[e]},keys:function(t){return t==null?[]:Object.keys(t)}},Bi={set:function(t,e,r){t!=null&&(t[e]=r)}};var mu=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),o,i=[],s;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(a){s={error:a}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return i},Eu=function(t,e,r){if(r||arguments.length===2)for(var n=0,o=e.length,i;n<o;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))},Vi=(function(){function t(){}return t.prototype.active=function(){return ht},t.prototype.with=function(e,r,n){for(var o=[],i=3;i<arguments.length;i++)o[i-3]=arguments[i];return r.call.apply(r,Eu([n],mu(o),!1))},t.prototype.bind=function(e,r){return r},t.prototype.enable=function(){return this},t.prototype.disable=function(){return this},t})();var gu=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),o,i=[],s;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(a){s={error:a}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return i},Su=function(t,e,r){if(r||arguments.length===2)for(var n=0,o=e.length,i;n<o;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))},to="context",Au=new Vi,re=(function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalContextManager=function(e){return wt(to,e,ft.instance())},t.prototype.active=function(){return this._getContextManager().active()},t.prototype.with=function(e,r,n){for(var o,i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];return(o=this._getContextManager()).with.apply(o,Su([e,r,n],gu(i),!1))},t.prototype.bind=function(e,r){return this._getContextManager().bind(e,r)},t.prototype._getContextManager=function(){return gt(to)||Au},t.prototype.disable=function(){this._getContextManager().disable(),Dt(to,ft.instance())},t})();var Tt;(function(t){t[t.NONE=0]="NONE",t[t.SAMPLED=1]="SAMPLED"})(Tt||(Tt={}));var Ur="0000000000000000",Hr="00000000000000000000000000000000",Ye={traceId:Hr,spanId:Ur,traceFlags:Tt.NONE};var ne=(function(){function t(e){e===void 0&&(e=Ye),this._spanContext=e}return t.prototype.spanContext=function(){return this._spanContext},t.prototype.setAttribute=function(e,r){return this},t.prototype.setAttributes=function(e){return this},t.prototype.addEvent=function(e,r){return this},t.prototype.addLink=function(e){return this},t.prototype.addLinks=function(e){return this},t.prototype.setStatus=function(e){return this},t.prototype.updateName=function(e){return this},t.prototype.end=function(e){},t.prototype.isRecording=function(){return!1},t.prototype.recordException=function(e,r){},t})();var eo=le("OpenTelemetry Context Key SPAN");function Gr(t){return t.getValue(eo)||void 0}function Fi(){return Gr(re.getInstance().active())}function $e(t,e){return t.setValue(eo,e)}function ji(t){return t.deleteValue(eo)}function zi(t,e){return $e(t,new ne(e))}function Br(t){var e;return(e=Gr(t))===null||e===void 0?void 0:e.spanContext()}var Ru=/^([0-9a-f]{32})$/i,yu=/^[0-9a-f]{16}$/i;function Vr(t){return Ru.test(t)&&t!==Hr}function Zi(t){return yu.test(t)&&t!==Ur}function Zt(t){return Vr(t.traceId)&&Zi(t.spanId)}function Ki(t){return new ne(t)}var ro=re.getInstance(),Fr=(function(){function t(){}return t.prototype.startSpan=function(e,r,n){n===void 0&&(n=ro.active());var o=!!(r!=null&&r.root);if(o)return new ne;var i=n&&Br(n);return Ou(i)&&Zt(i)?new ne(i):new ne},t.prototype.startActiveSpan=function(e,r,n,o){var i,s,a;if(!(arguments.length<2)){arguments.length===2?a=r:arguments.length===3?(i=r,a=n):(i=r,s=n,a=o);var c=s!=null?s:ro.active(),u=this.startSpan(e,i,c),p=$e(c,u);return ro.with(p,a,void 0,u)}},t})();function Ou(t){return typeof t=="object"&&typeof t.spanId=="string"&&typeof t.traceId=="string"&&typeof t.traceFlags=="number"}var vu=new Fr,Wi=(function(){function t(e,r,n,o){this._provider=e,this.name=r,this.version=n,this.options=o}return t.prototype.startSpan=function(e,r,n){return this._getTracer().startSpan(e,r,n)},t.prototype.startActiveSpan=function(e,r,n,o){var i=this._getTracer();return Reflect.apply(i.startActiveSpan,i,arguments)},t.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):vu},t})();var Yi=(function(){function t(){}return t.prototype.getTracer=function(e,r,n){return new Fr},t})();var Nu=new Yi,no=(function(){function t(){}return t.prototype.getTracer=function(e,r,n){var o;return(o=this.getDelegateTracer(e,r,n))!==null&&o!==void 0?o:new Wi(this,e,r,n)},t.prototype.getDelegate=function(){var e;return(e=this._delegate)!==null&&e!==void 0?e:Nu},t.prototype.setDelegate=function(e){this._delegate=e},t.prototype.getDelegateTracer=function(e,r,n){var o;return(o=this._delegate)===null||o===void 0?void 0:o.getTracer(e,r,n)},t})();var Pe;(function(t){t[t.NOT_RECORD=0]="NOT_RECORD",t[t.RECORD=1]="RECORD",t[t.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(Pe||(Pe={}));var Kt;(function(t){t[t.INTERNAL=0]="INTERNAL",t[t.SERVER=1]="SERVER",t[t.CLIENT=2]="CLIENT",t[t.PRODUCER=3]="PRODUCER",t[t.CONSUMER=4]="CONSUMER"})(Kt||(Kt={}));var St;(function(t){t[t.UNSET=0]="UNSET",t[t.OK=1]="OK",t[t.ERROR=2]="ERROR"})(St||(St={}));var B=re.getInstance();var N=ft.instance();var xu=(function(){function t(){}return t.prototype.getMeter=function(e,r,n){return Hi},t})();var $i=new xu;var oo="metrics",qi=(function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalMeterProvider=function(e){return wt(oo,e,ft.instance())},t.prototype.getMeterProvider=function(){return gt(oo)||$i},t.prototype.getMeter=function(e,r,n){return this.getMeterProvider().getMeter(e,r,n)},t.prototype.disable=function(){Dt(oo,ft.instance())},t})();var fe=qi.getInstance();var Xi=(function(){function t(){}return t.prototype.inject=function(e,r){},t.prototype.extract=function(e,r){return e},t.prototype.fields=function(){return[]},t})();var io=le("OpenTelemetry Baggage Key");function so(t){return t.getValue(io)||void 0}function Qi(){return so(re.getInstance().active())}function Ji(t,e){return t.setValue(io,e)}function ts(t){return t.deleteValue(io)}var ao="propagation",bu=new Xi,es=(function(){function t(){this.createBaggage=Ui,this.getBaggage=so,this.getActiveBaggage=Qi,this.setBaggage=Ji,this.deleteBaggage=ts}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalPropagator=function(e){return wt(ao,e,ft.instance())},t.prototype.inject=function(e,r,n){return n===void 0&&(n=Bi),this._getGlobalPropagator().inject(e,r,n)},t.prototype.extract=function(e,r,n){return n===void 0&&(n=Gi),this._getGlobalPropagator().extract(e,r,n)},t.prototype.fields=function(){return this._getGlobalPropagator().fields()},t.prototype.disable=function(){Dt(ao,ft.instance())},t.prototype._getGlobalPropagator=function(){return gt(ao)||bu},t})();var it=es.getInstance();var co="trace",rs=(function(){function t(){this._proxyTracerProvider=new no,this.wrapSpanContext=Ki,this.isSpanContextValid=Zt,this.deleteSpan=ji,this.getSpan=Gr,this.getActiveSpan=Fi,this.getSpanContext=Br,this.setSpan=$e,this.setSpanContext=zi}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalTracerProvider=function(e){var r=wt(co,this._proxyTracerProvider,ft.instance());return r&&this._proxyTracerProvider.setDelegate(e),r},t.prototype.getTracerProvider=function(){return gt(co)||this._proxyTracerProvider},t.prototype.getTracer=function(e,r){return this.getTracerProvider().getTracer(e,r)},t.prototype.disable=function(){Dt(co,ft.instance()),this._proxyTracerProvider=new no},t})();var z=rs.getInstance();var ns=le("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function uo(t){return t.setValue(ns,!0)}function _e(t){return t.getValue(ns)===!0}var zr="baggage";function os(t){return t.reduce((e,r)=>{let n=`${e}${e!==""?",":""}${r}`;return n.length>8192?e:n},"")}function is(t){return t.getAllEntries().map(([e,r])=>{let n=`${encodeURIComponent(e)}=${encodeURIComponent(r.value)}`;return r.metadata!==void 0&&(n+=";"+r.metadata.toString()),n})}function ss(t){if(!t)return;let e=t.indexOf(";"),r=e===-1?t:t.substring(0,e),n=r.indexOf("=");if(n<=0)return;let o=r.substring(0,n).trim(),i=r.substring(n+1).trim();if(!o||!i)return;let s,a;try{s=decodeURIComponent(o),a=decodeURIComponent(i)}catch(u){return}let c;if(e!==-1&&e<t.length-1){let u=t.substring(e+1);c=Qn(u)}return{key:s,value:a,metadata:c}}var de=class{inject(e,r,n){let o=it.getBaggage(e);if(!o||_e(e))return;let i=is(o).filter(a=>a.length<=4096).slice(0,180),s=os(i);s.length>0&&n.set(r,zr,s)}extract(e,r,n){let o=n.get(r,zr),i=Array.isArray(o)?o.join(","):o;if(!i)return e;let s={};return i.length===0||(i.split(",").forEach(c=>{let u=ss(c);if(u){let p={value:u.value};u.metadata&&(p.metadata=u.metadata),s[u.key]=p}}),Object.entries(s).length===0)?e:it.setBaggage(e,it.createBaggage(s))}fields(){return[zr]}};function he(t){let e={};if(typeof t!="object"||t==null)return e;for(let r in t){if(!Object.prototype.hasOwnProperty.call(t,r))continue;if(!wu(r)){N.warn(`Invalid attribute key: ${r}`);continue}let n=t[r];if(!Zr(n)){N.warn(`Invalid attribute value set for key: ${r}`);continue}Array.isArray(n)?e[r]=n.slice():e[r]=n}return e}function wu(t){return typeof t=="string"&&t!==""}function Zr(t){return t==null?!0:Array.isArray(t)?Du(t):as(typeof t)}function Du(t){let e;for(let r of t){if(r==null)continue;let n=typeof r;if(n!==e){if(!e){if(as(n)){e=n;continue}return!1}return!1}}return!0}function as(t){switch(t){case"number":case"boolean":case"string":return!0}return!1}function cs(){return t=>{N.error(Iu(t))}}function Iu(t){return typeof t=="string"?t:JSON.stringify(Mu(t))}function Mu(t){let e={},r=t;for(;r!==null;)Object.getOwnPropertyNames(r).forEach(n=>{if(e[n])return;let o=r[n];o&&(e[n]=String(o))}),r=Object.getPrototypeOf(r);return e}var ku=cs();function bt(t){try{ku(t)}catch(e){}}var us="2.5.0";var qe="error.type";var Kr="exception.message",ls="exception.stacktrace",Wr="exception.type";var Yr="http.request.method";var $r="http.request.method_original";var qr="http.response.status_code";var Xr="server.address",Qr="server.port",Jr="service.name";var Xe="telemetry.sdk.language";var ps="webjs",Qe="telemetry.sdk.name",Je="telemetry.sdk.version";var oe="url.full";var fs="user_agent.original";var _s="process.runtime.name";var Le={[Qe]:"opentelemetry",[_s]:"browser",[Xe]:ps,[Je]:us};var ct=performance;var Uu=9,Hu=6,Gu=Math.pow(10,Hu),tn=Math.pow(10,Uu);function It(t){let e=t/1e3,r=Math.trunc(e),n=Math.round(t%1e3*Gu);return[r,n]}function Wt(t){let e=It(ct.timeOrigin),r=It(typeof t=="number"?t:ct.now());return rn(e,r)}function Te(t){if(tr(t))return t;if(typeof t=="number")return t<ct.timeOrigin?Wt(t):It(t);if(t instanceof Date)return It(t.getTime());throw TypeError("Invalid input type")}function po(t,e){let r=e[0]-t[0],n=e[1]-t[1];return n<0&&(r-=1,n+=tn),[r,n]}function Rt(t){return t[0]*tn+t[1]}function tr(t){return Array.isArray(t)&&t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number"}function en(t){return tr(t)||typeof t=="number"||t instanceof Date}function rn(t,e){let r=[t[0]+e[0],t[1]+e[1]];return r[1]>=tn&&(r[1]-=tn,r[0]+=1),r}var At;(function(t){t[t.SUCCESS=0]="SUCCESS",t[t.FAILED=1]="FAILED"})(At||(At={}));var me=class{constructor(e={}){l(this,"_propagators");l(this,"_fields");var r;this._propagators=(r=e.propagators)!=null?r:[],this._fields=Array.from(new Set(this._propagators.map(n=>typeof n.fields=="function"?n.fields():[]).reduce((n,o)=>n.concat(o),[])))}inject(e,r,n){for(let o of this._propagators)try{o.inject(e,r,n)}catch(i){N.warn(`Failed to inject with ${o.constructor.name}. Err: ${i.message}`)}}extract(e,r,n){return this._propagators.reduce((o,i)=>{try{return i.extract(o,r,n)}catch(s){N.warn(`Failed to extract with ${i.constructor.name}. Err: ${s.message}`)}return o},e)}fields(){return this._fields.slice()}};var fo="[_0-9a-z-*/]",Bu=`[a-z]${fo}{0,255}`,Vu=`[a-z0-9]${fo}{0,240}@[a-z]${fo}{0,13}`,Fu=new RegExp(`^(?:${Bu}|${Vu})$`),ju=/^[ -~]{0,255}[!-~]$/,zu=/,|=/;function ds(t){return Fu.test(t)}function hs(t){return ju.test(t)&&!zu.test(t)}var Ts=32,Zu=512,ms=",",Es="=",nn=class t{constructor(e){l(this,"_internalState",new Map);e&&this._parse(e)}set(e,r){let n=this._clone();return n._internalState.has(e)&&n._internalState.delete(e),n._internalState.set(e,r),n}unset(e){let r=this._clone();return r._internalState.delete(e),r}get(e){return this._internalState.get(e)}serialize(){return this._keys().reduce((e,r)=>(e.push(r+Es+this.get(r)),e),[]).join(ms)}_parse(e){e.length>Zu||(this._internalState=e.split(ms).reverse().reduce((r,n)=>{let o=n.trim(),i=o.indexOf(Es);if(i!==-1){let s=o.slice(0,i),a=o.slice(i+1,n.length);ds(s)&&hs(a)&&r.set(s,a)}return r},new Map),this._internalState.size>Ts&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,Ts))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let e=new t;return e._internalState=new Map(this._internalState),e}};var Ce="traceparent",on="tracestate",Ku="00",Wu="(?!ff)[\\da-f]{2}",Yu="(?![0]{32})[\\da-f]{32}",$u="(?![0]{16})[\\da-f]{16}",qu="[\\da-f]{2}",Xu=new RegExp(`^\\s?(${Wu})-(${Yu})-(${$u})-(${qu})(-.*)?\\s?$`);function gs(t){let e=Xu.exec(t);return!e||e[1]==="00"&&e[5]?null:{traceId:e[2],spanId:e[3],traceFlags:parseInt(e[4],16)}}var Ee=class{inject(e,r,n){let o=z.getSpanContext(e);if(!o||_e(e)||!Zt(o))return;let i=`${Ku}-${o.traceId}-${o.spanId}-0${Number(o.traceFlags||Tt.NONE).toString(16)}`;n.set(r,Ce,i),o.traceState&&n.set(r,on,o.traceState.serialize())}extract(e,r,n){let o=n.get(r,Ce);if(!o)return e;let i=Array.isArray(o)?o[0]:o;if(typeof i!="string")return e;let s=gs(i);if(!s)return e;s.isRemote=!0;let a=n.get(r,on);if(a){let c=Array.isArray(a)?a.join(","):a;s.traceState=new nn(typeof c=="string"?c:void 0)}return z.setSpanContext(e,s)}fields(){return[Ce,on]}};var Qu="[object Object]",Ju="[object Null]",tl="[object Undefined]",el=Function.prototype,Ss=el.toString,rl=Ss.call(Object),nl=Object.getPrototypeOf,As=Object.prototype,Rs=As.hasOwnProperty,ge=Symbol?Symbol.toStringTag:void 0,ys=As.toString;function _o(t){if(!ol(t)||il(t)!==Qu)return!1;let e=nl(t);if(e===null)return!0;let r=Rs.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&Ss.call(r)===rl}function ol(t){return t!=null&&typeof t=="object"}function il(t){return t==null?t===void 0?tl:Ju:ge&&ge in Object(t)?sl(t):al(t)}function sl(t){let e=Rs.call(t,ge),r=t[ge],n=!1;try{t[ge]=void 0,n=!0}catch(i){}let o=ys.call(t);return n&&(e?t[ge]=r:delete t[ge]),o}function al(t){return ys.call(t)}var cl=20;function To(...t){let e=t.shift(),r=new WeakMap;for(;t.length>0;)e=vs(e,t.shift(),0,r);return e}function ho(t){return an(t)?t.slice():t}function vs(t,e,r=0,n){let o;if(!(r>cl)){if(r++,sn(t)||sn(e)||Ns(e))o=ho(e);else if(an(t)){if(o=t.slice(),an(e))for(let i=0,s=e.length;i<s;i++)o.push(ho(e[i]));else if(er(e)){let i=Object.keys(e);for(let s=0,a=i.length;s<a;s++){let c=i[s];o[c]=ho(e[c])}}}else if(er(t))if(er(e)){if(!ul(t,e))return e;o=Object.assign({},t);let i=Object.keys(e);for(let s=0,a=i.length;s<a;s++){let c=i[s],u=e[c];if(sn(u))typeof u=="undefined"?delete o[c]:o[c]=u;else{let p=o[c],T=u;if(Os(t,c,n)||Os(e,c,n))delete o[c];else{if(er(p)&&er(T)){let E=n.get(p)||[],O=n.get(T)||[];E.push({obj:t,key:c}),O.push({obj:e,key:c}),n.set(p,E),n.set(T,O)}o[c]=vs(o[c],u,r,n)}}}}else o=e;return o}}function Os(t,e,r){let n=r.get(t[e])||[];for(let o=0,i=n.length;o<i;o++){let s=n[o];if(s.key===e&&s.obj===t)return!0}return!1}function an(t){return Array.isArray(t)}function Ns(t){return typeof t=="function"}function er(t){return!sn(t)&&!an(t)&&!Ns(t)&&typeof t=="object"}function sn(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="undefined"||t instanceof Date||t instanceof RegExp||t===null}function ul(t,e){return!(!_o(t)||!_o(e))}function cn(t,e){return typeof e=="string"?t===e:!!t.match(e)}function mo(t,e){if(!e)return!1;for(let r of e)if(cn(t,r))return!0;return!1}var un=class{constructor(){l(this,"_promise");l(this,"_resolve");l(this,"_reject");this._promise=new Promise((e,r)=>{this._resolve=e,this._reject=r})}get promise(){return this._promise}resolve(e){this._resolve(e)}reject(e){this._reject(e)}};var rr=class{constructor(e,r){l(this,"_isCalled",!1);l(this,"_deferred",new un);l(this,"_callback");l(this,"_that");this._callback=e,this._that=r}get isCalled(){return this._isCalled}get promise(){return this._deferred.promise}call(...e){if(!this._isCalled){this._isCalled=!0;try{Promise.resolve(this._callback.call(this._that,...e)).then(r=>this._deferred.resolve(r),r=>this._deferred.reject(r))}catch(r){this._deferred.reject(r)}}return this._deferred.promise}};var ln;function xs(){if(ln===void 0)try{let t=globalThis.process.argv0;ln=t?`unknown_service:${t}`:"unknown_service"}catch(t){ln="unknown_service"}return ln}var we=t=>t!==null&&typeof t=="object"&&typeof t.then=="function";var pn=class t{constructor(e,r){l(this,"_rawAttributes");l(this,"_asyncAttributesPending",!1);l(this,"_schemaUrl");l(this,"_memoizedAttributes");var o;let n=(o=e.attributes)!=null?o:{};this._rawAttributes=Object.entries(n).map(([i,s])=>(we(s)&&(this._asyncAttributesPending=!0),[i,s])),this._rawAttributes=bs(this._rawAttributes),this._schemaUrl=pl(r==null?void 0:r.schemaUrl)}static FromAttributeList(e,r){let n=new t({},r);return n._rawAttributes=bs(e),n._asyncAttributesPending=e.filter(([o,i])=>we(i)).length>0,n}get asyncAttributesPending(){return this._asyncAttributesPending}async waitForAsyncAttributes(){if(this.asyncAttributesPending){for(let e=0;e<this._rawAttributes.length;e++){let[r,n]=this._rawAttributes[e];this._rawAttributes[e]=[r,we(n)?await n:n]}this._asyncAttributesPending=!1}}get attributes(){var r;if(this.asyncAttributesPending&&N.error("Accessing resource attributes before async attributes settled"),this._memoizedAttributes)return this._memoizedAttributes;let e={};for(let[n,o]of this._rawAttributes){if(we(o)){N.debug(`Unsettled resource attribute ${n} skipped`);continue}o!=null&&((r=e[n])!=null||(e[n]=o))}return this._asyncAttributesPending||(this._memoizedAttributes=e),e}getRawAttributes(){return this._rawAttributes}get schemaUrl(){return this._schemaUrl}merge(e){if(e==null)return this;let r=fl(this,e),n=r?{schemaUrl:r}:void 0;return t.FromAttributeList([...e.getRawAttributes(),...this.getRawAttributes()],n)}};function nr(t,e){return pn.FromAttributeList(Object.entries(t),e)}function Ps(t,e){return new pn(t,e)}function Se(){return nr({})}function Eo(){return nr({[Jr]:xs(),[Xe]:Le[Xe],[Qe]:Le[Qe],[Je]:Le[Je]})}function bs(t){return t.map(([e,r])=>we(r)?[e,r.catch(n=>{N.debug("promise rejection for resource attribute: %s - %s",e,n)})]:[e,r])}function pl(t){if(typeof t=="string"||t===void 0)return t;N.warn("Schema URL must be string or undefined, got %s. Schema URL will be ignored.",t)}function fl(t,e){let r=t==null?void 0:t.schemaUrl,n=e==null?void 0:e.schemaUrl,o=r===void 0||r==="",i=n===void 0||n==="";if(o)return n;if(i||r===n)return r;N.warn('Schema URL merge conflict: old resource has "%s", updating resource has "%s". Resulting resource will have undefined Schema URL.',r,n)}var go=(t={})=>(t.detectors||[]).map(r=>{try{let n=Ps(r.detect(t));return N.debug(`${r.constructor.name} found resource.`,n),n}catch(n){return N.debug(`${r.constructor.name} failed: ${n.message}`),Se()}}).reduce((r,n)=>r.merge(n),Se());var Ls="exception";var fn=class{constructor(e){l(this,"_spanContext");l(this,"kind");l(this,"parentSpanContext");l(this,"attributes",{});l(this,"links",[]);l(this,"events",[]);l(this,"startTime");l(this,"resource");l(this,"instrumentationScope");l(this,"_droppedAttributesCount",0);l(this,"_droppedEventsCount",0);l(this,"_droppedLinksCount",0);l(this,"name");l(this,"status",{code:St.UNSET});l(this,"endTime",[0,0]);l(this,"_ended",!1);l(this,"_duration",[-1,-1]);l(this,"_spanProcessor");l(this,"_spanLimits");l(this,"_attributeValueLengthLimit");l(this,"_performanceStartTime");l(this,"_performanceOffset");l(this,"_startTimeProvided");var n;let r=Date.now();this._spanContext=e.spanContext,this._performanceStartTime=ct.now(),this._performanceOffset=r-(this._performanceStartTime+ct.timeOrigin),this._startTimeProvided=e.startTime!=null,this._spanLimits=e.spanLimits,this._attributeValueLengthLimit=this._spanLimits.attributeValueLengthLimit||0,this._spanProcessor=e.spanProcessor,this.name=e.name,this.parentSpanContext=e.parentSpanContext,this.kind=e.kind,this.links=e.links||[],this.startTime=this._getTime((n=e.startTime)!=null?n:r),this.resource=e.resource,this.instrumentationScope=e.scope,e.attributes!=null&&this.setAttributes(e.attributes),this._spanProcessor.onStart(this,e.context)}spanContext(){return this._spanContext}setAttribute(e,r){if(r==null||this._isSpanEnded())return this;if(e.length===0)return N.warn(`Invalid attribute key: ${e}`),this;if(!Zr(r))return N.warn(`Invalid attribute value set for key: ${e}`),this;let{attributeCountLimit:n}=this._spanLimits;return n!==void 0&&Object.keys(this.attributes).length>=n&&!Object.prototype.hasOwnProperty.call(this.attributes,e)?(this._droppedAttributesCount++,this):(this.attributes[e]=this._truncateToSize(r),this)}setAttributes(e){for(let[r,n]of Object.entries(e))this.setAttribute(r,n);return this}addEvent(e,r,n){if(this._isSpanEnded())return this;let{eventCountLimit:o}=this._spanLimits;if(o===0)return N.warn("No events allowed."),this._droppedEventsCount++,this;o!==void 0&&this.events.length>=o&&(this._droppedEventsCount===0&&N.debug("Dropping extra events."),this.events.shift(),this._droppedEventsCount++),en(r)&&(en(n)||(n=r),r=void 0);let i=he(r);return this.events.push({name:e,attributes:i,time:this._getTime(n),droppedAttributesCount:0}),this}addLink(e){return this.links.push(e),this}addLinks(e){return this.links.push(...e),this}setStatus(e){return this._isSpanEnded()?this:(this.status={...e},this.status.message!=null&&typeof e.message!="string"&&(N.warn(`Dropping invalid status.message of type '${typeof e.message}', expected 'string'`),delete this.status.message),this)}updateName(e){return this._isSpanEnded()?this:(this.name=e,this)}end(e){if(this._isSpanEnded()){N.error(`${this.name} ${this._spanContext.traceId}-${this._spanContext.spanId} - You can only call end() on a span once.`);return}this.endTime=this._getTime(e),this._duration=po(this.startTime,this.endTime),this._duration[0]<0&&(N.warn("Inconsistent start and end time, startTime > endTime. Setting span duration to 0ms.",this.startTime,this.endTime),this.endTime=this.startTime.slice(),this._duration=[0,0]),this._droppedEventsCount>0&&N.warn(`Dropped ${this._droppedEventsCount} events because eventCountLimit reached`),this._spanProcessor.onEnding&&this._spanProcessor.onEnding(this),this._ended=!0,this._spanProcessor.onEnd(this)}_getTime(e){if(typeof e=="number"&&e<=ct.now())return Wt(e+this._performanceOffset);if(typeof e=="number")return It(e);if(e instanceof Date)return It(e.getTime());if(tr(e))return e;if(this._startTimeProvided)return It(Date.now());let r=ct.now()-this._performanceStartTime;return rn(this.startTime,It(r))}isRecording(){return this._ended===!1}recordException(e,r){let n={};typeof e=="string"?n[Kr]=e:e&&(e.code?n[Wr]=e.code.toString():e.name&&(n[Wr]=e.name),e.message&&(n[Kr]=e.message),e.stack&&(n[ls]=e.stack)),n[Wr]||n[Kr]?this.addEvent(Ls,n,r):N.warn(`Failed to record an exception ${e}`)}get duration(){return this._duration}get ended(){return this._ended}get droppedAttributesCount(){return this._droppedAttributesCount}get droppedEventsCount(){return this._droppedEventsCount}get droppedLinksCount(){return this._droppedLinksCount}_isSpanEnded(){if(this._ended){let e=new Error(`Operation attempted on ended Span {traceId: ${this._spanContext.traceId}, spanId: ${this._spanContext.spanId}}`);N.warn(`Cannot execute the operation on ended Span {traceId: ${this._spanContext.traceId}, spanId: ${this._spanContext.spanId}}`,e)}return this._ended}_truncateToLimitUtil(e,r){return e.length<=r?e:e.substring(0,r)}_truncateToSize(e){let r=this._attributeValueLengthLimit;return r<=0?(N.warn(`Attribute value limit must be positive, got ${r}`),e):typeof e=="string"?this._truncateToLimitUtil(e,r):Array.isArray(e)?e.map(n=>typeof n=="string"?this._truncateToLimitUtil(n,r):n):e}};var Yt;(function(t){t[t.NOT_RECORD=0]="NOT_RECORD",t[t.RECORD=1]="RECORD",t[t.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(Yt||(Yt={}));var ie=class{shouldSample(){return{decision:Yt.NOT_RECORD}}toString(){return"AlwaysOffSampler"}};var Mt=class{shouldSample(){return{decision:Yt.RECORD_AND_SAMPLED}}toString(){return"AlwaysOnSampler"}};var Ae=class{constructor(e){l(this,"_root");l(this,"_remoteParentSampled");l(this,"_remoteParentNotSampled");l(this,"_localParentSampled");l(this,"_localParentNotSampled");var r,n,o,i;this._root=e.root,this._root||(bt(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new Mt),this._remoteParentSampled=(r=e.remoteParentSampled)!=null?r:new Mt,this._remoteParentNotSampled=(n=e.remoteParentNotSampled)!=null?n:new ie,this._localParentSampled=(o=e.localParentSampled)!=null?o:new Mt,this._localParentNotSampled=(i=e.localParentNotSampled)!=null?i:new ie}shouldSample(e,r,n,o,i,s){let a=z.getSpanContext(e);return!a||!Zt(a)?this._root.shouldSample(e,r,n,o,i,s):a.isRemote?a.traceFlags&Tt.SAMPLED?this._remoteParentSampled.shouldSample(e,r,n,o,i,s):this._remoteParentNotSampled.shouldSample(e,r,n,o,i,s):a.traceFlags&Tt.SAMPLED?this._localParentSampled.shouldSample(e,r,n,o,i,s):this._localParentNotSampled.shouldSample(e,r,n,o,i,s)}toString(){return`ParentBased{root=${this._root.toString()}, remoteParentSampled=${this._remoteParentSampled.toString()}, remoteParentNotSampled=${this._remoteParentNotSampled.toString()}, localParentSampled=${this._localParentSampled.toString()}, localParentNotSampled=${this._localParentNotSampled.toString()}}`}};var or=class{constructor(e=0){l(this,"_ratio");l(this,"_upperBound");this._ratio=this._normalize(e),this._upperBound=Math.floor(this._ratio*4294967295)}shouldSample(e,r){return{decision:Vr(r)&&this._accumulate(r)<this._upperBound?Yt.RECORD_AND_SAMPLED:Yt.NOT_RECORD}}toString(){return`TraceIdRatioBased{${this._ratio}}`}_normalize(e){return typeof e!="number"||isNaN(e)?0:e>=1?1:e<=0?0:e}_accumulate(e){let r=0;for(let n=0;n<e.length/8;n++){let o=n*8,i=parseInt(e.slice(o,o+8),16);r=(r^i)>>>0}return r}};var kt;(function(t){t.AlwaysOff="always_off",t.AlwaysOn="always_on",t.ParentBasedAlwaysOff="parentbased_always_off",t.ParentBasedAlwaysOn="parentbased_always_on",t.ParentBasedTraceIdRatio="parentbased_traceidratio",t.TraceIdRatio="traceidratio"})(kt||(kt={}));var _n=1;function dn(){var t,e,r,n,o,i,s,a;return{sampler:So(),forceFlushTimeoutMillis:3e4,generalLimits:{attributeValueLengthLimit:(t=void 0)!=null?t:1/0,attributeCountLimit:(e=void 0)!=null?e:128},spanLimits:{attributeValueLengthLimit:(r=void 0)!=null?r:1/0,attributeCountLimit:(n=void 0)!=null?n:128,linkCountLimit:(o=void 0)!=null?o:128,eventCountLimit:(i=void 0)!=null?i:128,attributePerEventCountLimit:(s=void 0)!=null?s:128,attributePerLinkCountLimit:(a=void 0)!=null?a:128}}}function So(){var e;let t=(e=void 0)!=null?e:kt.ParentBasedAlwaysOn;switch(t){case kt.AlwaysOn:return new Mt;case kt.AlwaysOff:return new ie;case kt.ParentBasedAlwaysOn:return new Ae({root:new Mt});case kt.ParentBasedAlwaysOff:return new Ae({root:new ie});case kt.TraceIdRatio:return new or(Cs());case kt.ParentBasedTraceIdRatio:return new Ae({root:new or(Cs())});default:return N.error(`OTEL_TRACES_SAMPLER value "${t}" invalid, defaulting to "${kt.ParentBasedAlwaysOn}".`),new Ae({root:new Mt})}}function Cs(){let t=void 0;return t==null?(N.error(`OTEL_TRACES_SAMPLER_ARG is blank, defaulting to ${_n}.`),_n):t<0||t>1?(N.error(`OTEL_TRACES_SAMPLER_ARG=${t} was given, but it is out of range ([0..1]), defaulting to ${_n}.`),_n):t}var _l=128,dl=1/0;function ws(t){let e={sampler:So()},r=dn(),n=Object.assign({},r,e,t);return n.generalLimits=Object.assign({},r.generalLimits,t.generalLimits||{}),n.spanLimits=Object.assign({},r.spanLimits,t.spanLimits||{}),n}function Ds(t){var r,n,o,i,s,a,c,u,p,T,E,O;let e=Object.assign({},t.spanLimits);return e.attributeCountLimit=(a=(s=(i=(o=(r=t.spanLimits)==null?void 0:r.attributeCountLimit)!=null?o:(n=t.generalLimits)==null?void 0:n.attributeCountLimit)!=null?i:void 0)!=null?s:void 0)!=null?a:_l,e.attributeValueLengthLimit=(O=(E=(T=(p=(c=t.spanLimits)==null?void 0:c.attributeValueLengthLimit)!=null?p:(u=t.generalLimits)==null?void 0:u.attributeValueLengthLimit)!=null?T:void 0)!=null?E:void 0)!=null?O:dl,Object.assign({},t,{spanLimits:e})}var hn=class{constructor(e,r){l(this,"_maxExportBatchSize");l(this,"_maxQueueSize");l(this,"_scheduledDelayMillis");l(this,"_exportTimeoutMillis");l(this,"_exporter");l(this,"_isExporting",!1);l(this,"_finishedSpans",[]);l(this,"_timer");l(this,"_shutdownOnce");l(this,"_droppedSpansCount",0);var n,o,i,s;this._exporter=e,this._maxExportBatchSize=typeof(r==null?void 0:r.maxExportBatchSize)=="number"?r.maxExportBatchSize:(n=void 0)!=null?n:512,this._maxQueueSize=typeof(r==null?void 0:r.maxQueueSize)=="number"?r.maxQueueSize:(o=void 0)!=null?o:2048,this._scheduledDelayMillis=typeof(r==null?void 0:r.scheduledDelayMillis)=="number"?r.scheduledDelayMillis:(i=void 0)!=null?i:5e3,this._exportTimeoutMillis=typeof(r==null?void 0:r.exportTimeoutMillis)=="number"?r.exportTimeoutMillis:(s=void 0)!=null?s:3e4,this._shutdownOnce=new rr(this._shutdown,this),this._maxExportBatchSize>this._maxQueueSize&&(N.warn("BatchSpanProcessor: maxExportBatchSize must be smaller or equal to maxQueueSize, setting maxExportBatchSize to match maxQueueSize"),this._maxExportBatchSize=this._maxQueueSize)}forceFlush(){return this._shutdownOnce.isCalled?this._shutdownOnce.promise:this._flushAll()}onStart(e,r){}onEnd(e){this._shutdownOnce.isCalled||(e.spanContext().traceFlags&Tt.SAMPLED)!==0&&this._addToBuffer(e)}shutdown(){return this._shutdownOnce.call()}_shutdown(){return Promise.resolve().then(()=>this.onShutdown()).then(()=>this._flushAll()).then(()=>this._exporter.shutdown())}_addToBuffer(e){if(this._finishedSpans.length>=this._maxQueueSize){this._droppedSpansCount===0&&N.debug("maxQueueSize reached, dropping spans"),this._droppedSpansCount++;return}this._droppedSpansCount>0&&(N.warn(`Dropped ${this._droppedSpansCount} spans because maxQueueSize reached`),this._droppedSpansCount=0),this._finishedSpans.push(e),this._maybeStartTimer()}_flushAll(){return new Promise((e,r)=>{let n=[],o=Math.ceil(this._finishedSpans.length/this._maxExportBatchSize);for(let i=0,s=o;i<s;i++)n.push(this._flushOneBatch());Promise.all(n).then(()=>{e()}).catch(r)})}_flushOneBatch(){return this._clearTimer(),this._finishedSpans.length===0?Promise.resolve():new Promise((e,r)=>{let n=setTimeout(()=>{r(new Error("Timeout"))},this._exportTimeoutMillis);B.with(uo(B.active()),()=>{let o;this._finishedSpans.length<=this._maxExportBatchSize?(o=this._finishedSpans,this._finishedSpans=[]):o=this._finishedSpans.splice(0,this._maxExportBatchSize);let i=()=>this._exporter.export(o,a=>{var c;clearTimeout(n),a.code===At.SUCCESS?e():r((c=a.error)!=null?c:new Error("BatchSpanProcessor: span export failed"))}),s=null;for(let a=0,c=o.length;a<c;a++){let u=o[a];u.resource.asyncAttributesPending&&u.resource.waitForAsyncAttributes&&(s!=null||(s=[]),s.push(u.resource.waitForAsyncAttributes()))}s===null?i():Promise.all(s).then(i,a=>{bt(a),r(a)})})})}_maybeStartTimer(){if(this._isExporting)return;let e=()=>{this._isExporting=!0,this._flushOneBatch().finally(()=>{this._isExporting=!1,this._finishedSpans.length>0&&(this._clearTimer(),this._maybeStartTimer())}).catch(r=>{this._isExporting=!1,bt(r)})};if(this._finishedSpans.length>=this._maxExportBatchSize)return e();this._timer===void 0&&(this._timer=setTimeout(()=>e(),this._scheduledDelayMillis),typeof this._timer!="number"&&this._timer.unref())}_clearTimer(){this._timer!==void 0&&(clearTimeout(this._timer),this._timer=void 0)}};var De=class extends hn{constructor(r,n){super(r,n);l(this,"_visibilityChangeListener");l(this,"_pageHideListener");this.onInit(n)}onInit(r){(r==null?void 0:r.disableAutoFlushOnDocumentHide)!==!0&&typeof document!="undefined"&&(this._visibilityChangeListener=()=>{document.visibilityState==="hidden"&&this.forceFlush().catch(n=>{bt(n)})},this._pageHideListener=()=>{this.forceFlush().catch(n=>{bt(n)})},document.addEventListener("visibilitychange",this._visibilityChangeListener),document.addEventListener("pagehide",this._pageHideListener))}onShutdown(){typeof document!="undefined"&&(this._visibilityChangeListener&&document.removeEventListener("visibilitychange",this._visibilityChangeListener),this._pageHideListener&&document.removeEventListener("pagehide",this._pageHideListener))}};var Ie=class{constructor(){l(this,"generateTraceId",Is(16));l(this,"generateSpanId",Is(8))}},Tn=Array(32);function Is(t){return function(){for(let r=0;r<t*2;r++)Tn[r]=Math.floor(Math.random()*16)+48,Tn[r]>=58&&(Tn[r]+=39);return String.fromCharCode.apply(null,Tn.slice(0,t*2))}}var mn=class{constructor(e,r,n,o){l(this,"_sampler");l(this,"_generalLimits");l(this,"_spanLimits");l(this,"_idGenerator");l(this,"instrumentationScope");l(this,"_resource");l(this,"_spanProcessor");let i=ws(r);this._sampler=i.sampler,this._generalLimits=i.generalLimits,this._spanLimits=i.spanLimits,this._idGenerator=r.idGenerator||new Ie,this._resource=n,this._spanProcessor=o,this.instrumentationScope=e}startSpan(e,r={},n=B.active()){var S,m,y;r.root&&(n=z.deleteSpan(n));let o=z.getSpan(n);if(_e(n))return N.debug("Instrumentation suppressed, returning Noop Span"),z.wrapSpanContext(Ye);let i=o==null?void 0:o.spanContext(),s=this._idGenerator.generateSpanId(),a,c,u;!i||!z.isSpanContextValid(i)?c=this._idGenerator.generateTraceId():(c=i.traceId,u=i.traceState,a=i);let p=(S=r.kind)!=null?S:Kt.INTERNAL,T=((m=r.links)!=null?m:[]).map(v=>({context:v.context,attributes:he(v.attributes)})),E=he(r.attributes),O=this._sampler.shouldSample(n,c,e,p,E,T);u=(y=O.traceState)!=null?y:u;let I=O.decision===Pe.RECORD_AND_SAMPLED?Tt.SAMPLED:Tt.NONE,U={traceId:c,spanId:s,traceFlags:I,traceState:u};if(O.decision===Pe.NOT_RECORD)return N.debug("Recording is off, propagating context in a non-recording span"),z.wrapSpanContext(U);let Q=he(Object.assign(E,O.attributes));return new fn({resource:this._resource,scope:this.instrumentationScope,context:n,spanContext:U,name:e,kind:p,links:T,parentSpanContext:a,attributes:Q,startTime:r.startTime,spanProcessor:this._spanProcessor,spanLimits:this._spanLimits})}startActiveSpan(e,r,n,o){let i,s,a;if(arguments.length<2)return;arguments.length===2?a=r:arguments.length===3?(i=r,a=n):(i=r,s=n,a=o);let c=s!=null?s:B.active(),u=this.startSpan(e,i,c),p=z.setSpan(c,u);return B.with(p,a,void 0,u)}getGeneralLimits(){return this._generalLimits}getSpanLimits(){return this._spanLimits}};var En=class{constructor(e){l(this,"_spanProcessors");this._spanProcessors=e}forceFlush(){let e=[];for(let r of this._spanProcessors)e.push(r.forceFlush());return new Promise(r=>{Promise.all(e).then(()=>{r()}).catch(n=>{bt(n||new Error("MultiSpanProcessor: forceFlush failed")),r()})})}onStart(e,r){for(let n of this._spanProcessors)n.onStart(e,r)}onEnding(e){for(let r of this._spanProcessors)r.onEnding&&r.onEnding(e)}onEnd(e){for(let r of this._spanProcessors)r.onEnd(e)}shutdown(){let e=[];for(let r of this._spanProcessors)e.push(r.shutdown());return new Promise((r,n)=>{Promise.all(e).then(()=>{r()},n)})}};var Re;(function(t){t[t.resolved=0]="resolved",t[t.timeout=1]="timeout",t[t.error=2]="error",t[t.unresolved=3]="unresolved"})(Re||(Re={}));var ir=class{constructor(e={}){l(this,"_config");l(this,"_tracers",new Map);l(this,"_resource");l(this,"_activeSpanProcessor");var o,i;let r=To({},dn(),Ds(e));this._resource=(o=r.resource)!=null?o:Eo(),this._config=Object.assign({},r,{resource:this._resource});let n=[];(i=e.spanProcessors)!=null&&i.length&&n.push(...e.spanProcessors),this._activeSpanProcessor=new En(n)}getTracer(e,r,n){let o=`${e}@${r||""}:${(n==null?void 0:n.schemaUrl)||""}`;return this._tracers.has(o)||this._tracers.set(o,new mn({name:e,version:r,schemaUrl:n==null?void 0:n.schemaUrl},this._config,this._resource,this._activeSpanProcessor)),this._tracers.get(o)}forceFlush(){let e=this._config.forceFlushTimeoutMillis,r=this._activeSpanProcessor._spanProcessors.map(n=>new Promise(o=>{let i,s=setTimeout(()=>{o(new Error(`Span processor did not completed within timeout period of ${e} ms`)),i=Re.timeout},e);n.forceFlush().then(()=>{clearTimeout(s),i!==Re.timeout&&(i=Re.resolved,o(i))}).catch(a=>{clearTimeout(s),i=Re.error,o(a)})}));return new Promise((n,o)=>{Promise.all(r).then(i=>{let s=i.filter(a=>a!==Re.resolved);s.length>0?o(s):n()}).catch(i=>o([i]))})}shutdown(){return this._activeSpanProcessor.shutdown()}};var gn=class{constructor(){l(this,"_enabled",!1);l(this,"_currentContext",ht)}_bindFunction(e=ht,r){let n=this,o=function(...i){return n.with(e,()=>r.apply(this,i))};return Object.defineProperty(o,"length",{enumerable:!1,configurable:!0,writable:!1,value:r.length}),o}active(){return this._currentContext}bind(e,r){return e===void 0&&(e=this.active()),typeof r=="function"?this._bindFunction(e,r):r}disable(){return this._currentContext=ht,this._enabled=!1,this}enable(){return this._enabled?this:(this._enabled=!0,this._currentContext=ht,this)}with(e,r,n,...o){let i=this._currentContext;this._currentContext=e||ht;try{return r.call(n,...o)}finally{this._currentContext=i}}};function hl(t){if(t!==null){if(t===void 0){let e=new gn;e.enable(),B.setGlobalContextManager(e);return}t.enable(),B.setGlobalContextManager(t)}}function Tl(t){if(t!==null){if(t===void 0){it.setGlobalPropagator(new me({propagators:[new Ee,new de]}));return}it.setGlobalPropagator(t)}}var sr=class extends ir{constructor(e={}){super(e)}register(e={}){z.setGlobalTracerProvider(this),Tl(e.propagator),hl(e.contextManager)}};var H;(function(t){t.CONNECT_END="connectEnd",t.CONNECT_START="connectStart",t.DECODED_BODY_SIZE="decodedBodySize",t.DOM_COMPLETE="domComplete",t.DOM_CONTENT_LOADED_EVENT_END="domContentLoadedEventEnd",t.DOM_CONTENT_LOADED_EVENT_START="domContentLoadedEventStart",t.DOM_INTERACTIVE="domInteractive",t.DOMAIN_LOOKUP_END="domainLookupEnd",t.DOMAIN_LOOKUP_START="domainLookupStart",t.ENCODED_BODY_SIZE="encodedBodySize",t.FETCH_START="fetchStart",t.LOAD_EVENT_END="loadEventEnd",t.LOAD_EVENT_START="loadEventStart",t.NAVIGATION_START="navigationStart",t.REDIRECT_END="redirectEnd",t.REDIRECT_START="redirectStart",t.REQUEST_START="requestStart",t.RESPONSE_END="responseEnd",t.RESPONSE_START="responseStart",t.SECURE_CONNECTION_START="secureConnectionStart",t.START_TIME="startTime",t.UNLOAD_EVENT_END="unloadEventEnd",t.UNLOAD_EVENT_START="unloadEventStart"})(H||(H={}));var Ms="http.response_content_length",ks="http.response_content_length_uncompressed";var Ao;function ml(){return Ao||(Ao=document.createElement("a")),Ao}function $t(t,e){return e in t}function st(t,e,r,n=!0){if($t(r,e)&&typeof r[e]=="number"&&!(n&&r[e]===0))return t.addEvent(e,r[e])}function ye(t,e,r=!1,n,o){if(n===void 0&&(n=e[H.START_TIME]!==0),r||(st(t,H.FETCH_START,e,n),st(t,H.DOMAIN_LOOKUP_START,e,n),st(t,H.DOMAIN_LOOKUP_END,e,n),st(t,H.CONNECT_START,e,n),st(t,H.SECURE_CONNECTION_START,e,n),st(t,H.CONNECT_END,e,n),st(t,H.REQUEST_START,e,n),st(t,H.RESPONSE_START,e,n),st(t,H.RESPONSE_END,e,n)),!o){let i=e[H.ENCODED_BODY_SIZE];i!==void 0&&t.setAttribute(Ms,i);let s=e[H.DECODED_BODY_SIZE];s!==void 0&&i!==s&&t.setAttribute(ks,s)}}function Us(t){return t.slice().sort((e,r)=>{let n=e[H.FETCH_START],o=r[H.FETCH_START];return n>o?1:n<o?-1:0})}function Hs(){return typeof location!="undefined"?location.origin:void 0}function Ro(t,e,r,n,o=new WeakSet,i){let s=qt(t);t=s.toString();let a=gl(t,e,r,n,o,i);if(a.length===0)return{mainRequest:void 0};if(a.length===1)return{mainRequest:a[0]};let c=Us(a);if(s.origin!==Hs()&&c.length>1){let u=c[0],p=El(c,u[H.RESPONSE_END],r),T=u[H.RESPONSE_END];return p[H.FETCH_START]<T&&(p=u,u=void 0),{corsPreFlightRequest:u,mainRequest:p}}else return{mainRequest:a[0]}}function El(t,e,r){let n=Rt(r),o=Rt(Te(e)),i=t[1],s,a=t.length;for(let c=1;c<a;c++){let u=t[c],p=Rt(Te(u[H.FETCH_START])),T=Rt(Te(u[H.RESPONSE_END])),E=n-T;p>=o&&(!s||E<s)&&(s=E,i=u)}return i}function gl(t,e,r,n,o,i){let s=Rt(e),a=Rt(r),c=n.filter(u=>{let p=Rt(Te(u[H.FETCH_START])),T=Rt(Te(u[H.RESPONSE_END]));return u.initiatorType.toLowerCase()===(i||"xmlhttprequest")&&u.name===t&&p>=s&&T<=a});return c.length>0&&(c=c.filter(u=>!o.has(u))),c}function qt(t){if(typeof URL=="function")return new URL(t,typeof document!="undefined"?document.baseURI:typeof location!="undefined"?location.href:void 0);let e=ml();return e.href=t,e}function Sn(t,e){if(t.nodeType===Node.DOCUMENT_NODE)return"/";let r=Al(t,e);if(e&&r.indexOf("@id")>0)return r;let n="";return t.parentNode&&(n+=Sn(t.parentNode,!1)),n+=r,n}function Sl(t){if(!t.parentNode)return 0;let e=[t.nodeType];t.nodeType===Node.CDATA_SECTION_NODE&&e.push(Node.TEXT_NODE);let r=Array.from(t.parentNode.childNodes);return r=r.filter(n=>{let o=n.localName;return e.indexOf(n.nodeType)>=0&&o===t.localName}),r.length>=1?r.indexOf(t)+1:0}function Al(t,e){let r=t.nodeType,n=Sl(t),o="";if(r===Node.ELEMENT_NODE){let i=t.getAttribute("id");if(e&&i)return`//*[@id="${i}"]`;o=t.localName}else if(r===Node.TEXT_NODE||r===Node.CDATA_SECTION_NODE)o="text()";else if(r===Node.COMMENT_NODE)o="comment()";else return"";return o&&n>1?`/${o}[${n}]`:`/${o}`}function yo(t,e){let r=e||[];return(typeof r=="string"||r instanceof RegExp)&&(r=[r]),qt(t).origin===Hs()?!0:r.some(o=>cn(t,o))}function Gs(t){return typeof t=="object"&&t!==null&&"addEventListener"in t&&typeof t.addEventListener=="function"&&"removeEventListener"in t&&typeof t.removeEventListener=="function"}var Bs="OT_ZONE_CONTEXT",Me=class{constructor(){l(this,"_enabled",!1);l(this,"_zoneCounter",0)}_activeContextFromZone(e){return e&&e.get(Bs)||ht}_bindFunction(e,r){let n=this,o=function(...i){return n.with(e,()=>r.apply(this,i))};return Object.defineProperty(o,"length",{enumerable:!1,configurable:!0,writable:!1,value:r.length}),o}_bindListener(e,r){let n=r;return n.__ot_listeners!==void 0||(n.__ot_listeners={},typeof n.addEventListener=="function"&&(n.addEventListener=this._patchAddEventListener(n,n.addEventListener,e)),typeof n.removeEventListener=="function"&&(n.removeEventListener=this._patchRemoveEventListener(n,n.removeEventListener))),r}_createZoneName(){this._zoneCounter++;let e=Math.random();return`${this._zoneCounter}-${e}`}_createZone(e,r){return Zone.current.fork({name:e,properties:{[Bs]:r}})}_getActiveZone(){return Zone.current}_patchAddEventListener(e,r,n){let o=this;return function(i,s,a){e.__ot_listeners===void 0&&(e.__ot_listeners={});let c=e.__ot_listeners[i];c===void 0&&(c=new WeakMap,e.__ot_listeners[i]=c);let u=o.bind(n,s);return c.set(s,u),r.call(this,i,u,a)}}_patchRemoveEventListener(e,r){return function(n,o){if(e.__ot_listeners===void 0||e.__ot_listeners[n]===void 0)return r.call(this,n,o);let i=e.__ot_listeners[n],s=i.get(o);return i.delete(o),r.call(this,n,s||o)}}active(){if(!this._enabled)return ht;let e=this._getActiveZone(),r=this._activeContextFromZone(e);return r||ht}bind(e,r){return e===void 0&&(e=this.active()),typeof r=="function"?this._bindFunction(e,r):(Gs(r)&&this._bindListener(e,r),r)}disable(){return this._enabled=!1,this}enable(){return this._enabled=!0,this}with(e,r,n,...o){let i=this._createZoneName();return this._createZone(i,e).run(r,n,o)}};var Rl=Object.defineProperty,yl=Object.defineProperties,Ol=Object.getOwnPropertyDescriptors,Vs=Object.getOwnPropertySymbols,vl=Object.prototype.hasOwnProperty,Nl=Object.prototype.propertyIsEnumerable,No=(t,e,r)=>e in t?Rl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Fs=(t,e)=>{for(var r in e||(e={}))vl.call(e,r)&&No(t,r,e[r]);if(Vs)for(var r of Vs(e))Nl.call(e,r)&&No(t,r,e[r]);return t},xl=(t,e)=>yl(t,Ol(e)),F=(t,e,r)=>(No(t,typeof e!="symbol"?e+"":e,r),r),Ut=globalThis;function yt(t){return(Ut.__Zone_symbol_prefix||"__zone_symbol__")+t}function bl(){let t=Ut.performance;function e(q){t&&t.mark&&t.mark(q)}function r(q,d){t&&t.measure&&t.measure(q,d)}e("Zone");let n=class xo{constructor(d,_){F(this,"_parent"),F(this,"_name"),F(this,"_properties"),F(this,"_zoneDelegate"),this._parent=d,this._name=_?_.name||"unnamed":"<root>",this._properties=_&&_.properties||{},this._zoneDelegate=new s(this,this._parent&&this._parent._zoneDelegate,_)}static assertZonePatched(){if(Ut.Promise!==M.ZoneAwarePromise)throw new Error("Zone.js has detected that ZoneAwarePromise `(window|global).Promise` has been overwritten.\nMost likely cause is that a Promise polyfill has been loaded after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. If you must load one, do so before loading zone.js.)")}static get root(){let d=xo.current;for(;d.parent;)d=d.parent;return d}static get current(){return b.zone}static get currentTask(){return lt}static __load_patch(d,_,f=!1){if(M.hasOwnProperty(d)){let w=Ut[yt("forceDuplicateZoneCheck")]===!0;if(!f&&w)throw Error("Already loaded patch: "+d)}else if(!Ut["__Zone_disable_"+d]){let w="Zone:"+d;e(w),M[d]=_(Ut,xo,D),r(w,w)}}get parent(){return this._parent}get name(){return this._name}get(d){let _=this.getZoneWith(d);if(_)return _._properties[d]}getZoneWith(d){let _=this;for(;_;){if(_._properties.hasOwnProperty(d))return _;_=_._parent}return null}fork(d){if(!d)throw new Error("ZoneSpec required!");return this._zoneDelegate.fork(this,d)}wrap(d,_){if(typeof d!="function")throw new Error("Expecting function got: "+d);let f=this._zoneDelegate.intercept(this,d,_),w=this;return function(){return w.runGuarded(f,this,arguments,_)}}run(d,_,f,w){b={parent:b,zone:this};try{return this._zoneDelegate.invoke(this,d,_,f,w)}finally{b=b.parent}}runGuarded(d,_=null,f,w){b={parent:b,zone:this};try{try{return this._zoneDelegate.invoke(this,d,_,f,w)}catch(X){if(this._zoneDelegate.handleError(this,X))throw X}}finally{b=b.parent}}runTask(d,_,f){if(d.zone!=this)throw new Error("A task can only be run in the zone of creation! (Creation: "+(d.zone||W).name+"; Execution: "+this.name+")");let w=d,{type:X,data:{isPeriodic:Y=!1,isRefreshable:Lt=!1}={}}=d;if(d.state===S&&(X===G||X===tt))return;let Ft=d.state!=v;Ft&&w._transitionTo(v,y);let jt=lt;lt=w,b={parent:b,zone:this};try{X==tt&&d.data&&!Y&&!Lt&&(d.cancelFn=void 0);try{return this._zoneDelegate.invokeTask(this,w,_,f)}catch(vt){if(this._zoneDelegate.handleError(this,vt))throw vt}}finally{let vt=d.state;if(vt!==S&&vt!==L)if(X==G||Y||Lt&&vt===m)Ft&&w._transitionTo(y,v,m);else{let R=w._zoneDelegates;this._updateTaskCount(w,-1),Ft&&w._transitionTo(S,v,S),Lt&&(w._zoneDelegates=R)}b=b.parent,lt=jt}}scheduleTask(d){if(d.zone&&d.zone!==this){let f=this;for(;f;){if(f===d.zone)throw Error(`can not reschedule task to ${this.name} which is descendants of the original zone ${d.zone.name}`);f=f.parent}}d._transitionTo(m,S);let _=[];d._zoneDelegates=_,d._zone=this;try{d=this._zoneDelegate.scheduleTask(this,d)}catch(f){throw d._transitionTo(L,m,S),this._zoneDelegate.handleError(this,f),f}return d._zoneDelegates===_&&this._updateTaskCount(d,1),d.state==m&&d._transitionTo(y,m),d}scheduleMicroTask(d,_,f,w){return this.scheduleTask(new a(x,d,_,f,w,void 0))}scheduleMacroTask(d,_,f,w,X){return this.scheduleTask(new a(tt,d,_,f,w,X))}scheduleEventTask(d,_,f,w,X){return this.scheduleTask(new a(G,d,_,f,w,X))}cancelTask(d){if(d.zone!=this)throw new Error("A task can only be cancelled in the zone of creation! (Creation: "+(d.zone||W).name+"; Execution: "+this.name+")");if(!(d.state!==y&&d.state!==v)){d._transitionTo(V,y,v);try{this._zoneDelegate.cancelTask(this,d)}catch(_){throw d._transitionTo(L,V),this._zoneDelegate.handleError(this,_),_}return this._updateTaskCount(d,-1),d._transitionTo(S,V),d.runCount=-1,d}}_updateTaskCount(d,_){let f=d._zoneDelegates;_==-1&&(d._zoneDelegates=null);for(let w=0;w<f.length;w++)f[w]._updateTaskCount(d.type,_)}};F(n,"__symbol__",yt);let o=n,i={name:"",onHasTask:(q,d,_,f)=>q.hasTask(_,f),onScheduleTask:(q,d,_,f)=>q.scheduleTask(_,f),onInvokeTask:(q,d,_,f,w,X)=>q.invokeTask(_,f,w,X),onCancelTask:(q,d,_,f)=>q.cancelTask(_,f)};class s{constructor(d,_,f){F(this,"_zone"),F(this,"_taskCounts",{microTask:0,macroTask:0,eventTask:0}),F(this,"_parentDelegate"),F(this,"_forkDlgt"),F(this,"_forkZS"),F(this,"_forkCurrZone"),F(this,"_interceptDlgt"),F(this,"_interceptZS"),F(this,"_interceptCurrZone"),F(this,"_invokeDlgt"),F(this,"_invokeZS"),F(this,"_invokeCurrZone"),F(this,"_handleErrorDlgt"),F(this,"_handleErrorZS"),F(this,"_handleErrorCurrZone"),F(this,"_scheduleTaskDlgt"),F(this,"_scheduleTaskZS"),F(this,"_scheduleTaskCurrZone"),F(this,"_invokeTaskDlgt"),F(this,"_invokeTaskZS"),F(this,"_invokeTaskCurrZone"),F(this,"_cancelTaskDlgt"),F(this,"_cancelTaskZS"),F(this,"_cancelTaskCurrZone"),F(this,"_hasTaskDlgt"),F(this,"_hasTaskDlgtOwner"),F(this,"_hasTaskZS"),F(this,"_hasTaskCurrZone"),this._zone=d,this._parentDelegate=_,this._forkZS=f&&(f&&f.onFork?f:_._forkZS),this._forkDlgt=f&&(f.onFork?_:_._forkDlgt),this._forkCurrZone=f&&(f.onFork?this._zone:_._forkCurrZone),this._interceptZS=f&&(f.onIntercept?f:_._interceptZS),this._interceptDlgt=f&&(f.onIntercept?_:_._interceptDlgt),this._interceptCurrZone=f&&(f.onIntercept?this._zone:_._interceptCurrZone),this._invokeZS=f&&(f.onInvoke?f:_._invokeZS),this._invokeDlgt=f&&(f.onInvoke?_:_._invokeDlgt),this._invokeCurrZone=f&&(f.onInvoke?this._zone:_._invokeCurrZone),this._handleErrorZS=f&&(f.onHandleError?f:_._handleErrorZS),this._handleErrorDlgt=f&&(f.onHandleError?_:_._handleErrorDlgt),this._handleErrorCurrZone=f&&(f.onHandleError?this._zone:_._handleErrorCurrZone),this._scheduleTaskZS=f&&(f.onScheduleTask?f:_._scheduleTaskZS),this._scheduleTaskDlgt=f&&(f.onScheduleTask?_:_._scheduleTaskDlgt),this._scheduleTaskCurrZone=f&&(f.onScheduleTask?this._zone:_._scheduleTaskCurrZone),this._invokeTaskZS=f&&(f.onInvokeTask?f:_._invokeTaskZS),this._invokeTaskDlgt=f&&(f.onInvokeTask?_:_._invokeTaskDlgt),this._invokeTaskCurrZone=f&&(f.onInvokeTask?this._zone:_._invokeTaskCurrZone),this._cancelTaskZS=f&&(f.onCancelTask?f:_._cancelTaskZS),this._cancelTaskDlgt=f&&(f.onCancelTask?_:_._cancelTaskDlgt),this._cancelTaskCurrZone=f&&(f.onCancelTask?this._zone:_._cancelTaskCurrZone),this._hasTaskZS=null,this._hasTaskDlgt=null,this._hasTaskDlgtOwner=null,this._hasTaskCurrZone=null;let w=f&&f.onHasTask,X=_&&_._hasTaskZS;(w||X)&&(this._hasTaskZS=w?f:i,this._hasTaskDlgt=_,this._hasTaskDlgtOwner=this,this._hasTaskCurrZone=this._zone,f.onScheduleTask||(this._scheduleTaskZS=i,this._scheduleTaskDlgt=_,this._scheduleTaskCurrZone=this._zone),f.onInvokeTask||(this._invokeTaskZS=i,this._invokeTaskDlgt=_,this._invokeTaskCurrZone=this._zone),f.onCancelTask||(this._cancelTaskZS=i,this._cancelTaskDlgt=_,this._cancelTaskCurrZone=this._zone))}get zone(){return this._zone}fork(d,_){return this._forkZS?this._forkZS.onFork(this._forkDlgt,this.zone,d,_):new o(d,_)}intercept(d,_,f){return this._interceptZS?this._interceptZS.onIntercept(this._interceptDlgt,this._interceptCurrZone,d,_,f):_}invoke(d,_,f,w,X){return this._invokeZS?this._invokeZS.onInvoke(this._invokeDlgt,this._invokeCurrZone,d,_,f,w,X):_.apply(f,w)}handleError(d,_){return this._handleErrorZS?this._handleErrorZS.onHandleError(this._handleErrorDlgt,this._handleErrorCurrZone,d,_):!0}scheduleTask(d,_){let f=_;if(this._scheduleTaskZS)this._hasTaskZS&&f._zoneDelegates.push(this._hasTaskDlgtOwner),f=this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt,this._scheduleTaskCurrZone,d,_),f||(f=_);else if(_.scheduleFn)_.scheduleFn(_);else if(_.type==x)U(_);else throw new Error("Task is missing scheduleFn.");return f}invokeTask(d,_,f,w){return this._invokeTaskZS?this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt,this._invokeTaskCurrZone,d,_,f,w):_.callback.apply(f,w)}cancelTask(d,_){let f;if(this._cancelTaskZS)f=this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt,this._cancelTaskCurrZone,d,_);else{if(!_.cancelFn)throw Error("Task is not cancelable");f=_.cancelFn(_)}return f}hasTask(d,_){try{this._hasTaskZS&&this._hasTaskZS.onHasTask(this._hasTaskDlgt,this._hasTaskCurrZone,d,_)}catch(f){this.handleError(d,f)}}_updateTaskCount(d,_){let f=this._taskCounts,w=f[d],X=f[d]=w+_;if(X<0)throw new Error("More tasks executed then were scheduled.");if(w==0||X==0){let Y={microTask:f.microTask>0,macroTask:f.macroTask>0,eventTask:f.eventTask>0,change:d};this.hasTask(this._zone,Y)}}}class a{constructor(d,_,f,w,X,Y){if(F(this,"type"),F(this,"source"),F(this,"invoke"),F(this,"callback"),F(this,"data"),F(this,"scheduleFn"),F(this,"cancelFn"),F(this,"_zone",null),F(this,"runCount",0),F(this,"_zoneDelegates",null),F(this,"_state","notScheduled"),this.type=d,this.source=_,this.data=w,this.scheduleFn=X,this.cancelFn=Y,!f)throw new Error("callback is not defined");this.callback=f;let Lt=this;d===G&&w&&w.useG?this.invoke=a.invokeTask:this.invoke=function(){return a.invokeTask.call(Ut,Lt,this,arguments)}}static invokeTask(d,_,f){d||(d=this),pt++;try{return d.runCount++,d.zone.runTask(d,_,f)}finally{pt==1&&Q(),pt--}}get zone(){return this._zone}get state(){return this._state}cancelScheduleRequest(){this._transitionTo(S,m)}_transitionTo(d,_,f){if(this._state===_||this._state===f)this._state=d,d==S&&(this._zoneDelegates=null);else throw new Error(`${this.type} '${this.source}': can not transition to '${d}', expecting state '${_}'${f?" or '"+f+"'":""}, was '${this._state}'.`)}toString(){return this.data&&typeof this.data.handleId!="undefined"?this.data.handleId.toString():Object.prototype.toString.call(this)}toJSON(){return{type:this.type,state:this.state,source:this.source,zone:this.zone.name,runCount:this.runCount}}}let c=yt("setTimeout"),u=yt("Promise"),p=yt("then"),T=[],E=!1,O;function I(q){if(O||Ut[u]&&(O=Ut[u].resolve(0)),O){let d=O[p];d||(d=O.then),d.call(O,q)}else Ut[c](q,0)}function U(q){pt===0&&T.length===0&&I(Q),q&&T.push(q)}function Q(){if(!E){for(E=!0;T.length;){let q=T;T=[];for(let d=0;d<q.length;d++){let _=q[d];try{_.zone.runTask(_,null,null)}catch(f){D.onUnhandledError(f)}}}D.microtaskDrainDone(),E=!1}}let W={name:"NO ZONE"},S="notScheduled",m="scheduling",y="scheduled",v="running",V="canceling",L="unknown",x="microTask",tt="macroTask",G="eventTask",M={},D={symbol:yt,currentZoneFrame:()=>b,onUnhandledError:et,microtaskDrainDone:et,scheduleMicroTask:U,showUncaughtError:()=>!o[yt("ignoreConsoleErrorUncaughtError")],patchEventTarget:()=>[],patchOnProperties:et,patchMethod:()=>et,bindArguments:()=>[],patchThen:()=>et,patchMacroTask:()=>et,patchEventPrototype:()=>et,getGlobalObjects:()=>{},ObjectDefineProperty:()=>et,ObjectGetOwnPropertyDescriptor:()=>{},ObjectCreate:()=>{},ArraySlice:()=>[],patchClass:()=>et,wrapWithCurrentZone:()=>et,filterProperties:()=>[],attachOriginToPatched:()=>et,_redefineProperty:()=>et,patchCallbacks:()=>et,nativeScheduleMicroTask:I},b={parent:null,zone:new o(null,null)},lt=null,pt=0;function et(){}return r("Zone","Zone"),o}function Pl(){var t;let e=globalThis,r=e[yt("forceDuplicateZoneCheck")]===!0;if(e.Zone&&(r||typeof e.Zone.__symbol__!="function"))throw new Error("Zone already loaded.");return(t=e.Zone)!=null||(e.Zone=bl()),e.Zone}var cr=Object.getOwnPropertyDescriptor,Po=Object.defineProperty,Lo=Object.getPrototypeOf,Ll=Object.create,Cl=Array.prototype.slice,Co="addEventListener",wo="removeEventListener",Oo=yt(Co),vo=yt(wo),Xt="true",Qt="false",ur=yt("");function Do(t,e){return Zone.current.wrap(t,e)}function Io(t,e,r,n,o){return Zone.current.scheduleMacroTask(t,e,r,n,o)}var $=yt,yn=typeof window!="undefined",On=yn?window:void 0,ut=yn&&On||globalThis,wl="removeAttribute";function Mo(t,e){for(let r=t.length-1;r>=0;r--)typeof t[r]=="function"&&(t[r]=Do(t[r],e+"_"+r));return t}function Dl(t,e){let r=t.constructor.name;for(let n=0;n<e.length;n++){let o=e[n],i=t[o];if(i){let s=cr(t,o);if(!Ys(s))continue;t[o]=(a=>{let c=function(){return a.apply(this,Mo(arguments,r+"."+o))};return te(c,a),c})(i)}}}function Ys(t){return t?t.writable===!1?!1:!(typeof t.get=="function"&&typeof t.set=="undefined"):!0}var $s=typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope,vn=!("nw"in ut)&&typeof ut.process!="undefined"&&ut.process.toString()==="[object process]",ko=!vn&&!$s&&!!(yn&&On.HTMLElement),qs=typeof ut.process!="undefined"&&ut.process.toString()==="[object process]"&&!$s&&!!(yn&&On.HTMLElement),Rn={},Il=$("enable_beforeunload"),js=function(t){if(t=t||ut.event,!t)return;let e=Rn[t.type];e||(e=Rn[t.type]=$("ON_PROPERTY"+t.type));let r=this||t.target||ut,n=r[e],o;if(ko&&r===On&&t.type==="error"){let i=t;o=n&&n.call(this,i.message,i.filename,i.lineno,i.colno,i.error),o===!0&&t.preventDefault()}else o=n&&n.apply(this,arguments),t.type==="beforeunload"&&ut[Il]&&typeof o=="string"?t.returnValue=o:o!=null&&!o&&t.preventDefault();return o};function zs(t,e,r){let n=cr(t,e);if(!n&&r&&cr(r,e)&&(n={enumerable:!0,configurable:!0}),!n||!n.configurable)return;let o=$("on"+e+"patched");if(t.hasOwnProperty(o)&&t[o])return;delete n.writable,delete n.value;let i=n.get,s=n.set,a=e.slice(2),c=Rn[a];c||(c=Rn[a]=$("ON_PROPERTY"+a)),n.set=function(u){let p=this;if(!p&&t===ut&&(p=ut),!p)return;typeof p[c]=="function"&&p.removeEventListener(a,js),s==null||s.call(p,null),p[c]=u,typeof u=="function"&&p.addEventListener(a,js,!1)},n.get=function(){let u=this;if(!u&&t===ut&&(u=ut),!u)return null;let p=u[c];if(p)return p;if(i){let T=i.call(this);if(T)return n.set.call(this,T),typeof u[wl]=="function"&&u.removeAttribute(e),T}return null},Po(t,e,n),t[o]=!0}function Xs(t,e,r){if(e)for(let n=0;n<e.length;n++)zs(t,"on"+e[n],r);else{let n=[];for(let o in t)o.slice(0,2)=="on"&&n.push(o);for(let o=0;o<n.length;o++)zs(t,n[o],r)}}var Pt=$("originalInstance");function ar(t){let e=ut[t];if(!e)return;ut[$(t)]=e,ut[t]=function(){let o=Mo(arguments,t);switch(o.length){case 0:this[Pt]=new e;break;case 1:this[Pt]=new e(o[0]);break;case 2:this[Pt]=new e(o[0],o[1]);break;case 3:this[Pt]=new e(o[0],o[1],o[2]);break;case 4:this[Pt]=new e(o[0],o[1],o[2],o[3]);break;default:throw new Error("Arg list too long.")}},te(ut[t],e);let r=new e(function(){}),n;for(n in r)t==="XMLHttpRequest"&&n==="responseBlob"||(function(o){typeof r[o]=="function"?ut[t].prototype[o]=function(){return this[Pt][o].apply(this[Pt],arguments)}:Po(ut[t].prototype,o,{set:function(i){typeof i=="function"?(this[Pt][o]=Do(i,t+"."+o),te(this[Pt][o],i)):this[Pt][o]=i},get:function(){return this[Pt][o]}})})(n);for(n in e)n!=="prototype"&&e.hasOwnProperty(n)&&(ut[t][n]=e[n])}function Ml(t,e){if(typeof Object.getOwnPropertySymbols!="function")return;Object.getOwnPropertySymbols(t).forEach(n=>{let o=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,{get:function(){return t[n]},set:function(i){o&&(!o.writable||typeof o.set!="function")||(t[n]=i)},enumerable:o?o.enumerable:!0,configurable:o?o.configurable:!0})})}var kl=!1;function Jt(t,e,r){let n=t;for(;n&&!n.hasOwnProperty(e);)n=Lo(n);!n&&t[e]&&(n=t);let o=$(e),i=null;if(n&&(!(i=n[o])||!n.hasOwnProperty(o))){i=n[o]=n[e];let s=n&&cr(n,e);if(Ys(s)){let a=r(i,o,e);n[e]=function(){return a(this,arguments)},te(n[e],i),kl&&Ml(i,n[e])}}return i}function Ul(t,e,r){let n=null;function o(i){let s=i.data;return s.args[s.cbIdx]=function(){i.invoke.apply(this,arguments)},n.apply(s.target,s.args),i}n=Jt(t,e,i=>function(s,a){let c=r(s,a);return c.cbIdx>=0&&typeof a[c.cbIdx]=="function"?Io(c.name,a[c.cbIdx],c,o):i.apply(s,a)})}function te(t,e){t[$("OriginalDelegate")]=e}function Zs(t){return typeof t=="function"}function Ks(t){return typeof t=="number"}var Hl={useG:!0},Ot={},Qs={},Js=new RegExp("^"+ur+"(\\w+)(true|false)$"),ta=$("propagationStopped");function ea(t,e){let r=(e?e(t):t)+Qt,n=(e?e(t):t)+Xt,o=ur+r,i=ur+n;Ot[t]={},Ot[t][Qt]=o,Ot[t][Xt]=i}function Gl(t,e,r,n){let o=n&&n.add||Co,i=n&&n.rm||wo,s=n&&n.listeners||"eventListeners",a=n&&n.rmAll||"removeAllListeners",c=$(o),u="."+o+":",p="prependListener",T="."+p+":",E=function(S,m,y){if(S.isRemoved)return;let v=S.callback;typeof v=="object"&&v.handleEvent&&(S.callback=x=>v.handleEvent(x),S.originalDelegate=v);let V;try{S.invoke(S,m,[y])}catch(x){V=x}let L=S.options;if(L&&typeof L=="object"&&L.once){let x=S.originalDelegate?S.originalDelegate:S.callback;m[i].call(m,y.type,x,L)}return V};function O(S,m,y){if(m=m||t.event,!m)return;let v=S||m.target||t,V=v[Ot[m.type][y?Xt:Qt]];if(V){let L=[];if(V.length===1){let x=E(V[0],v,m);x&&L.push(x)}else{let x=V.slice();for(let tt=0;tt<x.length&&!(m&&m[ta]===!0);tt++){let G=E(x[tt],v,m);G&&L.push(G)}}if(L.length===1)throw L[0];for(let x=0;x<L.length;x++){let tt=L[x];e.nativeScheduleMicroTask(()=>{throw tt})}}}let I=function(S){return O(this,S,!1)},U=function(S){return O(this,S,!0)};function Q(S,m){if(!S)return!1;let y=!0;m&&m.useG!==void 0&&(y=m.useG);let v=m&&m.vh,V=!0;m&&m.chkDup!==void 0&&(V=m.chkDup);let L=!1;m&&m.rt!==void 0&&(L=m.rt);let x=S;for(;x&&!x.hasOwnProperty(o);)x=Lo(x);if(!x&&S[o]&&(x=S),!x||x[c])return!1;let tt=m&&m.eventNameToString,G={},M=x[c]=x[o],D=x[$(i)]=x[i],b=x[$(s)]=x[s],lt=x[$(a)]=x[a],pt;m&&m.prepend&&(pt=x[$(m.prepend)]=x[m.prepend]);function et(h,A){return A?typeof h=="boolean"?{capture:h,passive:!0}:h?typeof h=="object"&&h.passive!==!1?xl(Fs({},h),{passive:!0}):h:{passive:!0}:h}let q=function(h){if(!G.isExisting)return M.call(G.target,G.eventName,G.capture?U:I,G.options)},d=function(h){if(!h.isRemoved){let A=Ot[h.eventName],C;A&&(C=A[h.capture?Xt:Qt]);let k=C&&h.target[C];if(k){for(let P=0;P<k.length;P++)if(k[P]===h){k.splice(P,1),h.isRemoved=!0,h.removeAbortListener&&(h.removeAbortListener(),h.removeAbortListener=null),k.length===0&&(h.allRemoved=!0,h.target[C]=null);break}}}if(h.allRemoved)return D.call(h.target,h.eventName,h.capture?U:I,h.options)},_=function(h){return M.call(G.target,G.eventName,h.invoke,G.options)},f=function(h){return pt.call(G.target,G.eventName,h.invoke,G.options)},w=function(h){return D.call(h.target,h.eventName,h.invoke,h.options)},X=y?q:_,Y=y?d:w,Lt=function(h,A){let C=typeof A;return C==="function"&&h.callback===A||C==="object"&&h.originalDelegate===A},Ft=(m==null?void 0:m.diff)||Lt,jt=Zone[$("UNPATCHED_EVENTS")],vt=t[$("PASSIVE_EVENTS")];function R(h){if(typeof h=="object"&&h!==null){let A=Fs({},h);return h.signal&&(A.signal=h.signal),A}return h}let g=function(h,A,C,k,P=!1,j=!1){return function(){let Z=this||t,K=arguments[0];m&&m.transferEventName&&(K=m.transferEventName(K));let rt=arguments[1];if(!rt)return h.apply(this,arguments);if(vn&&K==="uncaughtException")return h.apply(this,arguments);let nt=!1;if(typeof rt!="function"){if(!rt.handleEvent)return h.apply(this,arguments);nt=!0}if(v&&!v(h,rt,Z,arguments))return;let ee=!!vt&&vt.indexOf(K)!==-1,Nt=R(et(arguments[2],ee)),ue=Nt==null?void 0:Nt.signal;if(ue!=null&&ue.aborted)return;if(jt){for(let Ct=0;Ct<jt.length;Ct++)if(K===jt[Ct])return ee?h.call(Z,K,rt,Nt):h.apply(this,arguments)}let qn=Nt?typeof Nt=="boolean"?!0:Nt.capture:!1,vi=Nt&&typeof Nt=="object"?Nt.once:!1,Fc=Zone.current,Xn=Ot[K];Xn||(ea(K,tt),Xn=Ot[K]);let Ni=Xn[qn?Xt:Qt],be=Z[Ni],xi=!1;if(be){if(xi=!0,V){for(let Ct=0;Ct<be.length;Ct++)if(Ft(be[Ct],rt))return}}else be=Z[Ni]=[];let Mr,bi=Z.constructor.name,Pi=Qs[bi];Pi&&(Mr=Pi[K]),Mr||(Mr=bi+A+(tt?tt(K):K)),G.options=Nt,vi&&(G.options.once=!1),G.target=Z,G.capture=qn,G.eventName=K,G.isExisting=xi;let ze=y?Hl:void 0;ze&&(ze.taskData=G),ue&&(G.options.signal=void 0);let xt=Fc.scheduleEventTask(Mr,rt,ze,C,k);if(ue){G.options.signal=ue;let Ct=()=>xt.zone.cancelTask(xt);h.call(ue,"abort",Ct,{once:!0}),xt.removeAbortListener=()=>ue.removeEventListener("abort",Ct)}if(G.target=null,ze&&(ze.taskData=null),vi&&(G.options.once=!0),typeof xt.options!="boolean"&&(xt.options=Nt),xt.target=Z,xt.capture=qn,xt.eventName=K,nt&&(xt.originalDelegate=rt),j?be.unshift(xt):be.push(xt),P)return Z}};return x[o]=g(M,u,X,Y,L),pt&&(x[p]=g(pt,T,f,Y,L,!0)),x[i]=function(){let h=this||t,A=arguments[0];m&&m.transferEventName&&(A=m.transferEventName(A));let C=arguments[2],k=C?typeof C=="boolean"?!0:C.capture:!1,P=arguments[1];if(!P)return D.apply(this,arguments);if(v&&!v(D,P,h,arguments))return;let j=Ot[A],Z;j&&(Z=j[k?Xt:Qt]);let K=Z&&h[Z];if(K)for(let rt=0;rt<K.length;rt++){let nt=K[rt];if(Ft(nt,P)){if(K.splice(rt,1),nt.isRemoved=!0,K.length===0&&(nt.allRemoved=!0,h[Z]=null,!k&&typeof A=="string")){let ee=ur+"ON_PROPERTY"+A;h[ee]=null}return nt.zone.cancelTask(nt),L?h:void 0}}return D.apply(this,arguments)},x[s]=function(){let h=this||t,A=arguments[0];m&&m.transferEventName&&(A=m.transferEventName(A));let C=[],k=ra(h,tt?tt(A):A);for(let P=0;P<k.length;P++){let j=k[P],Z=j.originalDelegate?j.originalDelegate:j.callback;C.push(Z)}return C},x[a]=function(){let h=this||t,A=arguments[0];if(A){m&&m.transferEventName&&(A=m.transferEventName(A));let C=Ot[A];if(C){let k=C[Qt],P=C[Xt],j=h[k],Z=h[P];if(j){let K=j.slice();for(let rt=0;rt<K.length;rt++){let nt=K[rt],ee=nt.originalDelegate?nt.originalDelegate:nt.callback;this[i].call(this,A,ee,nt.options)}}if(Z){let K=Z.slice();for(let rt=0;rt<K.length;rt++){let nt=K[rt],ee=nt.originalDelegate?nt.originalDelegate:nt.callback;this[i].call(this,A,ee,nt.options)}}}}else{let C=Object.keys(h);for(let k=0;k<C.length;k++){let P=C[k],j=Js.exec(P),Z=j&&j[1];Z&&Z!=="removeListener"&&this[a].call(this,Z)}this[a].call(this,"removeListener")}if(L)return this},te(x[o],M),te(x[i],D),lt&&te(x[a],lt),b&&te(x[s],b),!0}let W=[];for(let S=0;S<r.length;S++)W[S]=Q(r[S],n);return W}function ra(t,e){if(!e){let i=[];for(let s in t){let a=Js.exec(s),c=a&&a[1];if(c&&(!e||c===e)){let u=t[s];if(u)for(let p=0;p<u.length;p++)i.push(u[p])}}return i}let r=Ot[e];r||(ea(e),r=Ot[e]);let n=t[r[Qt]],o=t[r[Xt]];return n?o?n.concat(o):n.slice():o?o.slice():[]}function Bl(t,e){let r=t.Event;r&&r.prototype&&e.patchMethod(r.prototype,"stopImmediatePropagation",n=>function(o,i){o[ta]=!0,n&&n.apply(o,i)})}function Vl(t,e){e.patchMethod(t,"queueMicrotask",r=>function(n,o){Zone.current.scheduleMicroTask("queueMicrotask",o[0])})}var An=$("zoneTask");function ke(t,e,r,n){let o=null,i=null;e+=n,r+=n;let s={};function a(u){let p=u.data;p.args[0]=function(){return u.invoke.apply(this,arguments)};let T=o.apply(t,p.args);return Ks(T)?p.handleId=T:(p.handle=T,p.isRefreshable=Zs(T.refresh)),u}function c(u){let{handle:p,handleId:T}=u.data;return i.call(t,p!=null?p:T)}o=Jt(t,e,u=>function(p,T){var E;if(Zs(T[0])){let O={isRefreshable:!1,isPeriodic:n==="Interval",delay:n==="Timeout"||n==="Interval"?T[1]||0:void 0,args:T},I=T[0];T[0]=function(){try{return I.apply(this,arguments)}finally{let{handle:v,handleId:V,isPeriodic:L,isRefreshable:x}=O;!L&&!x&&(V?delete s[V]:v&&(v[An]=null))}};let U=Io(e,T[0],O,a,c);if(!U)return U;let{handleId:Q,handle:W,isRefreshable:S,isPeriodic:m}=U.data;if(Q)s[Q]=U;else if(W&&(W[An]=U,S&&!m)){let y=W.refresh;W.refresh=function(){let{zone:v,state:V}=U;return V==="notScheduled"?(U._state="scheduled",v._updateTaskCount(U,1)):V==="running"&&(U._state="scheduling"),y.call(this)}}return(E=W!=null?W:Q)!=null?E:U}else return u.apply(t,T)}),i=Jt(t,r,u=>function(p,T){let E=T[0],O;Ks(E)?(O=s[E],delete s[E]):(O=E==null?void 0:E[An],O?E[An]=null:O=E),O!=null&&O.type?O.cancelFn&&O.zone.cancelTask(O):u.apply(t,T)})}function Fl(t,e){let{isBrowser:r,isMix:n}=e.getGlobalObjects();if(!r&&!n||!t.customElements||!("customElements"in t))return;let o=["connectedCallback","disconnectedCallback","adoptedCallback","attributeChangedCallback","formAssociatedCallback","formDisabledCallback","formResetCallback","formStateRestoreCallback"];e.patchCallbacks(e,t.customElements,"customElements","define",o)}function jl(t,e){if(Zone[e.symbol("patchEventTarget")])return;let{eventNames:r,zoneSymbolEventNames:n,TRUE_STR:o,FALSE_STR:i,ZONE_SYMBOL_PREFIX:s}=e.getGlobalObjects();for(let c=0;c<r.length;c++){let u=r[c],p=u+i,T=u+o,E=s+p,O=s+T;n[u]={},n[u][i]=E,n[u][o]=O}let a=t.EventTarget;if(!(!a||!a.prototype))return e.patchEventTarget(t,e,[a&&a.prototype]),!0}function zl(t,e){e.patchEventPrototype(t,e)}function na(t,e,r){if(!r||r.length===0)return e;let n=r.filter(i=>i.target===t);if(n.length===0)return e;let o=n[0].ignoreProperties;return e.filter(i=>o.indexOf(i)===-1)}function Ws(t,e,r,n){if(!t)return;let o=na(t,e,r);Xs(t,o,n)}function bo(t){return Object.getOwnPropertyNames(t).filter(e=>e.startsWith("on")&&e.length>2).map(e=>e.substring(2))}function Zl(t,e){if(vn&&!qs||Zone[t.symbol("patchEvents")])return;let r=e.__Zone_ignore_on_properties,n=[];if(ko){let o=window;n=n.concat(["Document","SVGElement","Element","HTMLElement","HTMLBodyElement","HTMLMediaElement","HTMLFrameSetElement","HTMLFrameElement","HTMLIFrameElement","HTMLMarqueeElement","Worker"]),Ws(o,bo(o),r,Lo(o))}n=n.concat(["XMLHttpRequest","XMLHttpRequestEventTarget","IDBIndex","IDBRequest","IDBOpenDBRequest","IDBDatabase","IDBTransaction","IDBCursor","WebSocket"]);for(let o=0;o<n.length;o++){let i=e[n[o]];i!=null&&i.prototype&&Ws(i.prototype,bo(i.prototype),r)}}function Kl(t){t.__load_patch("timers",e=>{let n="clear";ke(e,"set",n,"Timeout"),ke(e,"set",n,"Interval"),ke(e,"set",n,"Immediate")}),t.__load_patch("requestAnimationFrame",e=>{ke(e,"request","cancel","AnimationFrame"),ke(e,"mozRequest","mozCancel","AnimationFrame"),ke(e,"webkitRequest","webkitCancel","AnimationFrame")}),t.__load_patch("blocking",(e,r)=>{let n=["alert","prompt","confirm"];for(let o=0;o<n.length;o++){let i=n[o];Jt(e,i,(s,a,c)=>function(u,p){return r.current.run(s,e,p,c)})}}),t.__load_patch("EventTarget",(e,r,n)=>{zl(e,n),jl(e,n);let o=e.XMLHttpRequestEventTarget;o&&o.prototype&&n.patchEventTarget(e,n,[o.prototype])}),t.__load_patch("MutationObserver",(e,r,n)=>{ar("MutationObserver"),ar("WebKitMutationObserver")}),t.__load_patch("IntersectionObserver",(e,r,n)=>{ar("IntersectionObserver")}),t.__load_patch("FileReader",(e,r,n)=>{ar("FileReader")}),t.__load_patch("on_property",(e,r,n)=>{Zl(n,e)}),t.__load_patch("customElements",(e,r,n)=>{Fl(e,n)}),t.__load_patch("XHR",(e,r)=>{u(e);let n=$("xhrTask"),o=$("xhrSync"),i=$("xhrListener"),s=$("xhrScheduled"),a=$("xhrURL"),c=$("xhrErrorBeforeScheduled");function u(p){let T=p.XMLHttpRequest;if(!T)return;let E=T.prototype;function O(M){return M[n]}let I=E[Oo],U=E[vo];if(!I){let M=p.XMLHttpRequestEventTarget;if(M){let D=M.prototype;I=D[Oo],U=D[vo]}}let Q="readystatechange",W="scheduled";function S(M){let D=M.data,b=D.target;b[s]=!1,b[c]=!1;let lt=b[i];I||(I=b[Oo],U=b[vo]),lt&&U.call(b,Q,lt);let pt=b[i]=()=>{if(b.readyState===b.DONE)if(!D.aborted&&b[s]&&M.state===W){let q=b[r.__symbol__("loadfalse")];if(b.status!==0&&q&&q.length>0){let d=M.invoke;M.invoke=function(){let _=b[r.__symbol__("loadfalse")];for(let f=0;f<_.length;f++)_[f]===M&&_.splice(f,1);!D.aborted&&M.state===W&&d.call(M)},q.push(M)}else M.invoke()}else!D.aborted&&b[s]===!1&&(b[c]=!0)};return I.call(b,Q,pt),b[n]||(b[n]=M),tt.apply(b,D.args),b[s]=!0,M}function m(){}function y(M){let D=M.data;return D.aborted=!0,G.apply(D.target,D.args)}let v=Jt(E,"open",()=>function(M,D){return M[o]=D[2]==!1,M[a]=D[1],v.apply(M,D)}),V="XMLHttpRequest.send",L=$("fetchTaskAborting"),x=$("fetchTaskScheduling"),tt=Jt(E,"send",()=>function(M,D){if(r.current[x]===!0||M[o])return tt.apply(M,D);{let b={target:M,url:M[a],isPeriodic:!1,args:D,aborted:!1},lt=Io(V,m,b,S,y);M&&M[c]===!0&&!b.aborted&&lt.state===W&&lt.invoke()}}),G=Jt(E,"abort",()=>function(M,D){let b=O(M);if(b&&typeof b.type=="string"){if(b.cancelFn==null||b.data&&b.data.aborted)return;b.zone.cancelTask(b)}else if(r.current[L]===!0)return G.apply(M,D)})}}),t.__load_patch("geolocation",e=>{e.navigator&&e.navigator.geolocation&&Dl(e.navigator.geolocation,["getCurrentPosition","watchPosition"])}),t.__load_patch("PromiseRejectionEvent",(e,r)=>{function n(o){return function(i){ra(e,o).forEach(a=>{let c=e.PromiseRejectionEvent;if(c){let u=new c(o,{promise:i.promise,reason:i.rejection});a.invoke(u)}})}}e.PromiseRejectionEvent&&(r[$("unhandledPromiseRejectionHandler")]=n("unhandledrejection"),r[$("rejectionHandledHandler")]=n("rejectionhandled"))}),t.__load_patch("queueMicrotask",(e,r,n)=>{Vl(e,n)})}function Wl(t){t.__load_patch("ZoneAwarePromise",(e,r,n)=>{let o=Object.getOwnPropertyDescriptor,i=Object.defineProperty;function s(R){if(R&&R.toString===Object.prototype.toString){let g=R.constructor&&R.constructor.name;return(g||"")+": "+JSON.stringify(R)}return R?R.toString():Object.prototype.toString.call(R)}let a=n.symbol,c=[],u=e[a("DISABLE_WRAPPING_UNCAUGHT_PROMISE_REJECTION")]!==!1,p=a("Promise"),T=a("then"),E="__creationTrace__";n.onUnhandledError=R=>{if(n.showUncaughtError()){let g=R&&R.rejection;g?console.error("Unhandled Promise rejection:",g instanceof Error?g.message:g,"; Zone:",R.zone.name,"; Task:",R.task&&R.task.source,"; Value:",g,g instanceof Error?g.stack:void 0):console.error(R)}},n.microtaskDrainDone=()=>{for(;c.length;){let R=c.shift();try{R.zone.runGuarded(()=>{throw R.throwOriginal?R.rejection:R})}catch(g){I(g)}}};let O=a("unhandledPromiseRejectionHandler");function I(R){n.onUnhandledError(R);try{let g=r[O];typeof g=="function"&&g.call(this,R)}catch(g){}}function U(R){return R&&typeof R.then=="function"}function Q(R){return R}function W(R){return Y.reject(R)}let S=a("state"),m=a("value"),y=a("finally"),v=a("parentPromiseValue"),V=a("parentPromiseState"),L="Promise.then",x=null,tt=!0,G=!1,M=0;function D(R,g){return h=>{try{et(R,g,h)}catch(A){et(R,!1,A)}}}let b=function(){let R=!1;return function(h){return function(){R||(R=!0,h.apply(null,arguments))}}},lt="Promise resolved with itself",pt=a("currentTaskTrace");function et(R,g,h){let A=b();if(R===h)throw new TypeError(lt);if(R[S]===x){let C=null;try{(typeof h=="object"||typeof h=="function")&&(C=h&&h.then)}catch(k){return A(()=>{et(R,!1,k)})(),R}if(g!==G&&h instanceof Y&&h.hasOwnProperty(S)&&h.hasOwnProperty(m)&&h[S]!==x)d(h),et(R,h[S],h[m]);else if(g!==G&&typeof C=="function")try{C.call(h,A(D(R,g)),A(D(R,!1)))}catch(k){A(()=>{et(R,!1,k)})()}else{R[S]=g;let k=R[m];if(R[m]=h,R[y]===y&&g===tt&&(R[S]=R[V],R[m]=R[v]),g===G&&h instanceof Error){let P=r.currentTask&&r.currentTask.data&&r.currentTask.data[E];P&&i(h,pt,{configurable:!0,enumerable:!1,writable:!0,value:P})}for(let P=0;P<k.length;)_(R,k[P++],k[P++],k[P++],k[P++]);if(k.length==0&&g==G){R[S]=M;let P=h;try{throw new Error("Uncaught (in promise): "+s(h)+(h&&h.stack?`
`+h.stack:""))}catch(j){P=j}u&&(P.throwOriginal=!0),P.rejection=h,P.promise=R,P.zone=r.current,P.task=r.currentTask,c.push(P),n.scheduleMicroTask()}}}return R}let q=a("rejectionHandledHandler");function d(R){if(R[S]===M){try{let g=r[q];g&&typeof g=="function"&&g.call(this,{rejection:R[m],promise:R})}catch(g){}R[S]=G;for(let g=0;g<c.length;g++)R===c[g].promise&&c.splice(g,1)}}function _(R,g,h,A,C){d(R);let k=R[S],P=k?typeof A=="function"?A:Q:typeof C=="function"?C:W;g.scheduleMicroTask(L,()=>{try{let j=R[m],Z=!!h&&y===h[y];Z&&(h[v]=j,h[V]=k);let K=g.run(P,void 0,Z&&P!==W&&P!==Q?[]:[j]);et(h,!0,K)}catch(j){et(h,!1,j)}},h)}let f="function ZoneAwarePromise() { [native code] }",w=function(){},X=e.AggregateError;class Y{static toString(){return f}static resolve(g){return g instanceof Y?g:et(new this(null),tt,g)}static reject(g){return et(new this(null),G,g)}static withResolvers(){let g={};return g.promise=new Y((h,A)=>{g.resolve=h,g.reject=A}),g}static any(g){if(!g||typeof g[Symbol.iterator]!="function")return Promise.reject(new X([],"All promises were rejected"));let h=[],A=0;try{for(let P of g)A++,h.push(Y.resolve(P))}catch(P){return Promise.reject(new X([],"All promises were rejected"))}if(A===0)return Promise.reject(new X([],"All promises were rejected"));let C=!1,k=[];return new Y((P,j)=>{for(let Z=0;Z<h.length;Z++)h[Z].then(K=>{C||(C=!0,P(K))},K=>{k.push(K),A--,A===0&&(C=!0,j(new X(k,"All promises were rejected")))})})}static race(g){let h,A,C=new this((j,Z)=>{h=j,A=Z});function k(j){h(j)}function P(j){A(j)}for(let j of g)U(j)||(j=this.resolve(j)),j.then(k,P);return C}static all(g){return Y.allWithCallback(g)}static allSettled(g){return(this&&this.prototype instanceof Y?this:Y).allWithCallback(g,{thenCallback:A=>({status:"fulfilled",value:A}),errorCallback:A=>({status:"rejected",reason:A})})}static allWithCallback(g,h){let A,C,k=new this((K,rt)=>{A=K,C=rt}),P=2,j=0,Z=[];for(let K of g){U(K)||(K=this.resolve(K));let rt=j;try{K.then(nt=>{Z[rt]=h?h.thenCallback(nt):nt,P--,P===0&&A(Z)},nt=>{h?(Z[rt]=h.errorCallback(nt),P--,P===0&&A(Z)):C(nt)})}catch(nt){C(nt)}P++,j++}return P-=2,P===0&&A(Z),k}constructor(g){let h=this;if(!(h instanceof Y))throw new Error("Must be an instanceof Promise.");h[S]=x,h[m]=[];try{let A=b();g&&g(A(D(h,tt)),A(D(h,G)))}catch(A){et(h,!1,A)}}get[Symbol.toStringTag](){return"Promise"}get[Symbol.species](){return Y}then(g,h){var A;let C=(A=this.constructor)==null?void 0:A[Symbol.species];(!C||typeof C!="function")&&(C=this.constructor||Y);let k=new C(w),P=r.current;return this[S]==x?this[m].push(P,k,g,h):_(this,P,k,g,h),k}catch(g){return this.then(null,g)}finally(g){var h;let A=(h=this.constructor)==null?void 0:h[Symbol.species];(!A||typeof A!="function")&&(A=Y);let C=new A(w);C[y]=y;let k=r.current;return this[S]==x?this[m].push(k,C,g,g):_(this,k,C,g,g),C}}Y.resolve=Y.resolve,Y.reject=Y.reject,Y.race=Y.race,Y.all=Y.all;let Lt=e[p]=e.Promise;e.Promise=Y;let Ft=a("thenPatched");function jt(R){let g=R.prototype,h=o(g,"then");if(h&&(h.writable===!1||!h.configurable))return;let A=g.then;g[T]=A,R.prototype.then=function(C,k){return new Y((j,Z)=>{A.call(this,j,Z)}).then(C,k)},R[Ft]=!0}n.patchThen=jt;function vt(R){return function(g,h){let A=R.apply(g,h);if(A instanceof Y)return A;let C=A.constructor;return C[Ft]||jt(C),A}}return Lt&&(jt(Lt),Jt(e,"fetch",R=>vt(R))),Promise[r.__symbol__("uncaughtPromiseErrors")]=c,Y})}function Yl(t){t.__load_patch("toString",e=>{let r=Function.prototype.toString,n=$("OriginalDelegate"),o=$("Promise"),i=$("Error"),s=function(){if(typeof this=="function"){let p=this[n];if(p)return typeof p=="function"?r.call(p):Object.prototype.toString.call(p);if(this===Promise){let T=e[o];if(T)return r.call(T)}if(this===Error){let T=e[i];if(T)return r.call(T)}}return r.call(this)};s[n]=r,Function.prototype.toString=s;let a=Object.prototype.toString,c="[object Promise]";Object.prototype.toString=function(){return typeof Promise=="function"&&this instanceof Promise?c:a.call(this)}})}function $l(t,e,r,n,o){let i=Zone.__symbol__(n);if(e[i])return;let s=e[i]=e[n];e[n]=function(a,c,u){return c&&c.prototype&&o.forEach(function(p){let T=`${r}.${n}::`+p,E=c.prototype;try{if(E.hasOwnProperty(p)){let O=t.ObjectGetOwnPropertyDescriptor(E,p);O&&O.value?(O.value=t.wrapWithCurrentZone(O.value,T),t._redefineProperty(c.prototype,p,O)):E[p]&&(E[p]=t.wrapWithCurrentZone(E[p],T))}else E[p]&&(E[p]=t.wrapWithCurrentZone(E[p],T))}catch(O){}}),s.call(e,a,c,u)},t.attachOriginToPatched(e[n],s)}function ql(t){t.__load_patch("util",(e,r,n)=>{let o=bo(e);n.patchOnProperties=Xs,n.patchMethod=Jt,n.bindArguments=Mo,n.patchMacroTask=Ul;let i=r.__symbol__("BLACK_LISTED_EVENTS"),s=r.__symbol__("UNPATCHED_EVENTS");e[s]&&(e[i]=e[s]),e[i]&&(r[i]=r[s]=e[i]),n.patchEventPrototype=Bl,n.patchEventTarget=Gl,n.ObjectDefineProperty=Po,n.ObjectGetOwnPropertyDescriptor=cr,n.ObjectCreate=Ll,n.ArraySlice=Cl,n.patchClass=ar,n.wrapWithCurrentZone=Do,n.filterProperties=na,n.attachOriginToPatched=te,n._redefineProperty=Object.defineProperty,n.patchCallbacks=$l,n.getGlobalObjects=()=>({globalSources:Qs,zoneSymbolEventNames:Ot,eventNames:o,isBrowser:ko,isMix:qs,isNode:vn,TRUE_STR:Xt,FALSE_STR:Qt,ZONE_SYMBOL_PREFIX:ur,ADD_EVENT_LISTENER_STR:Co,REMOVE_EVENT_LISTENER_STR:wo})})}function Xl(t){Wl(t),Yl(t),ql(t)}var oa=Pl();Xl(oa);Kl(oa);var lr=class{emit(e){}},ia=new lr;var pr=Symbol.for("io.opentelemetry.js.api.logs"),Ue=globalThis;function sa(t,e,r){return n=>n===t?e:r}var Uo=1;var Ho=class{getLogger(e,r,n){return new lr}},Nn=new Ho;var xn=class{constructor(e,r,n,o){this._provider=e,this.name=r,this.version=n,this.options=o}emit(e){this._getLogger().emit(e)}_getLogger(){if(this._delegate)return this._delegate;let e=this._provider._getDelegateLogger(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):ia}};var fr=class{getLogger(e,r,n){var o;return(o=this._getDelegateLogger(e,r,n))!==null&&o!==void 0?o:new xn(this,e,r,n)}_getDelegate(){var e;return(e=this._delegate)!==null&&e!==void 0?e:Nn}_setDelegate(e){this._delegate=e}_getDelegateLogger(e,r,n){var o;return(o=this._delegate)===null||o===void 0?void 0:o.getLogger(e,r,n)}};var bn=class t{constructor(){this._proxyLoggerProvider=new fr}static getInstance(){return this._instance||(this._instance=new t),this._instance}setGlobalLoggerProvider(e){return Ue[pr]?this.getLoggerProvider():(Ue[pr]=sa(Uo,e,Nn),this._proxyLoggerProvider._setDelegate(e),e)}getLoggerProvider(){var e,r;return(r=(e=Ue[pr])===null||e===void 0?void 0:e.call(Ue,Uo))!==null&&r!==void 0?r:this._proxyLoggerProvider}getLogger(e,r,n){return this.getLoggerProvider().getLogger(e,r,n)}disable(){delete Ue[pr],this._proxyLoggerProvider=new fr}};var Pn=bn.getInstance();function aa(t,e,r,n){for(let o=0,i=t.length;o<i;o++){let s=t[o];e&&s.setTracerProvider(e),r&&s.setMeterProvider(r),n&&s.setLoggerProvider&&s.setLoggerProvider(n),s.getConfig().enabled||s.enable()}}function ca(t){t.forEach(e=>e.disable())}function Go(t){var i,s;let e=t.tracerProvider||z.getTracerProvider(),r=t.meterProvider||fe.getMeterProvider(),n=t.loggerProvider||Pn.getLoggerProvider(),o=(s=(i=t.instrumentations)==null?void 0:i.flat())!=null?s:[];return aa(o,e,r,n),()=>{ca(o)}}var mt=console.error.bind(console);function _r(t,e,r){let n=!!t[e]&&Object.prototype.propertyIsEnumerable.call(t,e);Object.defineProperty(t,e,{configurable:!0,enumerable:n,writable:!0,value:r})}var Ln=(t,e,r)=>{if(!t||!t[e]){mt("no original function "+String(e)+" to wrap");return}if(!r){mt("no wrapper function"),mt(new Error().stack);return}let n=t[e];if(typeof n!="function"||typeof r!="function"){mt("original object and wrapper must be functions");return}let o=r(n,e);return _r(o,"__original",n),_r(o,"__unwrap",()=>{t[e]===o&&_r(t,e,n)}),_r(o,"__wrapped",!0),_r(t,e,o),o},Bo=(t,e,r)=>{if(t)Array.isArray(t)||(t=[t]);else{mt("must provide one or more modules to patch"),mt(new Error().stack);return}if(!(e&&Array.isArray(e))){mt("must provide one or more functions to wrap on modules");return}t.forEach(n=>{e.forEach(o=>{Ln(n,o,r)})})},Cn=(t,e)=>{if(!t||!t[e]){mt("no function to unwrap."),mt(new Error().stack);return}let r=t[e];if(!r.__unwrap)mt("no original to unwrap to -- has "+String(e)+" already been unwrapped?");else{r.__unwrap();return}},Vo=(t,e)=>{if(t)Array.isArray(t)||(t=[t]);else{mt("must provide one or more modules to patch"),mt(new Error().stack);return}if(!(e&&Array.isArray(e))){mt("must provide one or more functions to unwrap on modules");return}t.forEach(r=>{e.forEach(n=>{Cn(r,n)})})};function dr(t){t&&t.logger&&(typeof t.logger!="function"?mt("new logger isn't a function, not replacing"):mt=t.logger)}dr.wrap=Ln;dr.massWrap=Bo;dr.unwrap=Cn;dr.massUnwrap=Vo;var wn=class{constructor(e,r,n){l(this,"_config",{});l(this,"_tracer");l(this,"_meter");l(this,"_logger");l(this,"_diag");l(this,"instrumentationName");l(this,"instrumentationVersion");l(this,"_wrap",Ln);l(this,"_unwrap",Cn);l(this,"_massWrap",Bo);l(this,"_massUnwrap",Vo);this.instrumentationName=e,this.instrumentationVersion=r,this.setConfig(n),this._diag=N.createComponentLogger({namespace:e}),this._tracer=z.getTracer(e,r),this._meter=fe.getMeter(e,r),this._logger=Pn.getLogger(e,r),this._updateMetricInstruments()}get meter(){return this._meter}setMeterProvider(e){this._meter=e.getMeter(this.instrumentationName,this.instrumentationVersion),this._updateMetricInstruments()}get logger(){return this._logger}setLoggerProvider(e){this._logger=e.getLogger(this.instrumentationName,this.instrumentationVersion)}getModuleDefinitions(){var r;let e=(r=this.init())!=null?r:[];return Array.isArray(e)?e:[e]}_updateMetricInstruments(){}getConfig(){return this._config}setConfig(e){this._config={enabled:!0,...e}}setTracerProvider(e){this._tracer=e.getTracer(this.instrumentationName,this.instrumentationVersion)}get tracer(){return this._tracer}_runSpanCustomizationHook(e,r,n,o){if(e)try{e(n,o)}catch(i){this._diag.error("Error running span customization hook due to exception in handler",{triggerName:r},i)}}};var Ht=class extends wn{constructor(e,r,n){super(e,r,n),this._config.enabled&&this.enable()}};function He(t,e,r){let n,o;try{o=t()}catch(i){n=i}finally{if(e(n,o),n&&!r)throw n;return o}}function at(t){return typeof t=="function"&&typeof t.__original=="function"&&typeof t.__unwrap=="function"&&t.__wrapped===!0}var ot;(function(t){t[t.STABLE=1]="STABLE",t[t.OLD=2]="OLD",t[t.DUPLICATE=3]="DUPLICATE"})(ot||(ot={}));function hr(t,e){let r=ot.OLD,n=e==null?void 0:e.split(",").map(o=>o.trim()).filter(o=>o!=="");for(let o of n!=null?n:[])if(o.toLowerCase()===t+"/dup"){r=ot.DUPLICATE;break}else o.toLowerCase()===t&&(r=ot.STABLE);return r}var Oe;(function(t){t.DOCUMENT_LOAD="documentLoad",t.DOCUMENT_FETCH="documentFetch",t.RESOURCE_FETCH="resourceFetch"})(Oe||(Oe={}));var ua="0.56.0",la="@opentelemetry/instrumentation-document-load";var Dn="http.url",pa="http.user_agent";var Tr;(function(t){t.FIRST_PAINT="firstPaint",t.FIRST_CONTENTFUL_PAINT="firstContentfulPaint"})(Tr||(Tr={}));var _a=()=>{var r,n;let t={},e=(n=(r=ct).getEntriesByType)==null?void 0:n.call(r,"navigation")[0];if(e)Object.values(H).forEach(i=>{if($t(e,i)){let s=e[i];typeof s=="number"&&(t[i]=s)}});else{let i=ct.timing;i&&Object.values(H).forEach(a=>{if($t(i,a)){let c=i[a];typeof c=="number"&&(t[a]=c)}})}return t},fa={"first-paint":Tr.FIRST_PAINT,"first-contentful-paint":Tr.FIRST_CONTENTFUL_PAINT},da=t=>{var r,n;let e=(n=(r=ct).getEntriesByType)==null?void 0:n.call(r,"paint");e&&e.forEach(({name:o,startTime:i})=>{$t(fa,o)&&t.addEvent(fa[o],i)})};var mr=class extends Ht{constructor(r={}){super(la,ua,r);l(this,"component","document-load");l(this,"version","1");l(this,"moduleName",this.component);l(this,"_semconvStability");this._semconvStability=hr("http",r==null?void 0:r.semconvStabilityOptIn)}init(){}_onDocumentLoaded(){window.setTimeout(()=>{this._collectPerformance()})}_addResourcesSpans(r){var o,i;let n=(i=(o=ct).getEntriesByType)==null?void 0:i.call(o,"resource");n&&n.forEach(s=>{this._initResourceSpan(s,r)})}_collectPerformance(){let r=Array.from(document.getElementsByTagName("meta")).find(i=>i.getAttribute("name")===Ce),n=_a(),o=r&&r.content||"";B.with(it.extract(ht,{traceparent:o}),()=>{var s;let i=this._startSpan(Oe.DOCUMENT_LOAD,H.FETCH_START,n);i&&(B.with(z.setSpan(B.active(),i),()=>{let a=this._startSpan(Oe.DOCUMENT_FETCH,H.FETCH_START,n);a&&(this._semconvStability&ot.OLD&&a.setAttribute(Dn,location.href),this._semconvStability&ot.STABLE&&a.setAttribute(oe,location.href),B.with(z.setSpan(B.active(),a),()=>{var u;let c=!(this._semconvStability&ot.OLD);ye(a,n,this.getConfig().ignoreNetworkEvents,void 0,c),this._addCustomAttributesOnSpan(a,(u=this.getConfig().applyCustomAttributesOnSpan)==null?void 0:u.documentFetch),this._endSpan(a,H.RESPONSE_END,n)}))}),this._semconvStability&ot.OLD&&(i.setAttribute(Dn,location.href),i.setAttribute(pa,navigator.userAgent)),this._semconvStability&ot.STABLE&&(i.setAttribute(oe,location.href),i.setAttribute(fs,navigator.userAgent)),this._addResourcesSpans(i),this.getConfig().ignoreNetworkEvents||(st(i,H.FETCH_START,n),st(i,H.UNLOAD_EVENT_START,n),st(i,H.UNLOAD_EVENT_END,n),st(i,H.DOM_INTERACTIVE,n),st(i,H.DOM_CONTENT_LOADED_EVENT_START,n),st(i,H.DOM_CONTENT_LOADED_EVENT_END,n),st(i,H.DOM_COMPLETE,n),st(i,H.LOAD_EVENT_START,n),st(i,H.LOAD_EVENT_END,n)),this.getConfig().ignorePerformancePaintEvents||da(i),this._addCustomAttributesOnSpan(i,(s=this.getConfig().applyCustomAttributesOnSpan)==null?void 0:s.documentLoad),this._endSpan(i,H.LOAD_EVENT_END,n))})}_endSpan(r,n,o){r&&($t(o,n)?r.end(o[n]):r.end())}_initResourceSpan(r,n){var i;let o=this._startSpan(Oe.RESOURCE_FETCH,H.FETCH_START,r,n);if(o){this._semconvStability&ot.OLD&&o.setAttribute(Dn,r.name),this._semconvStability&ot.STABLE&&o.setAttribute(oe,r.name);let s=!(this._semconvStability&ot.OLD);ye(o,r,this.getConfig().ignoreNetworkEvents,void 0,s),this._addCustomAttributesOnResourceSpan(o,r,(i=this.getConfig().applyCustomAttributesOnSpan)==null?void 0:i.resourceFetch),this._endSpan(o,H.RESPONSE_END,r)}}_startSpan(r,n,o,i){if($t(o,n)&&typeof o[n]=="number")return this.tracer.startSpan(r,{startTime:o[n]},i?z.setSpan(B.active(),i):void 0)}_waitForPageLoad(){window.document.readyState==="complete"?this._onDocumentLoaded():(this._onDocumentLoaded=this._onDocumentLoaded.bind(this),window.addEventListener("load",this._onDocumentLoaded))}_addCustomAttributesOnSpan(r,n){n&&He(()=>n(r),o=>{o&&this._diag.error("addCustomAttributesOnSpan",o)},!0)}_addCustomAttributesOnResourceSpan(r,n,o){o&&He(()=>o(r,n),i=>{i&&this._diag.error("addCustomAttributesOnResourceSpan",i)},!0)}enable(){window.removeEventListener("load",this._onDocumentLoaded),this._waitForPageLoad()}disable(){window.removeEventListener("load",this._onDocumentLoaded)}};var ve;(function(t){t.EVENT_TYPE="event_type",t.TARGET_ELEMENT="target_element",t.TARGET_XPATH="target_xpath",t.HTTP_URL="http.url"})(ve||(ve={}));var Fo="0.55.0",ha="@opentelemetry/instrumentation-user-interaction";var Jl="OT_ZONE_CONTEXT",tp="Navigation:",ep=["click"];function rp(){return!1}var Er=class extends Ht{constructor(r={}){var n;super(ha,Fo,r);l(this,"version",Fo);l(this,"moduleName","user-interaction");l(this,"_spansData",new WeakMap);l(this,"_wrappedListeners",new WeakMap);l(this,"_eventsSpanMap",new WeakMap);l(this,"_eventNames");l(this,"_shouldPreventSpanCreation");this._eventNames=new Set((n=r==null?void 0:r.eventNames)!=null?n:ep),this._shouldPreventSpanCreation=typeof(r==null?void 0:r.shouldPreventSpanCreation)=="function"?r.shouldPreventSpanCreation:rp}init(){}_checkForTimeout(r,n){let o=this._spansData.get(n);o&&(r.source==="setTimeout"?o.hrTimeLastTimeout=Wt():r.source!=="Promise.then"&&r.source!=="setTimeout"&&(o.hrTimeLastTimeout=void 0))}_allowEventName(r){return this._eventNames.has(r)}_createSpan(r,n,o){if(!(r instanceof HTMLElement)||!r.getAttribute||r.hasAttribute("disabled")||!this._allowEventName(n))return;let i=Sn(r,!0);try{let s=this.tracer.startSpan(n,{attributes:{[ve.EVENT_TYPE]:n,[ve.TARGET_ELEMENT]:r.tagName,[ve.TARGET_XPATH]:i,[ve.HTTP_URL]:window.location.href}},o?z.setSpan(B.active(),o):void 0);return this._shouldPreventSpanCreation(n,r,s)===!0?void 0:(this._spansData.set(s,{taskCount:0}),s)}catch(s){this._diag.error("failed to start create new user interaction span",s)}}_decrementTask(r){let n=this._spansData.get(r);n&&(n.taskCount--,n.taskCount===0&&this._tryToEndSpan(r,n.hrTimeLastTimeout))}_getCurrentSpan(r){let n=r.get(Jl);return n&&z.getSpan(n)}_incrementTask(r){let n=this._spansData.get(r);n&&n.taskCount++}addPatchedListener(r,n,o,i){let s=this._wrappedListeners.get(o);s||(s=new Map,this._wrappedListeners.set(o,s));let a=s.get(n);return a||(a=new Map,s.set(n,a)),a.has(r)?!1:(a.set(r,i),!0)}removePatchedListener(r,n,o){let i=this._wrappedListeners.get(o);if(!i)return;let s=i.get(n);if(!s)return;let a=s.get(r);return a&&(s.delete(r),s.size===0&&(i.delete(n),i.size===0&&this._wrappedListeners.delete(o))),a}_invokeListener(r,n,o){return typeof r=="function"?r.apply(n,o):r.handleEvent(o[0])}_patchAddEventListener(){let r=this;return n=>function(i,s,a){if(!s)return n.call(this,i,s,a);let c=a&&typeof a=="object"&&a.once,u=function(...p){let T,E=p[0],O=E==null?void 0:E.target;E&&(T=r._eventsSpanMap.get(E)),c&&r.removePatchedListener(this,i,s);let I=r._createSpan(O,i,T);return I?(E&&r._eventsSpanMap.set(E,I),B.with(z.setSpan(B.active(),I),()=>{let U=r._invokeListener(s,this,p);return I.end(),U})):r._invokeListener(s,this,p)};if(r.addPatchedListener(this,i,s,u))return n.call(this,i,u,a)}}_patchRemoveEventListener(){let r=this;return n=>function(i,s,a){let c=r.removePatchedListener(this,i,s);return c?n.call(this,i,c,a):n.call(this,i,s,a)}}_getPatchableEventTargets(){return window.EventTarget?[EventTarget.prototype]:[Node.prototype,Window.prototype]}_patchHistoryApi(){this._unpatchHistoryApi(),this._wrap(history,"replaceState",this._patchHistoryMethod()),this._wrap(history,"pushState",this._patchHistoryMethod()),this._wrap(history,"back",this._patchHistoryMethod()),this._wrap(history,"forward",this._patchHistoryMethod()),this._wrap(history,"go",this._patchHistoryMethod())}_patchHistoryMethod(){let r=this;return n=>function(...i){let s=`${location.pathname}${location.hash}${location.search}`,a=n.apply(this,i),c=`${location.pathname}${location.hash}${location.search}`;return s!==c&&r._updateInteractionName(c),a}}_unpatchHistoryApi(){at(history.replaceState)&&this._unwrap(history,"replaceState"),at(history.pushState)&&this._unwrap(history,"pushState"),at(history.back)&&this._unwrap(history,"back"),at(history.forward)&&this._unwrap(history,"forward"),at(history.go)&&this._unwrap(history,"go")}_updateInteractionName(r){let n=z.getSpan(B.active());n&&typeof n.updateName=="function"&&n.updateName(`${tp} ${r}`)}_patchZoneCancelTask(){let r=this;return n=>function(i){let s=Zone.current,a=r._getCurrentSpan(s);return a&&r._shouldCountTask(i,s)&&r._decrementTask(a),n.call(this,i)}}_patchZoneScheduleTask(){let r=this;return n=>function(i){let s=Zone.current,a=r._getCurrentSpan(s);return a&&r._shouldCountTask(i,s)&&(r._incrementTask(a),r._checkForTimeout(i,a)),n.call(this,i)}}_patchZoneRunTask(){let r=this;return n=>function(i,s,a){let c=Array.isArray(a)&&a[0]instanceof Event?a[0]:void 0,u=c==null?void 0:c.target,p,T=this;if(u){if(p=r._createSpan(u,i.eventName),p)return r._incrementTask(p),T.run(()=>{try{return B.with(z.setSpan(B.active(),p),()=>{let E=Zone.current;return i._zone=E,n.call(E,i,s,a)})}finally{r._decrementTask(p)}})}else p=r._getCurrentSpan(T);try{return n.call(T,i,s,a)}finally{p&&r._shouldCountTask(i,T)&&r._decrementTask(p)}}}_shouldCountTask(r,n){if(r._zone&&(n=r._zone),!n||!r.data||r.data.isPeriodic)return!1;let o=this._getCurrentSpan(n);return!o||!this._spansData.get(o)?!1:r.type==="macroTask"||r.type==="microTask"}_tryToEndSpan(r,n){r&&this._spansData.get(r)&&(r.end(n),this._spansData.delete(r))}enable(){let r=this._getZoneWithPrototype();this._diag.debug("applying patch to",this.moduleName,this.version,"zone:",!!r),r?(at(r.prototype.runTask)&&(this._unwrap(r.prototype,"runTask"),this._diag.debug("removing previous patch from method runTask")),at(r.prototype.scheduleTask)&&(this._unwrap(r.prototype,"scheduleTask"),this._diag.debug("removing previous patch from method scheduleTask")),at(r.prototype.cancelTask)&&(this._unwrap(r.prototype,"cancelTask"),this._diag.debug("removing previous patch from method cancelTask")),this._zonePatched=!0,this._wrap(r.prototype,"runTask",this._patchZoneRunTask()),this._wrap(r.prototype,"scheduleTask",this._patchZoneScheduleTask()),this._wrap(r.prototype,"cancelTask",this._patchZoneCancelTask())):(this._zonePatched=!1,this._getPatchableEventTargets().forEach(o=>{at(o.addEventListener)&&(this._unwrap(o,"addEventListener"),this._diag.debug("removing previous patch from method addEventListener")),at(o.removeEventListener)&&(this._unwrap(o,"removeEventListener"),this._diag.debug("removing previous patch from method removeEventListener")),this._wrap(o,"addEventListener",this._patchAddEventListener()),this._wrap(o,"removeEventListener",this._patchRemoveEventListener())})),this._patchHistoryApi()}disable(){let r=this._getZoneWithPrototype();this._diag.debug("removing patch from",this.moduleName,this.version,"zone:",!!r),r&&this._zonePatched?(at(r.prototype.runTask)&&this._unwrap(r.prototype,"runTask"),at(r.prototype.scheduleTask)&&this._unwrap(r.prototype,"scheduleTask"),at(r.prototype.cancelTask)&&this._unwrap(r.prototype,"cancelTask")):this._getPatchableEventTargets().forEach(o=>{at(o.addEventListener)&&this._unwrap(o,"addEventListener"),at(o.removeEventListener)&&this._unwrap(o,"removeEventListener")}),this._unpatchHistoryApi()}_getZoneWithPrototype(){return window.Zone}};var Ta="http.host",ma="http.method",Ea="http.request.body.size",ga="http.request_content_length_uncompressed";var Sa="http.scheme",Aa="http.status_code",Ra="http.url",ya="http.user_agent";var Gt;(function(t){t.METHOD_OPEN="open",t.METHOD_SEND="send",t.EVENT_ABORT="abort",t.EVENT_ERROR="error",t.EVENT_LOAD="loaded",t.EVENT_TIMEOUT="timeout"})(Gt||(Gt={}));var np=N.createComponentLogger({namespace:"@opentelemetry/opentelemetry-instrumentation-xml-http-request/utils"});function op(t){return typeof Document!="undefined"&&t instanceof Document}function va(t){if(op(t))return new XMLSerializer().serializeToString(document).length;if(typeof t=="string")return Oa(t);if(t instanceof Blob)return t.size;if(t instanceof FormData)return sp(t);if(t instanceof URLSearchParams)return Oa(t.toString());if(t.byteLength!==void 0)return t.byteLength;np.warn("unknown body type")}var ip=new TextEncoder;function Oa(t){return ip.encode(t).byteLength}function sp(t){let e=0;for(let[r,n]of t.entries())e+=r.length,n instanceof Blob?e+=n.size:e+=n.length;return e}function Na(t){let e=cp(),r=t.toUpperCase();return r in e?r:"_OTHER"}var ap={CONNECT:!0,DELETE:!0,GET:!0,HEAD:!0,OPTIONS:!0,PATCH:!0,POST:!0,PUT:!0,TRACE:!0,QUERY:!0},gr;function cp(){if(gr===void 0){let t=void 0;t&&t.length>0?(gr={},t.forEach(e=>{gr[e]=!0})):gr=ap}return gr}var up={"https:":"443","http:":"80"};function xa(t){let e=Number(t.port||up[t.protocol]);if(e&&!isNaN(e))return e}var jo="0.211.0";var In;(function(t){t.HTTP_STATUS_TEXT="http.status_text"})(In||(In={}));var lp=300,Sr=class extends Ht{constructor(r={}){super("@opentelemetry/instrumentation-xml-http-request",jo,r);l(this,"component","xml-http-request");l(this,"version",jo);l(this,"moduleName",this.component);l(this,"_tasksCount",0);l(this,"_xhrMem",new WeakMap);l(this,"_usedResources",new WeakSet);l(this,"_semconvStability");this._semconvStability=hr("http",r==null?void 0:r.semconvStabilityOptIn)}init(){}_addHeaders(r,n){let o=qt(n).href;if(!yo(o,this.getConfig().propagateTraceHeaderCorsUrls)){let s={};it.inject(B.active(),s),Object.keys(s).length>0&&this._diag.debug("headers inject skipped due to CORS policy");return}let i={};it.inject(B.active(),i),Object.keys(i).forEach(s=>{r.setRequestHeader(s,String(i[s]))})}_addChildSpan(r,n){B.with(z.setSpan(B.active(),r),()=>{let o=this.tracer.startSpan("CORS Preflight",{startTime:n[H.FETCH_START]}),i=!(this._semconvStability&ot.OLD);ye(o,n,this.getConfig().ignoreNetworkEvents,void 0,i),o.end(n[H.RESPONSE_END])})}_addFinalSpanAttributes(r,n,o){if(this._semconvStability&ot.OLD){if(n.status!==void 0&&r.setAttribute(Aa,n.status),n.statusText!==void 0&&r.setAttribute(In.HTTP_STATUS_TEXT,n.statusText),typeof o=="string"){let i=qt(o);r.setAttribute(Ta,i.host),r.setAttribute(Sa,i.protocol.replace(":",""))}r.setAttribute(ya,navigator.userAgent)}this._semconvStability&ot.STABLE&&n.status&&r.setAttribute(qr,n.status)}_applyAttributesAfterXHR(r,n){let o=this.getConfig().applyCustomAttributesOnSpan;typeof o=="function"&&He(()=>o(r,n),i=>{i&&this._diag.error("applyCustomAttributesOnSpan",i)},!0)}_addResourceObserver(r,n){let o=this._xhrMem.get(r);!o||typeof PerformanceObserver!="function"||typeof PerformanceResourceTiming!="function"||(o.createdResources={observer:new PerformanceObserver(i=>{let s=i.getEntries(),a=qt(n);s.forEach(c=>{c.initiatorType==="xmlhttprequest"&&c.name===a.href&&o.createdResources&&o.createdResources.entries.push(c)})}),entries:[]},o.createdResources.observer.observe({entryTypes:["resource"]}))}_clearResources(){this._tasksCount===0&&this.getConfig().clearTimingResources&&(ct.clearResourceTimings(),this._xhrMem=new WeakMap,this._usedResources=new WeakSet)}_findResourceAndAddNetworkEvents(r,n,o,i,s){if(!o||!i||!s||!r.createdResources)return;let a=r.createdResources.entries;(!a||!a.length)&&(a=ct.getEntriesByType("resource"));let c=Ro(qt(o).href,i,s,a,this._usedResources);if(c.mainRequest){let u=c.mainRequest;this._markResourceAsUsed(u);let p=c.corsPreFlightRequest;p&&(this._addChildSpan(n,p),this._markResourceAsUsed(p));let T=!(this._semconvStability&ot.OLD);ye(n,u,this.getConfig().ignoreNetworkEvents,void 0,T)}}_cleanPreviousSpanInformation(r){let n=this._xhrMem.get(r);if(n){let o=n.callbackToRemoveEvents;o&&o(),this._xhrMem.delete(r)}}_createSpan(r,n,o){if(mo(n,this.getConfig().ignoreUrls)){this._diag.debug("ignoring span as url matches ignored url");return}let i="",s=qt(n),a={};if(this._semconvStability&ot.OLD&&(i=o.toUpperCase(),a[ma]=o,a[Ra]=s.toString()),this._semconvStability&ot.STABLE){let u=o,p=Na(o);i||(i=p),a[Yr]=p,p!==u&&(a[$r]=u),a[oe]=s.toString(),a[Xr]=s.hostname;let T=xa(s);T&&(a[Qr]=T)}let c=this.tracer.startSpan(i,{kind:Kt.CLIENT,attributes:a});return c.addEvent(Gt.METHOD_OPEN),this._cleanPreviousSpanInformation(r),this._xhrMem.set(r,{span:c,spanUrl:n}),c}_markResourceAsUsed(r){this._usedResources.add(r)}_patchOpen(){return r=>{let n=this;return function(...i){let s=i[0],a=i[1];return n._createSpan(this,a,s),r.apply(this,i)}}}_patchSend(){let r=this;function n(p,T,E,O){let I=T.callbackToRemoveEvents;typeof I=="function"&&I();let{span:U,spanUrl:Q,sendStartTime:W}=T;U&&(r._findResourceAndAddNetworkEvents(T,U,Q,W,E),U.addEvent(p,O),r._addFinalSpanAttributes(U,T,Q),U.end(O),r._tasksCount--),r._clearResources()}function o(p,T,E,O){let I=r._xhrMem.get(T);if(!I)return;if(I.status=T.status,I.statusText=T.statusText,r._xhrMem.delete(T),I.span){let W=I.span;r._applyAttributesAfterXHR(W,T),r._semconvStability&ot.STABLE&&(E?O&&(W.setStatus({code:St.ERROR,message:O}),W.setAttribute(qe,O)):I.status&&I.status>=400&&(W.setStatus({code:St.ERROR}),W.setAttribute(qe,String(I.status))))}let U=Wt(),Q=Date.now();setTimeout(()=>{n(p,I,U,Q)},lp)}function i(){o(Gt.EVENT_ERROR,this,!0,"error")}function s(){o(Gt.EVENT_ABORT,this,!1)}function a(){o(Gt.EVENT_TIMEOUT,this,!0,"timeout")}function c(){this.status<299?o(Gt.EVENT_LOAD,this,!1):o(Gt.EVENT_ERROR,this,!1)}function u(p){p.removeEventListener("abort",s),p.removeEventListener("error",i),p.removeEventListener("load",c),p.removeEventListener("timeout",a);let T=r._xhrMem.get(p);T&&(T.callbackToRemoveEvents=void 0)}return p=>function(...E){let O=r._xhrMem.get(this);if(!O)return p.apply(this,E);let I=O.span,U=O.spanUrl;if(I&&U){if(r.getConfig().measureRequestSize&&(E!=null&&E[0])){let Q=E[0],W=va(Q);W!==void 0&&(r._semconvStability&ot.OLD&&I.setAttribute(ga,W),r._semconvStability&ot.STABLE&&I.setAttribute(Ea,W))}B.with(z.setSpan(B.active(),I),()=>{r._tasksCount++,O.sendStartTime=Wt(),I.addEvent(Gt.METHOD_SEND),this.addEventListener("abort",s),this.addEventListener("error",i),this.addEventListener("load",c),this.addEventListener("timeout",a),O.callbackToRemoveEvents=()=>{u(this),O.createdResources&&O.createdResources.observer.disconnect()},r._addHeaders(this,U),r._addResourceObserver(this,U)})}return p.apply(this,E)}}enable(){this._diag.debug("applying patch to",this.moduleName,this.version),at(XMLHttpRequest.prototype.open)&&(this._unwrap(XMLHttpRequest.prototype,"open"),this._diag.debug("removing previous patch from method open")),at(XMLHttpRequest.prototype.send)&&(this._unwrap(XMLHttpRequest.prototype,"send"),this._diag.debug("removing previous patch from method send")),this._wrap(XMLHttpRequest.prototype,"open",this._patchOpen()),this._wrap(XMLHttpRequest.prototype,"send",this._patchSend())}disable(){this._diag.debug("removing patch from",this.moduleName,this.version),this._unwrap(XMLHttpRequest.prototype,"open"),this._unwrap(XMLHttpRequest.prototype,"send"),this._tasksCount=0,this._xhrMem=new WeakMap,this._usedResources=new WeakSet}};var Ar=class{constructor(e){l(this,"_delegate");this._delegate=e}export(e,r){this._delegate.export(e,r)}forceFlush(){return this._delegate.forceFlush()}shutdown(){return this._delegate.shutdown()}};var Rr=class extends Error{constructor(r,n,o){super(r);l(this,"code");l(this,"name","OTLPExporterError");l(this,"data");this.data=o,this.code=n}};function pp(t){if(Number.isFinite(t)&&t>0)return t;throw new Error(`Configuration: timeoutMillis is invalid, expected number greater than 0 (actual: '${t}')`)}function ba(t){if(t!=null)return async()=>t}function Pa(t,e,r){var n,o,i,s,a,c;return{timeoutMillis:pp((o=(n=t.timeoutMillis)!=null?n:e.timeoutMillis)!=null?o:r.timeoutMillis),concurrencyLimit:(s=(i=t.concurrencyLimit)!=null?i:e.concurrencyLimit)!=null?s:r.concurrencyLimit,compression:(c=(a=t.compression)!=null?a:e.compression)!=null?c:r.compression}}function La(){return{timeoutMillis:1e4,concurrencyLimit:30,compression:"none"}}var zo=class{constructor(e){l(this,"_concurrencyLimit");l(this,"_sendingPromises",[]);this._concurrencyLimit=e}pushPromise(e){if(this.hasReachedLimit())throw new Error("Concurrency Limit reached");this._sendingPromises.push(e);let r=()=>{let n=this._sendingPromises.indexOf(e);this._sendingPromises.splice(n,1)};e.then(r,r)}hasReachedLimit(){return this._sendingPromises.length>=this._concurrencyLimit}async awaitAll(){await Promise.all(this._sendingPromises)}};function Ca(t){return new zo(t.concurrencyLimit)}function fp(t){return Object.prototype.hasOwnProperty.call(t,"partialSuccess")}function wa(){return{handleResponse(t){t==null||!fp(t)||t.partialSuccess==null||Object.keys(t.partialSuccess).length===0||N.warn("Received Partial Success response:",JSON.stringify(t.partialSuccess))}}}var Zo=class{constructor(e,r,n,o,i){l(this,"_diagLogger");l(this,"_transport");l(this,"_serializer");l(this,"_responseHandler");l(this,"_promiseQueue");l(this,"_timeout");this._transport=e,this._serializer=r,this._responseHandler=n,this._promiseQueue=o,this._timeout=i,this._diagLogger=N.createComponentLogger({namespace:"OTLPExportDelegate"})}export(e,r){if(this._diagLogger.debug("items to be sent",e),this._promiseQueue.hasReachedLimit()){r({code:At.FAILED,error:new Error("Concurrent export limit reached")});return}let n=this._serializer.serializeRequest(e);if(n==null){r({code:At.FAILED,error:new Error("Nothing to send")});return}this._promiseQueue.pushPromise(this._transport.send(n,this._timeout).then(o=>{var i;if(o.status==="success"){if(o.data!=null)try{this._responseHandler.handleResponse(this._serializer.deserializeResponse(o.data))}catch(s){this._diagLogger.warn("Export succeeded but could not deserialize response - is the response specification compliant?",s,o.data)}r({code:At.SUCCESS});return}else if(o.status==="failure"&&o.error){r({code:At.FAILED,error:o.error});return}else o.status==="retryable"?r({code:At.FAILED,error:(i=o.error)!=null?i:new Rr("Export failed with retryable status")}):r({code:At.FAILED,error:new Rr("Export failed with unknown error")})},o=>r({code:At.FAILED,error:o})))}forceFlush(){return this._promiseQueue.awaitAll()}async shutdown(){this._diagLogger.debug("shutdown started"),await this.forceFlush(),this._transport.shutdown()}};function Da(t,e){return new Zo(t.transport,t.serializer,wa(),t.promiseHandler,e.timeout)}function Ko(t,e,r){return Da({transport:r,serializer:e,promiseHandler:Ca(t)},{timeout:t.timeoutMillis})}function Ia(t){return t>=48&&t<=57?t-48:t>=97&&t<=102?t-87:t-55}function Mn(t){let e=new Uint8Array(t.length/2),r=0;for(let n=0;n<t.length;n+=2){let o=Ia(t.charCodeAt(n)),i=Ia(t.charCodeAt(n+1));e[r++]=o<<4|i}return e}function ka(t){let e=BigInt(1e9);return BigInt(Math.trunc(t[0]))*e+BigInt(Math.trunc(t[1]))}function _p(t){let e=Number(BigInt.asUintN(32,t)),r=Number(BigInt.asUintN(32,t>>BigInt(32)));return{low:e,high:r}}function Ua(t){let e=ka(t);return _p(e)}function dp(t){return ka(t).toString()}var hp=typeof BigInt!="undefined"?dp:Rt;function Ma(t){return t}function Ha(t){if(t!==void 0)return Mn(t)}var Tp={encodeHrTime:Ua,encodeSpanContext:Mn,encodeOptionalSpanContext:Ha};function Ga(t){var n,o;if(t===void 0)return Tp;let e=(n=t.useLongBits)!=null?n:!0,r=(o=t.useHex)!=null?o:!1;return{encodeHrTime:e?Ua:hp,encodeSpanContext:r?Ma:Mn,encodeOptionalSpanContext:r?Ma:Ha}}function Ba(t){let e={attributes:yr(t.attributes),droppedAttributesCount:0},r=t.schemaUrl;return r&&r!==""&&(e.schemaUrl=r),e}function Va(t){return{name:t.name,version:t.version}}function yr(t){return Object.keys(t).map(e=>Fa(e,t[e]))}function Fa(t,e){return{key:t,value:ja(e)}}function ja(t){let e=typeof t;return e==="string"?{stringValue:t}:e==="number"?Number.isInteger(t)?{intValue:t}:{doubleValue:t}:e==="boolean"?{boolValue:t}:t instanceof Uint8Array?{bytesValue:t}:Array.isArray(t)?{arrayValue:{values:t.map(ja)}}:e==="object"&&t!=null?{kvlistValue:{values:Object.entries(t).map(([r,n])=>Fa(r,n))}}:{}}var mp=256,Ep=512;function za(t,e){let r=t&255|mp;return e&&(r|=Ep),r}function gp(t,e){var i,s,a,c;let r=t.spanContext(),n=t.status,o=(i=t.parentSpanContext)!=null&&i.spanId?e.encodeSpanContext((s=t.parentSpanContext)==null?void 0:s.spanId):void 0;return{traceId:e.encodeSpanContext(r.traceId),spanId:e.encodeSpanContext(r.spanId),parentSpanId:o,traceState:(a=r.traceState)==null?void 0:a.serialize(),name:t.name,kind:t.kind==null?0:t.kind+1,startTimeUnixNano:e.encodeHrTime(t.startTime),endTimeUnixNano:e.encodeHrTime(t.endTime),attributes:yr(t.attributes),droppedAttributesCount:t.droppedAttributesCount,events:t.events.map(u=>Ap(u,e)),droppedEventsCount:t.droppedEventsCount,status:{code:n.code,message:n.message},links:t.links.map(u=>Sp(u,e)),droppedLinksCount:t.droppedLinksCount,flags:za(r.traceFlags,(c=t.parentSpanContext)==null?void 0:c.isRemote)}}function Sp(t,e){var r;return{attributes:t.attributes?yr(t.attributes):[],spanId:e.encodeSpanContext(t.context.spanId),traceId:e.encodeSpanContext(t.context.traceId),traceState:(r=t.context.traceState)==null?void 0:r.serialize(),droppedAttributesCount:t.droppedAttributesCount||0,flags:za(t.context.traceFlags,t.context.isRemote)}}function Ap(t,e){return{attributes:t.attributes?yr(t.attributes):[],name:t.name,timeUnixNano:e.encodeHrTime(t.time),droppedAttributesCount:t.droppedAttributesCount||0}}function Za(t,e){let r=Ga(e);return{resourceSpans:yp(t,r)}}function Rp(t){let e=new Map;for(let r of t){let n=e.get(r.resource);n||(n=new Map,e.set(r.resource,n));let o=`${r.instrumentationScope.name}@${r.instrumentationScope.version||""}:${r.instrumentationScope.schemaUrl||""}`,i=n.get(o);i||(i=[],n.set(o,i)),i.push(r)}return e}function yp(t,e){let r=Rp(t),n=[],o=r.entries(),i=o.next();for(;!i.done;){let[s,a]=i.value,c=[],u=a.values(),p=u.next();for(;!p.done;){let O=p.value;if(O.length>0){let I=O.map(U=>gp(U,e));c.push({scope:Va(O[0].instrumentationScope),spans:I,schemaUrl:O[0].instrumentationScope.schemaUrl})}p=u.next()}let T=Ba(s),E={resource:T,scopeSpans:c,schemaUrl:T.schemaUrl};n.push(E),i=o.next()}return n}var kn={serializeRequest:t=>{let e=Za(t,{useHex:!0,useLongBits:!1});return new TextEncoder().encode(JSON.stringify(e))},deserializeResponse:t=>{if(t.length===0)return{};let e=new TextDecoder;return JSON.parse(e.decode(t))}};var Wo=5,Op=1e3,vp=5e3,Np=1.5,Ka=.2;function xp(){return Math.random()*(2*Ka)-Ka}var Yo=class{constructor(e){l(this,"_transport");this._transport=e}retry(e,r,n){return new Promise((o,i)=>{setTimeout(()=>{this._transport.send(e,r).then(o,i)},n)})}async send(e,r){var a;let n=Wo,o=Op,i=Date.now()+r,s=await this._transport.send(e,r);for(;s.status==="retryable"&&n>0;){n--;let c=Math.max(Math.min(o*(1+xp()),vp),0);o=o*Np;let u=(a=s.retryInMillis)!=null?a:c,p=i-Date.now();if(u>p)return N.info(`Export retry time ${Math.round(u)}ms exceeds remaining timeout ${Math.round(p)}ms, not retrying further.`),s;N.verbose(`Scheduling export retry in ${Math.round(u)}ms`),s=await this.retry(e,p,u)}return s.status==="success"?N.verbose(`Export succeeded after ${Wo-n} retry attempts.`):s.status==="retryable"?N.info(`Export failed after maximum retry attempts (${Wo}).`):N.info(`Export failed with non-retryable error: ${s.error}`),s}shutdown(){return this._transport.shutdown()}};function $o(t){return new Yo(t.transport)}var qo=class{constructor(e){l(this,"_params");this._params=e}async send(e){let r=(await this._params.headers())["Content-Type"];return new Promise(n=>{navigator.sendBeacon(this._params.url,new Blob([e],{type:r}))?(N.debug("SendBeacon success"),n({status:"success"})):n({status:"failure",error:new Error("SendBeacon failed")})})}shutdown(){}};function Wa(t){return new qo(t)}function Ya(t){return t===429||t===502||t===503||t===504}function $a(t){if(t==null)return;let e=Number.parseInt(t,10);if(Number.isInteger(e))return e>0?e*1e3:-1;let r=new Date(t).getTime()-Date.now();return r>=0?r:0}var Xo=class{constructor(e){l(this,"_parameters");this._parameters=e}async send(e,r){var i;let n=new AbortController,o=setTimeout(()=>n.abort(),r);try{let s=!!globalThis.location,a=new URL(this._parameters.url),c=await fetch(a.href,{method:"POST",headers:await this._parameters.headers(),body:e,signal:n.signal,keepalive:s,mode:s?((i=globalThis.location)==null?void 0:i.origin)===a.origin?"same-origin":"cors":"no-cors"});if(c.status>=200&&c.status<=299)return N.debug("response success"),{status:"success"};if(Ya(c.status)){let u=c.headers.get("Retry-After");return{status:"retryable",retryInMillis:$a(u)}}return{status:"failure",error:new Error("Fetch request failed with non-retryable status")}}catch(s){return bp(s)?{status:"retryable",error:new Error("Fetch request encountered a network error",{cause:s})}:{status:"failure",error:new Error("Fetch request errored",{cause:s})}}finally{clearTimeout(o)}}shutdown(){}};function qa(t){return new Xo(t)}function bp(t){return t instanceof TypeError&&!t.cause}function Xa(t,e){return Ko(t,e,$o({transport:qa(t)}))}function Qa(t,e){return Ko(t,e,$o({transport:Wa({url:t.url,headers:t.headers})}))}function Ja(t){let e={};return Object.entries(t!=null?t:{}).forEach(([r,n])=>{typeof n!="undefined"?e[r]=String(n):N.warn(`Header "${r}" has invalid value (${n}) and will be ignored`)}),e}function Pp(t,e,r){return async()=>{let n={...await r()},o={};return e!=null&&Object.assign(o,await e()),t!=null&&Object.assign(o,Ja(await t())),Object.assign(o,n)}}function Lp(t){var e;if(t!=null)try{let r=(e=globalThis.location)==null?void 0:e.href;return new URL(t,r).href}catch(r){throw new Error(`Configuration: Could not parse user-provided export URL: '${t}'`)}}function tc(t,e,r){var n,o;return{...Pa(t,e,r),headers:Pp(t.headers,e.headers,r.headers),url:(o=(n=Lp(t.url))!=null?n:e.url)!=null?o:r.url}}function ec(t,e){return{...La(),headers:async()=>t,url:"http://localhost:4318/"+e}}function rc(t){return typeof t.headers=="function"?t.headers:ba(t.headers)}function nc(t,e,r){return tc({url:t.url,timeoutMillis:t.timeoutMillis,headers:rc(t),concurrencyLimit:t.concurrencyLimit},{},ec(r,e))}function Qo(t,e,r,n){let o=Cp(t.headers),i=nc(t,r,n);return o(i,e)}function Cp(t){return!t&&typeof navigator.sendBeacon=="function"?Qa:Xa}var Ge=class extends Ar{constructor(e={}){super(Qo(e,kn,"v1/traces",{"Content-Type":"application/json"}))}};var se={PLATFORM:"browser.platform",BRANDS:"browser.brands",MOBILE:"browser.mobile",LANGUAGE:"browser.language",USER_AGENT:"browser.user_agent"};var Jo=class{detect(e){if(!(typeof window!="undefined"&&typeof document!="undefined"))return Se();let n=wp();return this._getResourceAttributes(n,e)}_getResourceAttributes(e,r){return!e[se.USER_AGENT]&&!e[se.PLATFORM]?(N.debug("BrowserDetector failed: Unable to find required browser resources. "),Se()):{attributes:e}}};function wp(){let t={},e=navigator.userAgentData;return e?(t[se.PLATFORM]=e.platform,t[se.BRANDS]=e.brands.map(r=>`${r.brand} ${r.version}`),t[se.MOBILE]=e.mobile):t[se.USER_AGENT]=navigator.userAgent,t[se.LANGUAGE]=navigator.language,t}var ti=new Jo;var pc=-1,Or=t=>{addEventListener("pageshow",(e=>{e.persisted&&(pc=e.timeStamp,t(e))}),!0)},ae=(t,e,r,n)=>{let o,i;return s=>{e.value>=0&&(s||n)&&(i=e.value-(o!=null?o:0),(i||o===void 0)&&(o=e.value,e.delta=i,e.rating=((a,c)=>a>c[1]?"poor":a>c[0]?"needs-improvement":"good")(e.value,r),t(e)))}},ci=t=>{requestAnimationFrame((()=>requestAnimationFrame((()=>t()))))},fc=()=>{let t=performance.getEntriesByType("navigation")[0];if(t&&t.responseStart>0&&t.responseStart<performance.now())return t},Hn=()=>{var e;let t=fc();return(e=t==null?void 0:t.activationStart)!=null?e:0},ce=(t,e=-1)=>{let r=fc(),n="navigate";return pc>=0?n="back-forward-cache":r&&(document.prerendering||Hn()>0?n="prerender":document.wasDiscarded?n="restore":r.type&&(n=r.type.replace(/_/g,"-"))),{name:t,value:e,rating:"good",delta:0,entries:[],id:`v5-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:n}},ei=new WeakMap;function ui(t,e){return ei.get(t)||ei.set(t,new e),ei.get(t)}var ni=class{constructor(){l(this,"t");l(this,"i",0);l(this,"o",[])}h(e){var o;if(e.hadRecentInput)return;let r=this.o[0],n=this.o.at(-1);this.i&&r&&n&&e.startTime-n.startTime<1e3&&e.startTime-r.startTime<5e3?(this.i+=e.value,this.o.push(e)):(this.i=e.value,this.o=[e]),(o=this.t)==null||o.call(this,e)}},vr=(t,e,r={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(t)){let n=new PerformanceObserver((o=>{Promise.resolve().then((()=>{e(o.getEntries())}))}));return n.observe({type:t,buffered:!0,...r}),n}}catch(n){}},li=t=>{let e=!1;return()=>{e||(t(),e=!0)}},Be=-1,_c=new Set,oc=()=>document.visibilityState!=="hidden"||document.prerendering?1/0:0,oi=t=>{if(document.visibilityState==="hidden"){if(t.type==="visibilitychange")for(let e of _c)e();isFinite(Be)||(Be=t.type==="visibilitychange"?t.timeStamp:0,removeEventListener("prerenderingchange",oi,!0))}},Gn=()=>{var t;if(Be<0){let e=Hn(),r=document.prerendering||(t=globalThis.performance.getEntriesByType("visibility-state").filter((n=>n.name==="hidden"&&n.startTime>e))[0])==null?void 0:t.startTime;Be=r!=null?r:oc(),addEventListener("visibilitychange",oi,!0),addEventListener("prerenderingchange",oi,!0),Or((()=>{setTimeout((()=>{Be=oc()}))}))}return{get firstHiddenTime(){return Be},onHidden(e){_c.add(e)}}},pi=t=>{document.prerendering?addEventListener("prerenderingchange",(()=>t()),!0):t()},ic=[1800,3e3],Dp=(t,e={})=>{pi((()=>{let r=Gn(),n,o=ce("FCP"),i=vr("paint",(s=>{for(let a of s)a.name==="first-contentful-paint"&&(i.disconnect(),a.startTime<r.firstHiddenTime&&(o.value=Math.max(a.startTime-Hn(),0),o.entries.push(a),n(!0)))}));i&&(n=ae(t,o,ic,e.reportAllChanges),Or((s=>{o=ce("FCP"),n=ae(t,o,ic,e.reportAllChanges),ci((()=>{o.value=performance.now()-s.timeStamp,n(!0)}))})))}))},sc=[.1,.25],dc=(t,e={})=>{let r=Gn();Dp(li((()=>{let n,o=ce("CLS",0),i=ui(e,ni),s=c=>{for(let u of c)i.h(u);i.i>o.value&&(o.value=i.i,o.entries=i.o,n())},a=vr("layout-shift",s);a&&(n=ae(t,o,sc,e.reportAllChanges),r.onHidden((()=>{s(a.takeRecords()),n(!0)})),Or((()=>{i.i=0,o=ce("CLS",0),n=ae(t,o,sc,e.reportAllChanges),ci((()=>n()))})),setTimeout(n))})))},hc=0,ri=1/0,Un=0,Ip=t=>{for(let e of t)e.interactionId&&(ri=Math.min(ri,e.interactionId),Un=Math.max(Un,e.interactionId),hc=Un?(Un-ri)/7+1:0)},ii,ac=()=>{var t;return ii?hc:(t=performance.interactionCount)!=null?t:0},Mp=()=>{"interactionCount"in performance||ii||(ii=vr("event",Ip,{type:"event",buffered:!0,durationThreshold:0}))},cc=0,si=class{constructor(){l(this,"u",[]);l(this,"l",new Map);l(this,"m");l(this,"p")}v(){cc=ac(),this.u.length=0,this.l.clear()}L(){let e=Math.min(this.u.length-1,Math.floor((ac()-cc)/50));return this.u[e]}h(e){var o,i;if((o=this.m)==null||o.call(this,e),!e.interactionId&&e.entryType!=="first-input")return;let r=this.u.at(-1),n=this.l.get(e.interactionId);if(n||this.u.length<10||e.duration>r.P){if(n?e.duration>n.P?(n.entries=[e],n.P=e.duration):e.duration===n.P&&e.startTime===n.entries[0].startTime&&n.entries.push(e):(n={id:e.interactionId,entries:[e],P:e.duration},this.l.set(n.id,n),this.u.push(n)),this.u.sort(((s,a)=>a.P-s.P)),this.u.length>10){let s=this.u.splice(10);for(let a of s)this.l.delete(a.id)}(i=this.p)==null||i.call(this,n)}}},Tc=t=>{let e=globalThis.requestIdleCallback||setTimeout;document.visibilityState==="hidden"?t():(t=li(t),addEventListener("visibilitychange",t,{once:!0,capture:!0}),e((()=>{t(),removeEventListener("visibilitychange",t,{capture:!0})})))},uc=[200,500],mc=(t,e={})=>{if(!globalThis.PerformanceEventTiming||!("interactionId"in PerformanceEventTiming.prototype))return;let r=Gn();pi((()=>{var c;Mp();let n,o=ce("INP"),i=ui(e,si),s=u=>{Tc((()=>{for(let T of u)i.h(T);let p=i.L();p&&p.P!==o.value&&(o.value=p.P,o.entries=p.entries,n())}))},a=vr("event",s,{durationThreshold:(c=e.durationThreshold)!=null?c:40});n=ae(t,o,uc,e.reportAllChanges),a&&(a.observe({type:"first-input",buffered:!0}),r.onHidden((()=>{s(a.takeRecords()),n(!0)})),Or((()=>{i.v(),o=ce("INP"),n=ae(t,o,uc,e.reportAllChanges)})))}))},ai=class{constructor(){l(this,"m")}h(e){var r;(r=this.m)==null||r.call(this,e)}},lc=[2500,4e3],Ec=(t,e={})=>{pi((()=>{let r=Gn(),n,o=ce("LCP"),i=ui(e,ai),s=c=>{e.reportAllChanges||(c=c.slice(-1));for(let u of c)i.h(u),u.startTime<r.firstHiddenTime&&(o.value=Math.max(u.startTime-Hn(),0),o.entries=[u],n())},a=vr("largest-contentful-paint",s);if(a){n=ae(t,o,lc,e.reportAllChanges);let c=li((()=>{s(a.takeRecords()),a.disconnect(),n(!0)})),u=p=>{p.isTrusted&&(Tc(c),removeEventListener(p.type,u,{capture:!0}))};for(let p of["keydown","click","visibilitychange"])addEventListener(p,u,{capture:!0});Or((p=>{o=ce("LCP"),n=ae(t,o,lc,e.reportAllChanges),ci((()=>{o.value=performance.now()-p.timeStamp,n(!0)}))}))}}))};var Nr=class{emit(e){}},gc=new Nr;var xr=Symbol.for("io.opentelemetry.js.api.logs"),Ve=globalThis;function Sc(t,e,r){return n=>n===t?e:r}var fi=1;var _i=class{getLogger(e,r,n){return new Nr}},Bn=new _i;var Vn=class{constructor(e,r,n,o){this._provider=e,this.name=r,this.version=n,this.options=o}emit(e){this._getLogger().emit(e)}_getLogger(){if(this._delegate)return this._delegate;let e=this._provider._getDelegateLogger(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):gc}};var br=class{getLogger(e,r,n){var o;return(o=this._getDelegateLogger(e,r,n))!==null&&o!==void 0?o:new Vn(this,e,r,n)}_getDelegate(){var e;return(e=this._delegate)!==null&&e!==void 0?e:Bn}_setDelegate(e){this._delegate=e}_getDelegateLogger(e,r,n){var o;return(o=this._delegate)===null||o===void 0?void 0:o.getLogger(e,r,n)}};var Fn=class t{constructor(){this._proxyLoggerProvider=new br}static getInstance(){return this._instance||(this._instance=new t),this._instance}setGlobalLoggerProvider(e){return Ve[xr]?this.getLoggerProvider():(Ve[xr]=Sc(fi,e,Bn),this._proxyLoggerProvider._setDelegate(e),e)}getLoggerProvider(){var e,r;return(r=(e=Ve[xr])===null||e===void 0?void 0:e.call(Ve,fi))!==null&&r!==void 0?r:this._proxyLoggerProvider}getLogger(e,r,n){return this.getLoggerProvider().getLogger(e,r,n)}disable(){delete Ve[xr],this._proxyLoggerProvider=new br}};var Ac=Fn.getInstance();var Et=console.error.bind(console);function Pr(t,e,r){let n=!!t[e]&&Object.prototype.propertyIsEnumerable.call(t,e);Object.defineProperty(t,e,{configurable:!0,enumerable:n,writable:!0,value:r})}var jn=(t,e,r)=>{if(!t||!t[e]){Et("no original function "+String(e)+" to wrap");return}if(!r){Et("no wrapper function"),Et(new Error().stack);return}let n=t[e];if(typeof n!="function"||typeof r!="function"){Et("original object and wrapper must be functions");return}let o=r(n,e);return Pr(o,"__original",n),Pr(o,"__unwrap",()=>{t[e]===o&&Pr(t,e,n)}),Pr(o,"__wrapped",!0),Pr(t,e,o),o},di=(t,e,r)=>{if(t)Array.isArray(t)||(t=[t]);else{Et("must provide one or more modules to patch"),Et(new Error().stack);return}if(!(e&&Array.isArray(e))){Et("must provide one or more functions to wrap on modules");return}t.forEach(n=>{e.forEach(o=>{jn(n,o,r)})})},zn=(t,e)=>{if(!t||!t[e]){Et("no function to unwrap."),Et(new Error().stack);return}let r=t[e];if(!r.__unwrap)Et("no original to unwrap to -- has "+String(e)+" already been unwrapped?");else{r.__unwrap();return}},hi=(t,e)=>{if(t)Array.isArray(t)||(t=[t]);else{Et("must provide one or more modules to patch"),Et(new Error().stack);return}if(!(e&&Array.isArray(e))){Et("must provide one or more functions to unwrap on modules");return}t.forEach(r=>{e.forEach(n=>{zn(r,n)})})};function Lr(t){t&&t.logger&&(typeof t.logger!="function"?Et("new logger isn't a function, not replacing"):Et=t.logger)}Lr.wrap=jn;Lr.massWrap=di;Lr.unwrap=zn;Lr.massUnwrap=hi;var Zn=class{constructor(e,r,n){l(this,"_config",{});l(this,"_tracer");l(this,"_meter");l(this,"_logger");l(this,"_diag");l(this,"instrumentationName");l(this,"instrumentationVersion");l(this,"_wrap",jn);l(this,"_unwrap",zn);l(this,"_massWrap",di);l(this,"_massUnwrap",hi);this.instrumentationName=e,this.instrumentationVersion=r,this.setConfig(n),this._diag=N.createComponentLogger({namespace:e}),this._tracer=z.getTracer(e,r),this._meter=fe.getMeter(e,r),this._logger=Ac.getLogger(e,r),this._updateMetricInstruments()}get meter(){return this._meter}setMeterProvider(e){this._meter=e.getMeter(this.instrumentationName,this.instrumentationVersion),this._updateMetricInstruments()}get logger(){return this._logger}setLoggerProvider(e){this._logger=e.getLogger(this.instrumentationName,this.instrumentationVersion)}getModuleDefinitions(){var r;let e=(r=this.init())!=null?r:[];return Array.isArray(e)?e:[e]}_updateMetricInstruments(){}getConfig(){return this._config}setConfig(e){this._config={enabled:!0,...e}}setTracerProvider(e){this._tracer=e.getTracer(this.instrumentationName,this.instrumentationVersion)}get tracer(){return this._tracer}_runSpanCustomizationHook(e,r,n,o){if(e)try{e(n,o)}catch(i){this._diag.error("Error running span customization hook due to exception in handler",{triggerName:r},i)}}};var Fe=class extends Zn{constructor(e,r,n){super(e,r,n),this._config.enabled&&this.enable()}};function Kn(t,e,r){let n,o;try{o=t()}catch(i){n=i}finally{if(e(n,o),n&&!r)throw n;return o}}function Ti(t){return typeof t=="function"&&typeof t.__original=="function"&&typeof t.__unwrap=="function"&&t.__wrapped===!0}var _t;(function(t){t[t.STABLE=1]="STABLE",t[t.OLD=2]="OLD",t[t.DUPLICATE=3]="DUPLICATE"})(_t||(_t={}));function mi(t,e){let r=_t.OLD,n=e==null?void 0:e.split(",").map(o=>o.trim()).filter(o=>o!=="");for(let o of n!=null?n:[])if(o.toLowerCase()===t+"/dup"){r=_t.DUPLICATE;break}else o.toLowerCase()===t&&(r=_t.STABLE);return r}var Wn=performance;var Up=9,Hp=6,Gp=Math.pow(10,Hp),Ei=Math.pow(10,Up);function Ne(t){let e=t/1e3,r=Math.trunc(e),n=Math.round(t%1e3*Gp);return[r,n]}function Cr(t){let e=Ne(Wn.timeOrigin),r=Ne(typeof t=="number"?t:Wn.now());return yc(e,r)}function xe(t){if(Rc(t))return t;if(typeof t=="number")return t<Wn.timeOrigin?Cr(t):Ne(t);if(t instanceof Date)return Ne(t.getTime());throw TypeError("Invalid input type")}function Bt(t){return t[0]*Ei+t[1]}function Rc(t){return Array.isArray(t)&&t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number"}function yc(t,e){let r=[t[0]+e[0],t[1]+e[1]];return r[1]>=Ei&&(r[1]-=Ei,r[0]+=1),r}function Yn(t,e){return typeof e=="string"?t===e:!!t.match(e)}function gi(t,e){if(!e)return!1;for(let r of e)if(Yn(t,r))return!0;return!1}var J;(function(t){t.CONNECT_END="connectEnd",t.CONNECT_START="connectStart",t.DECODED_BODY_SIZE="decodedBodySize",t.DOM_COMPLETE="domComplete",t.DOM_CONTENT_LOADED_EVENT_END="domContentLoadedEventEnd",t.DOM_CONTENT_LOADED_EVENT_START="domContentLoadedEventStart",t.DOM_INTERACTIVE="domInteractive",t.DOMAIN_LOOKUP_END="domainLookupEnd",t.DOMAIN_LOOKUP_START="domainLookupStart",t.ENCODED_BODY_SIZE="encodedBodySize",t.FETCH_START="fetchStart",t.LOAD_EVENT_END="loadEventEnd",t.LOAD_EVENT_START="loadEventStart",t.NAVIGATION_START="navigationStart",t.REDIRECT_END="redirectEnd",t.REDIRECT_START="redirectStart",t.REQUEST_START="requestStart",t.RESPONSE_END="responseEnd",t.RESPONSE_START="responseStart",t.SECURE_CONNECTION_START="secureConnectionStart",t.START_TIME="startTime",t.UNLOAD_EVENT_END="unloadEventEnd",t.UNLOAD_EVENT_START="unloadEventStart"})(J||(J={}));var Oc="http.response_content_length",vc="http.response_content_length_uncompressed";var Si;function Vp(){return Si||(Si=document.createElement("a")),Si}function Nc(t,e){return e in t}function Vt(t,e,r,n=!0){if(Nc(r,e)&&typeof r[e]=="number"&&!(n&&r[e]===0))return t.addEvent(e,r[e])}function $n(t,e,r=!1,n,o){if(n===void 0&&(n=e[J.START_TIME]!==0),r||(Vt(t,J.FETCH_START,e,n),Vt(t,J.DOMAIN_LOOKUP_START,e,n),Vt(t,J.DOMAIN_LOOKUP_END,e,n),Vt(t,J.CONNECT_START,e,n),Vt(t,J.SECURE_CONNECTION_START,e,n),Vt(t,J.CONNECT_END,e,n),Vt(t,J.REQUEST_START,e,n),Vt(t,J.RESPONSE_START,e,n),Vt(t,J.RESPONSE_END,e,n)),!o){let i=e[J.ENCODED_BODY_SIZE];i!==void 0&&t.setAttribute(Oc,i);let s=e[J.DECODED_BODY_SIZE];s!==void 0&&i!==s&&t.setAttribute(vc,s)}}function xc(t){return t.slice().sort((e,r)=>{let n=e[J.FETCH_START],o=r[J.FETCH_START];return n>o?1:n<o?-1:0})}function bc(){return typeof location!="undefined"?location.origin:void 0}function Ai(t,e,r,n,o=new WeakSet,i){let s=je(t);t=s.toString();let a=jp(t,e,r,n,o,i);if(a.length===0)return{mainRequest:void 0};if(a.length===1)return{mainRequest:a[0]};let c=xc(a);if(s.origin!==bc()&&c.length>1){let u=c[0],p=Fp(c,u[J.RESPONSE_END],r),T=u[J.RESPONSE_END];return p[J.FETCH_START]<T&&(p=u,u=void 0),{corsPreFlightRequest:u,mainRequest:p}}else return{mainRequest:a[0]}}function Fp(t,e,r){let n=Bt(r),o=Bt(xe(e)),i=t[1],s,a=t.length;for(let c=1;c<a;c++){let u=t[c],p=Bt(xe(u[J.FETCH_START])),T=Bt(xe(u[J.RESPONSE_END])),E=n-T;p>=o&&(!s||E<s)&&(s=E,i=u)}return i}function jp(t,e,r,n,o,i){let s=Bt(e),a=Bt(r),c=n.filter(u=>{let p=Bt(xe(u[J.FETCH_START])),T=Bt(xe(u[J.RESPONSE_END]));return u.initiatorType.toLowerCase()===(i||"xmlhttprequest")&&u.name===t&&p>=s&&T<=a});return c.length>0&&(c=c.filter(u=>!o.has(u))),c}function je(t){if(typeof URL=="function")return new URL(t,typeof document!="undefined"?document.baseURI:typeof location!="undefined"?location.href:void 0);let e=Vp();return e.href=t,e}function Ri(t,e){let r=e||[];return(typeof r=="string"||r instanceof RegExp)&&(r=[r]),je(t).origin===bc()?!0:r.some(o=>Yn(t,o))}var wr;(function(t){t.COMPONENT="component",t.HTTP_STATUS_TEXT="http.status_text"})(wr||(wr={}));var Pc="http.host",Lc="http.method",Cc="http.request.body.size",wc="http.request_content_length_uncompressed";var Dc="http.scheme",Ic="http.status_code",Mc="http.url",kc="http.user_agent";var Uc=N.createComponentLogger({namespace:"@opentelemetry/opentelemetry-instrumentation-fetch/utils"});function Hc(...t){if(t[0]instanceof URL||typeof t[0]=="string"){let e=t[1];if(!(e!=null&&e.body))return Promise.resolve();if(e.body instanceof ReadableStream){let{body:r,length:n}=Zp(e.body);return e.body=r,n}else return Promise.resolve(Wp(e.body))}else{let e=t[0];return e!=null&&e.body?e.clone().text().then(r=>yi(r)):Promise.resolve()}}function Zp(t){if(!t.pipeThrough)return Uc.warn("Platform has ReadableStream but not pipeThrough!"),{body:t,length:Promise.resolve(void 0)};let e=0,r,n=new Promise(i=>{r=i}),o=new TransformStream({start(){},async transform(i,s){let a=await i;e+=a.byteLength,s.enqueue(i)},flush(){r(e)}});return{body:t.pipeThrough(o),length:n}}function Kp(t){return typeof Document!="undefined"&&t instanceof Document}function Wp(t){if(Kp(t))return new XMLSerializer().serializeToString(document).length;if(typeof t=="string")return yi(t);if(t instanceof Blob)return t.size;if(t instanceof FormData)return $p(t);if(t instanceof URLSearchParams)return yi(t.toString());if(t.byteLength!==void 0)return t.byteLength;Uc.warn("unknown body type")}var Yp=new TextEncoder;function yi(t){return Yp.encode(t).byteLength}function $p(t){let e=0;for(let[r,n]of t.entries())e+=r.length,n instanceof Blob?e+=n.size:e+=n.length;return e}function Gc(t){let e=Xp(),r=t.toUpperCase();return r in e?r:"_OTHER"}var qp={CONNECT:!0,DELETE:!0,GET:!0,HEAD:!0,OPTIONS:!0,PATCH:!0,POST:!0,PUT:!0,TRACE:!0,QUERY:!0},Dr;function Xp(){if(Dr===void 0){let t=void 0;t&&t.length>0?(Dr={},t.forEach(e=>{Dr[e]=!0})):Dr=qp}return Dr}var Qp={"https:":"443","http:":"80"};function Bc(t){let e=Number(t.port||Qp[t.protocol]);if(e&&!isNaN(e))return e}var Oi="0.212.0";var Jp=300,Vc=typeof PerformanceObserver!="undefined",Ir=class extends Fe{constructor(r={}){super("@opentelemetry/instrumentation-fetch",Oi,r);l(this,"component","fetch");l(this,"version",Oi);l(this,"moduleName",this.component);l(this,"_usedResources",new WeakSet);l(this,"_tasksCount",0);l(this,"_semconvStability");this._semconvStability=mi("http",r==null?void 0:r.semconvStabilityOptIn)}init(){}_addChildSpan(r,n){let o=this.tracer.startSpan("CORS Preflight",{startTime:n[J.FETCH_START]},z.setSpan(B.active(),r)),i=!(this._semconvStability&_t.OLD);$n(o,n,this.getConfig().ignoreNetworkEvents,void 0,i),o.end(n[J.RESPONSE_END])}_addFinalSpanAttributes(r,n){let o=je(n.url);if(this._semconvStability&_t.OLD&&(r.setAttribute(Ic,n.status),n.statusText!=null&&r.setAttribute(wr.HTTP_STATUS_TEXT,n.statusText),r.setAttribute(Pc,o.host),r.setAttribute(Dc,o.protocol.replace(":","")),typeof navigator!="undefined"&&r.setAttribute(kc,navigator.userAgent)),this._semconvStability&_t.STABLE){r.setAttribute(qr,n.status),r.setAttribute(Xr,o.hostname);let i=Bc(o);i&&r.setAttribute(Qr,i)}}_addHeaders(r,n){if(!Ri(n,this.getConfig().propagateTraceHeaderCorsUrls)){let o={};it.inject(B.active(),o),Object.keys(o).length>0&&this._diag.debug("headers inject skipped due to CORS policy");return}if(r instanceof Request)it.inject(B.active(),r.headers,{set:(o,i,s)=>o.set(i,typeof s=="string"?s:String(s))});else if(r.headers instanceof Headers)it.inject(B.active(),r.headers,{set:(o,i,s)=>o.set(i,typeof s=="string"?s:String(s))});else if(r.headers instanceof Map)it.inject(B.active(),r.headers,{set:(o,i,s)=>o.set(i,typeof s=="string"?s:String(s))});else{let o={};it.inject(B.active(),o),r.headers=Object.assign({},o,r.headers||{})}}_clearResources(){this._tasksCount===0&&this.getConfig().clearTimingResources&&(performance.clearResourceTimings(),this._usedResources=new WeakSet)}_createSpan(r,n={}){if(gi(r,this.getConfig().ignoreUrls)){this._diag.debug("ignoring span as url matches ignored url");return}let o="",i={};if(this._semconvStability&_t.OLD){let s=(n.method||"GET").toUpperCase();o=`HTTP ${s}`,i[wr.COMPONENT]=this.moduleName,i[Lc]=s,i[Mc]=r}if(this._semconvStability&_t.STABLE){let s=n.method,a=Gc(n.method||"GET");o||(o=a),i[Yr]=a,a!==s&&(i[$r]=s),i[oe]=r}return this.tracer.startSpan(o,{kind:Kt.CLIENT,attributes:i})}_findResourceAndAddNetworkEvents(r,n,o){let i=n.entries;if(!i.length){if(!performance.getEntriesByType)return;i=performance.getEntriesByType("resource")}let s=Ai(n.spanUrl,n.startTime,o,i,this._usedResources,"fetch");if(s.mainRequest){let a=s.mainRequest;this._markResourceAsUsed(a);let c=s.corsPreFlightRequest;c&&(this._addChildSpan(r,c),this._markResourceAsUsed(c));let u=!(this._semconvStability&_t.OLD);$n(r,a,this.getConfig().ignoreNetworkEvents,void 0,u)}}_markResourceAsUsed(r){this._usedResources.add(r)}_endSpan(r,n,o){let i=Ne(Date.now()),s=Cr();this._addFinalSpanAttributes(r,o),this._semconvStability&_t.STABLE&&o.status>=400&&(r.setStatus({code:St.ERROR}),r.setAttribute(qe,String(o.status))),setTimeout(()=>{var a;(a=n.observer)==null||a.disconnect(),this._findResourceAndAddNetworkEvents(r,n,s),this._tasksCount--,this._clearResources(),r.end(i)},Jp)}_patchConstructor(){return r=>{let n=this,o=new Set(["url","type","redirected"]);function i(s,a){return new Proxy(s,{get(c,u,p){if(typeof u=="string"&&o.has(u))return Reflect.get(a,u);if(u==="clone")return function(){return i(c.clone(),a)};let T=Reflect.get(c,u,c);return typeof T=="function"?T.bind(c):T}})}return function(...a){let c=this,u=je(a[0]instanceof Request?a[0].url:String(a[0])).href,p=a[0]instanceof Request?a[0]:a[1]||{},T=n._createSpan(u,p);if(!T)return r.apply(this,a);let E=n._prepareSpanData(u);n.getConfig().measureRequestSize&&Hc(...a).then(S=>{S&&(n._semconvStability&_t.OLD&&T.setAttribute(wc,S),n._semconvStability&_t.STABLE&&T.setAttribute(Cc,S))}).catch(S=>{n._diag.warn("getFetchBodyLength",S)});function O(S,m){n._applyAttributesAfterFetch(S,p,m),n._endSpan(S,E,{status:m.status||0,statusText:m.message,url:u})}function I(S,m){n._applyAttributesAfterFetch(S,p,m),m.status>=200&&m.status<400?n._endSpan(S,E,m):n._endSpan(S,E,{status:m.status,statusText:m.statusText,url:u})}function U(S,m){if(!S)return null;let y=S.getReader();return new ReadableStream({async pull(v){try{let{value:V,done:L}=await y.read();L?(y.releaseLock(),v.close()):v.enqueue(V)}catch(V){v.error(V),y.cancel(V).catch(L=>{});try{y.releaseLock()}catch(L){}}},cancel(v){return m.cancel(v).catch(V=>{}),y.cancel(v)}})}function Q(S,m,y){let v=null;try{let L=y.clone().body;if(L){let x=L.getReader(),G=y.status===204||y.status===205||y.status===304?null:U(y.body,x),M=new Response(G,{status:y.status,statusText:y.statusText,headers:y.headers});v=i(M,y);let D=()=>{x.read().then(({done:b})=>{b?I(S,y):D()},b=>{O(S,b)})};D()}else I(S,y)}finally{m(v!=null?v:y)}}function W(S,m,y){try{O(S,y)}finally{m(y)}}return new Promise((S,m)=>B.with(z.setSpan(B.active(),T),()=>(n._addHeaders(p,u),n._callRequestHook(T,p),n._tasksCount++,r.apply(c,p instanceof Request?[p]:[u,p]).then(Q.bind(c,T,S),W.bind(c,T,m)))))}}}_applyAttributesAfterFetch(r,n,o){let i=this.getConfig().applyCustomAttributesOnSpan;i&&Kn(()=>i(r,n,o),s=>{s&&this._diag.error("applyCustomAttributesOnSpan",s)},!0)}_callRequestHook(r,n){let o=this.getConfig().requestHook;o&&Kn(()=>o(r,n),i=>{i&&this._diag.error("requestHook",i)},!0)}_prepareSpanData(r){let n=Cr(),o=[];if(typeof PerformanceObserver!="function")return{entries:o,startTime:n,spanUrl:r};let i=new PerformanceObserver(s=>{s.getEntries().forEach(c=>{c.initiatorType==="fetch"&&c.name===r&&o.push(c)})});return i.observe({entryTypes:["resource"]}),{entries:o,observer:i,startTime:n,spanUrl:r}}enable(){if(!Vc){this._diag.warn("this instrumentation is intended for web usage only, it does not instrument server-side fetch()");return}Ti(fetch)&&(this._unwrap(globalThis,"fetch"),this._diag.debug("removing previous patch for constructor")),this._wrap(globalThis,"fetch",this._patchConstructor())}disable(){Vc&&(this._unwrap(globalThis,"fetch"),this._usedResources=new WeakSet)}};(function(){var Q,W,S,m;let e=window.MatomoOpenTelemetry||{};if(!e.enabled)return;let r=(Q=e.traceUrl)!=null?Q:"",n=(W=e.serviceName)!=null?W:"matomo-frontend",o=go({detectors:[ti]}),i=O(e.resourceAttributes),s=nr({[Jr]:n,...i});s=s.merge(o);let a=new sr({resource:s,spanProcessors:[new De(new Ge({url:r}))]});a.register({contextManager:new Me,propagator:new me({propagators:[new Ee,new de]})});let c=(S=window.piwik)==null?void 0:S.idSite;if(c!=null){let y=it.createBaggage({"matomo.site_id":{value:String(c)}}),v=it.setBaggage(B.active(),y);B.with(v,()=>{})}let u=[];e.enableDocumentLoadMonitoring&&u.push(new mr),e.enableUserInteractionMonitoring&&u.push(new Er),e.enableXMLHttpRequestMonitoring&&(u.push(new Sr({propagateTraceHeaderCorsUrls:[/.*/]})),u.push(new Ir({propagateTraceHeaderCorsUrls:[/.*/]}))),u.length>0&&Go({instrumentations:u});let p=z.getTracer(n),T=null,E=B.active();if(e.enableUxMonitoring){let y=function(){T&&T.end(),T=p.startSpan("ui.page",{attributes:{"http.url":window.location.href,"http.path":window.location.pathname,"http.title":document.title}}),E=z.setSpan(B.active(),T)};y(),window.addEventListener("hashchange",()=>{y()}),window.addEventListener("beforeunload",()=>{T&&T.end()})}function O(y){return!y||typeof y!="string"?{}:y.split(",").map(v=>v.trim()).filter(Boolean).reduce((v,V)=>{let[L,...x]=V.split("=");return!L||x.length===0||(v[L.trim()]=x.join("=").trim()),v},{})}function I(y,v){var V;try{let L=p.startSpan(y,{},E);L.recordException(v),L.setStatus({code:St.ERROR}),L.setAttribute("error.message",v.message),L.setAttribute("error.name",v.name),L.setAttribute("error.stack",(V=v.stack)!=null?V:""),L.setAttribute("http.url",window.location.href),L.setAttribute("http.path",window.location.pathname),L.setAttribute("http.title",document.title),L.end(),a.forceFlush()}catch(L){console.warn("OpenTelemetry: failed to record error span",L)}}window.addEventListener("error",y=>{I("js.error",y.error||new Error(y.message))}),window.addEventListener("unhandledrejection",y=>{I("js.unhandled_promise",y.reason instanceof Error?y.reason:new Error(String(y.reason)))});function U(){let y=document.getElementById("ajaxError");if(!y)return;new MutationObserver(V=>{var L,x,tt,G;for(let M of V)for(let D of M.addedNodes){if(!(D instanceof HTMLElement))continue;let b=(L=D.matches)!=null&&L.call(D,".notification-error")?D:(x=D.querySelector)==null?void 0:x.call(D,".notification-error");if(!b)continue;let lt=(G=(tt=b.querySelector(".notification-body div"))==null?void 0:tt.innerText)==null?void 0:G.trim();if(!lt)continue;let pt=p.startSpan("ui.notification.error",{attributes:{"ui.notification.type":"error","ui.notification.message":lt,"http.url":window.location.href,"http.path":window.location.pathname}},E);pt.setStatus({code:St.ERROR}),pt.end()}}).observe(y,{childList:!0,subtree:!0})}if(document.readyState==="loading"?document.addEventListener("DOMContentLoaded",U):U(),e.enableWebVitals){let y=function(v){let V=p.startSpan("browser.web_vital",{attributes:{"http.url":window.location.href,"http.path":window.location.pathname}},E);V.addEvent("browser.web_vital",{name:v.name,value:v.value,delta:v.delta,id:v.id}),V.end()};dc(y),Ec(y),mc(y)}e.enableUxMonitoring&&"PerformanceObserver"in window&&((m=PerformanceObserver.supportedEntryTypes)!=null&&m.includes("longtask"))&&new PerformanceObserver(v=>{for(let V of v.getEntries()){let L=p.startSpan("ux.long_task",{attributes:{"http.url":window.location.href,"http.path":window.location.pathname}},E);L.addEvent("ux.long_task",{duration:V.duration,startTime:V.startTime}),L.end()}}).observe({entryTypes:["longtask"]})})();})();
/*! Bundled license information:

zone.js/fesm2015/zone.js:
  (**
   * @license Angular
   * (c) 2010-2025 Google LLC. https://angular.dev/
   * License: MIT
   *)
*/
